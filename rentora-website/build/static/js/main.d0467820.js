/*! For license information please see main.d0467820.js.LICENSE.txt */
(()=>{var e={720:(e,t,n)=>{"undefined"===typeof window||window.global||(window.global="undefined"===typeof n.g?window:n.g)},95:(e,t,n)=>{var r=NaN,i="[object Symbol]",s=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,h="object"==typeof self&&self&&self.Object===Object&&self,d=u||h||Function("return this")(),f=Object.prototype.toString,p=Math.max,m=Math.min,g=function(){return d.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==i}(e))return r;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=a.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):o.test(e)?r:+e}e.exports=function(e,t,n){var r,i,s,o,a,l,c=0,u=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,s=i;return r=i=void 0,c=t,o=e.apply(s,n)}function w(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=s}function b(){var e=g();if(w(e))return _(e);a=setTimeout(b,function(e){var n=t-(e-l);return h?m(n,s-(e-c)):n}(e))}function _(e){return a=void 0,d&&r?f(e):(r=i=void 0,o)}function S(){var e=g(),n=w(e);if(r=arguments,i=this,l=e,n){if(void 0===a)return function(e){return c=e,a=setTimeout(b,t),u?f(e):o}(l);if(h)return a=setTimeout(b,t),f(l)}return void 0===a&&(a=setTimeout(b,t)),o}return t=y(t)||0,v(n)&&(u=!!n.leading,s=(h="maxWait"in n)?p(y(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d),S.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=l=i=a=void 0},S.flush=function(){return void 0===a?o:_(g())},S}},888:(e,t,n)=>{"use strict";var r=n(47);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},7:(e,t,n)=>{e.exports=n(888)()},47:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:(e,t,n)=>{"use strict";var r=n(791),i=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),S=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case S:return"Portal";case k:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){$(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ie=null,Ee=null;function ke(e){if(e=wi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Se(e.stateNode,e.type,t))}}function xe(e){Ie?Ee?Ee.push(e):Ee=[e]:Ie=e}function Te(){if(Ie){var e=Ie,t=Ee;if(Ee=Ie=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Ie||null!==Ee)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function je(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Ue=!1,Fe=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,i,s,o,a,l){Le=!1,Me=null,je.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,St,It,Et,kt,xt=!1,Tt=[],Ct=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void kt(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Vt(){xt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(Ft),Rt.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,xt||(xt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Gt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Kt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Gt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),jt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Lt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Lt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=M({},cn,{view:0,detail:0}),dn=sn(hn),fn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},hn,{relatedTarget:0})),vn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(M({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function kn(){return En}var xn=M({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(xn),Cn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),An=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Pn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,jn=null;u&&"documentMode"in document&&(jn=document.documentMode);var Ln=u&&"TextEvent"in window&&!jn,Mn=u&&(!On||jn&&8<jn&&11>=jn),Un=String.fromCharCode(32),Fn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){xe(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Wn(t,Gn,e,_e(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Ir={},Er={};function kr(e){if(Ir[e])return Ir[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Ir[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var xr=kr("animationend"),Tr=kr("animationiteration"),Cr=kr("animationstart"),Nr=kr("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),l(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(xr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,c),s=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=s,i=_e(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case xr:case Tr:case Cr:l=vn;break;case Nr:l=An;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Wr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=d;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Jn;else if(Hn(a))if($n)g=or;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(y=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(v=Kr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=zn(n))&&(w.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Re(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Re(n,s))&&o.unshift(Wr(n,l,a)):i||null!=(l=Re(n,s))&&o.push(Wr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Si=[],Ii=-1;function Ei(e){return{current:e}}function ki(e){0>Ii||(e.current=Si[Ii],Si[Ii]=null,Ii--)}function xi(e,t){Ii++,Si[Ii]=e.current,e.current=t}var Ti={},Ci=Ei(Ti),Ni=Ei(!1),Ai=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){ki(Ni),ki(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(s(168));xi(Ci,t),xi(Ni,n)}function ji(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,xi(Ci,e),xi(Ni,Ni.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=ji(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,ki(Ni),ki(Ci),xi(Ci,e)):ki(Ni),xi(Ni,n)}var Ui=null,Fi=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,Bi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Hi=0,Wi=null,Ki=0,Gi=[],Qi=0,Yi=null,Ji=1,$i="";function Xi(e,t){qi[Hi++]=Ki,qi[Hi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Ji,Gi[Qi++]=$i,Gi[Qi++]=Yi,Yi=e;var r=Ji;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,$i=s+e}else Ji=1<<s|n<<i|r,$i=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Wi;)Wi=qi[--Hi],qi[Hi]=null,Ki=qi[--Hi],qi[Hi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=Ei(null),ys=null,ws=null,bs=null;function _s(){bs=ws=ys=null}function Ss(e){var t=vs.current;ki(vs),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){ys=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function ks(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===ys)throw Error(s(308));ws=e,ys.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var xs=null;function Ts(e){null===xs?xs=[e]:xs.push(e)}function Cs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ts(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Ps(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Ts(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function js(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ls(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ms(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=M({},h,d);break e;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Fs=(new r.Component).refs;function Vs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zs={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ds(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),js(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ds(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),js(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ds(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,r))&&(rc(t,e,r,n),js(t,e,r))}};function Bs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=ks(s):(i=Ri(t)?Ai:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Hs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zs.enqueueReplaceState(t,t.state,null)}function Ws(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Fs,Ps(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=ks(s):(s=Ri(t)?Ai:Ci.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Vs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zs.enqueueReplaceState(i,i.state,null),Ms(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ks(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Fs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Ks(e,t,n),r.return=e,r):((r=jc(n.type,n.key,n.props,null,e.mode,r)).ref=Ks(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=jc(t.type,t.key,t.props,null,e.mode,n)).ref=Ks(e,null,t),n.return=e,n;case S:return(t=Fc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Gs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||j(n))return null!==i?null:h(e,t,n,r,null);Gs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||j(r))return h(t,e=e.get(n)||null,r,i,null);Gs(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Xi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}function g(i,a,l,c){var u=j(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,c);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return is&&Xi(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===I){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Ks(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===I?((s=Lc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=jc(o.type,o.key,o.props,null,r.mode,l)).ref=Ks(r,s,o),l.return=r,r=l)}return a(r);case S:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(j(o))return g(r,s,o,l);Gs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Uc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Js=Ys(!0),$s=Ys(!1),Xs={},Zs=Ei(Xs),eo=Ei(Xs),to=Ei(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(xi(to,t),xi(eo,e),xi(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(Zs),xi(Zs,t)}function io(){ki(Zs),ki(eo),ki(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(xi(eo,e),xi(Zs,n))}function oo(e){eo.current===e&&(ki(Zs),ki(eo))}var ao=Ei(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,vo=null,yo=!1,wo=!1,bo=0,_o=0;function So(){throw Error(s(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,vo=go=null,t.updateQueue=null,ho.current=ca,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,vo=go=mo=null,yo=!1,t)throw Error(s(300));return e}function ko(){var e=0!==bo;return bo=0,e}function xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?mo.memoizedState=vo=e:vo=vo.next=e,vo}function To(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===vo?mo.memoizedState:vo.next;if(null!==t)vo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===vo?mo.memoizedState=vo=e:vo=vo.next=e}return vo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,mo.lanes|=h,Ml|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ro(e,t){var n=mo,r=To(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Ho(jo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,Fo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(s(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Mo(e)}function jo(e,t,n){return n((function(){Lo(t)&&Mo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Mo(e){var t=Ns(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=xo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function Fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=xo();mo.flags|=e,i.memoizedState=Fo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Io(r,o.deps))return void(i.memoizedState=Fo(t,n,s,r))}mo.flags|=e,i.memoizedState=Fo(1|t,n,s,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ho(e,t){return Bo(2048,8,e,t)}function Wo(e,t){return Bo(4,2,e,t)}function Ko(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function Yo(){}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Ml|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return To().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Cs(e,t,n,r))){rc(n,e,r,tc()),sa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ts(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Cs(e,t,i,r))&&(rc(n,e,r,i=tc()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var oa={readContext:ks,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},aa={readContext:ks,useCallback:function(e,t){return xo().memoizedState=[e,void 0===t?null:t],e},useContext:ks,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=xo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},xo().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return xo().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),xo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=xo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(jo.bind(null,r,o,e),[e]),r.flags|=2048,Fo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=xo(),t=Al.identifierPrefix;if(is){var n=$i;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:ks,useCallback:Jo,useContext:ks,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:$o,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(To(),go.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:ea,unstable_isNewReconciler:!1},ca={readContext:ks,useCallback:Jo,useContext:ks,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:$o,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ds(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Kl=r),da(0,t)},n}function ma(e,t,n){(n=Ds(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=xc.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ds(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?$s(t,null,n,r):Js(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return Es(t,i),r=Eo(e,t,n,r,s,i),n=ko(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ta(e,t,n,r,i)}function ka(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xi(Ol,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xi(Ol,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,xi(Ol,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,xi(Ol,Dl),Dl|=r;return _a(e,t,i,n),t.child}function xa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var s=Ri(n)?Ai:Ci.current;return s=Pi(t,s),Es(t,i),n=Eo(e,t,n,r,s,i),r=ko(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ca(e,t,n,r,i){if(Ri(n)){var s=!0;Li(t)}else s=!1;if(Es(t,i),null===t.stateNode)Ha(e,t),qs(t,n,r),Ws(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ks(c):c=Pi(t,c=Ri(n)?Ai:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Hs(t,o,r,c),As=!1;var d=t.memoizedState;o.state=d,Ms(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ni.current||As?("function"===typeof u&&(Vs(t,n,u,r),l=t.memoizedState),(a=As||Bs(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Rs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:gs(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=ks(l):l=Pi(t,l=Ri(n)?Ai:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Hs(t,o,r,l),As=!1,d=t.memoizedState,o.state=d,Ms(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||As?("function"===typeof f&&(Vs(t,n,f,r),p=t.memoizedState),(c=As||Bs(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){xa(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Wa(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Js(t,e.child,null,s),t.child=Js(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Pa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Ra,Da,Oa,ja,La={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),xi(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=La,e):Fa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Js(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=La,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ns(e,i),rc(r,e,i,-1))}return gc(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Qi++]=Ji,Gi[Qi++]=$i,Gi[Qi++]=Yi,Ji=e.id,$i=e.overflow,Yi=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&ps(r),Js(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function Ba(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xi(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Ri(t.type)&&Di(),Ga(t),null;case 3:return r=t.stateNode,io(),ki(Ni),ki(Ci),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Da(e,t),Ga(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<jr.length;i++)Fr(jr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":J(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<jr.length;i++)Fr(jr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Fr("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)ja(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ga(t),null;case 13:if(ki(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===jl&&(jl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return io(),Da(e,t),null===e&&Br(t.stateNode.containerInfo),Ga(t),null;case 10:return Ss(t.type._context),Ga(t),null;case 19:if(ki(ao),null===(o=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ka(o,!1);else{if(0!==jl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ka(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xi(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>ql&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ga(t),null}else 2*$e()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=ao.current,xi(ao,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),ki(Ni),ki(Ci),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(ki(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(ao),null;case 4:return io(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},ja=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ja=!1,$a=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){kc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:$a||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!$a&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){kc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?($a=(r=$a)||null!==n.memoizedState,fl(e,t,n),$a=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){kc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){kc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){kc(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){kc(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=$e())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||h,gl(t,e),$a=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(d);continue}}null!==p?(p.return=f,Za=p):Sl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){kc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){kc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ja;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Ja;var c=$a;if(Ja=o,($a=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?Il(i):null!==l?(l.return=o,Za=l):Il(i);for(;null!==s;)Za=s,bl(s,t,n),s=s.sibling;Za=i,Ja=a,$a=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_l(e)}}function _l(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$a)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}$a||512&t.flags&&sl(t)}catch(f){kc(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Sl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Il(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){kc(t,i,l)}}var s=t.return;try{sl(t)}catch(l){kc(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){kc(t,o,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var El,kl=Math.ceil,xl=b.ReactCurrentDispatcher,Tl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Nl=0,Al=null,Pl=null,Rl=0,Dl=0,Ol=Ei(0),jl=0,Ll=null,Ml=0,Ul=0,Fl=0,Vl=null,zl=null,Bl=0,ql=1/0,Hl=null,Wl=!1,Kl=null,Gl=null,Ql=!1,Yl=null,Jl=0,$l=0,Xl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Nl)?$e():-1!==Zl?Zl:Zl=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Rl?Rl&-Rl:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rc(e,t,n,r){if(50<$l)throw $l=0,Xl=null,Error(s(185));vt(e,n,r),0!==(2&Nl)&&e===Al||(e===Al&&(0===(2&Nl)&&(Ul|=n),4===jl&&lc(e,Rl)),ic(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(ql=$e()+500,Fi&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Al?Rl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Fi=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Nl)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Nl;Nl|=2;var o=mc();for(Al===e&&Rl===t||(Hl=null,ql=$e()+500,fc(e,t));;)try{wc();break}catch(l){pc(e,l)}_s(),xl.current=o,Nl=i,null!==Pl?t=0:(Al=null,Rl=0,t=jl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ll,fc(e,0),lc(e,r),ic(e,$e()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ll,fc(e,0),lc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sc(e,zl,Hl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Bl+500-$e())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sc.bind(null,e,zl,Hl),t);break}Sc(e,zl,Hl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ri(Sc.bind(null,e,zl,Hl),r);break}Sc(e,zl,Hl);break;default:throw Error(s(329))}}}return ic(e,$e()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=zl,zl=n,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function lc(e,t){for(t&=~Fl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nl))throw Error(s(327));Ic();var t=dt(e,0);if(0===(1&t))return ic(e,$e()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ll,fc(e,0),lc(e,t),ic(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,zl,Hl),ic(e,$e()),null}function uc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(ql=$e()+500,Fi&&Bi())}}function hc(e){null!==Yl&&0===Yl.tag&&0===(6&Nl)&&Ic();var t=Nl;Nl|=1;var n=Cl.transition,r=wt;try{if(Cl.transition=null,wt=1,e)return e()}finally{wt=r,Cl.transition=n,0===(6&(Nl=t))&&Bi()}}function dc(){Dl=Ol.current,ki(Ol)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),ki(Ni),ki(Ci),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:ki(ao);break;case 10:Ss(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Al=e,Pl=e=Oc(e.current,null),Rl=Dl=t,jl=0,Ll=null,Fl=Ul=Ml=0,zl=Vl=null,null!==xs){for(t=0;t<xs.length;t++)if(null!==(r=(n=xs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}xs=null}return e}function pc(e,t){for(;;){var n=Pl;try{if(_s(),ho.current=oa,yo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,vo=go=mo=null,wo=!1,bo=0,Tl.current=null,null===n||null===n.return){jl=1,Ll=t,Pl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(o,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==jl&&(jl=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,pa(0,c,t));break e;case 1:l=c;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Gl||!Gl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(b){t=b,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function mc(){var e=xl.current;return xl.current=oa,null===e?oa:e}function gc(){0!==jl&&3!==jl&&2!==jl||(jl=4),null===Al||0===(268435455&Ml)&&0===(268435455&Ul)||lc(Al,Rl)}function vc(e,t){var n=Nl;Nl|=2;var r=mc();for(Al===e&&Rl===t||(Hl=null,fc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(_s(),Nl=n,xl.current=r,null!==Pl)throw Error(s(261));return Al=null,Rl=0,jl}function yc(){for(;null!==Pl;)bc(Pl)}function wc(){for(;null!==Pl&&!Ye();)bc(Pl)}function bc(e){var t=El(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?_c(e):Pl=t,Tl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Dl)))return void(Pl=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return jl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===jl&&(jl=5)}function Sc(e,t,n){var r=wt,i=Cl.transition;try{Cl.transition=null,wt=1,function(e,t,n,r){do{Ic()}while(null!==Yl);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Al&&(Pl=Al=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Ac(tt,(function(){return Ic(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=wt;wt=1;var l=Nl;Nl|=4,Tl.current=null,function(e,t){if(ei=Ht,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){kc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nl,nl=!1}(e,n),vl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,wl(n,e,i),Je(),Nl=l,wt=a,Cl.transition=o}else e.current=n;if(Ql&&(Ql=!1,Yl=e,Jl=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Kl,Kl=null,e;0!==(1&Jl)&&0!==e.tag&&Ic(),o=e.pendingLanes,0!==(1&o)?e===Xl?$l++:($l=0,Xl=e):$l=0,Bi()}(e,t,n,r)}finally{Cl.transition=i,wt=r}return null}function Ic(){if(null!==Yl){var e=bt(Jl),t=Cl.transition,n=wt;try{if(Cl.transition=null,wt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Jl=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Za=y;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){kc(l,l.return,S)}if(l===a){Za=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Za=_;break e}Za=l.return}}if(Nl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{wt=n,Cl.transition=t}}return!1}function Ec(e,t,n){e=Os(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function kc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Os(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function xc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Rl&n)===n&&(4===jl||3===jl&&(130023424&Rl)===Rl&&500>$e()-Bl?fc(e,0):Fl|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ns(e,t))&&(vt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Pc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Dc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return Lc(n.children,i,o,t);case E:a=8,i|=8;break;case k:return(e=Rc(12,n,t,2|i)).elementType=k,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Rc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:a=10;break e;case T:a=9;break e;case C:a=11;break e;case P:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,s,o,a,l){return e=new Vc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ps(s),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return ji(e,n,t)}return t}function qc(e,t,n,r,i,s,o,a,l){return(e=zc(n,r,!0,e,0,s,0,a,l)).context=Bc(null),n=e.current,(s=Ds(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function Hc(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ds(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(rc(e,i,o,s),js(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:so(t);break;case 1:Ri(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;xi(vs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(xi(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(xi(ao,1&ao.current),null!==(e=Wa(e,t,n))?e.sibling:null);xi(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,ka(e,t,n)}return Wa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Es(t,n),i=Eo(null,t,r,e,i,n);var o=ko();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ps(t),i.updater=zs,t.stateNode=i,i._reactInternals=t,Ws(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Rs(e,t),Ms(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=$s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Wa(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),xa(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Js(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,xi(vs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ds(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Is(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Es(t,n),r=r(i=ks(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ia(e,t,r,i=gs(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ha(e,t),t.tag=1,Ri(r)?(e=!0,Li(t)):e=!1,Es(t,n),qs(t,r,i),Ws(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return ka(e,t,n)}throw Error(s(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Wc(o);a.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wc(o);s.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),hc((function(){Hc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(o)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Hc(null,e,null,null)})),t[pi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Mt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,$e()),0===(6&Nl)&&(ql=$e()+500,Bi()))}break;case 13:hc((function(){var t=Ns(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},St=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},It=function(e){if(13===e.tag){var t=nc(e),n=Ns(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},Et=function(){return wt},kt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));G(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uc,Ne=hc;var tu={usingClientEntryPoint:!1,Events:[wi,bi,_i,xe,Te,uc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(s(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},879:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=c(n(791)),o=c(n(7)),a=c(n(95)),l=n(930);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");n.autocompleteService=new window.google.maps.places.AutocompleteService,n.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,n.setState((function(e){return e.ready?null:{ready:!0}}))},n.autocompleteCallback=function(e,t){if(n.setState({loading:!1}),t===n.autocompleteOK){var r=n.props.highlightFirstSuggestion;n.setState({suggestions:e.map((function(e,t){return{id:e.id,description:e.description,placeId:e.place_id,active:!(!r||0!==t),index:t,formattedSuggestion:(n=e.structured_formatting,{mainText:n.main_text,secondaryText:n.secondary_text}),matchedSubstrings:e.matched_substrings,terms:e.terms,types:e.types};var n}))})}else n.props.onError(t,n.clearSuggestions)},n.fetchPredictions=function(){var e=n.props.value;e.length&&(n.setState({loading:!0}),n.autocompleteService.getPlacePredictions(r({},n.props.searchOptions,{input:e}),n.autocompleteCallback))},n.clearSuggestions=function(){n.setState({suggestions:[]})},n.clearActive=function(){n.setState({suggestions:n.state.suggestions.map((function(e){return r({},e,{active:!1})}))})},n.handleSelect=function(e,t,r){n.clearSuggestions(),n.props.onSelect?n.props.onSelect(e,t,r):n.props.onChange(e)},n.getActiveSuggestion=function(){return n.state.suggestions.find((function(e){return e.active}))},n.selectActiveAtIndex=function(e){var t=n.state.suggestions.find((function(t){return t.index===e})).description;n.setActiveAtIndex(e),n.props.onChange(t)},n.selectUserInputValue=function(){n.clearActive(),n.props.onChange(n.state.userInputValue)},n.handleEnterKey=function(){var e=n.getActiveSuggestion();void 0===e?n.handleSelect(n.props.value,null,null):n.handleSelect(e.description,e.placeId,e)},n.handleDownKey=function(){if(0!==n.state.suggestions.length){var e=n.getActiveSuggestion();void 0===e?n.selectActiveAtIndex(0):e.index===n.state.suggestions.length-1?n.selectUserInputValue():n.selectActiveAtIndex(e.index+1)}},n.handleUpKey=function(){if(0!==n.state.suggestions.length){var e=n.getActiveSuggestion();void 0===e?n.selectActiveAtIndex(n.state.suggestions.length-1):0===e.index?n.selectUserInputValue():n.selectActiveAtIndex(e.index-1)}},n.handleInputKeyDown=function(e){switch(e.key){case"Enter":e.preventDefault(),n.handleEnterKey();break;case"ArrowDown":e.preventDefault(),n.handleDownKey();break;case"ArrowUp":e.preventDefault(),n.handleUpKey();break;case"Escape":n.clearSuggestions()}},n.setActiveAtIndex=function(e){n.setState({suggestions:n.state.suggestions.map((function(t,n){return r({},t,n===e?{active:!0}:{active:!1})}))})},n.handleInputChange=function(e){var t=e.target.value;n.props.onChange(t),n.setState({userInputValue:t}),t?n.props.shouldFetchSuggestions&&n.debouncedFetchPredictions():n.clearSuggestions()},n.handleInputOnBlur=function(){n.mousedownOnSuggestion||n.clearSuggestions()},n.getActiveSuggestionId=function(){var e=n.getActiveSuggestion();return e?"PlacesAutocomplete__suggestion-"+e.placeId:void 0},n.getIsExpanded=function(){return n.state.suggestions.length>0},n.getInputProps=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(e.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var t={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":n.getIsExpanded(),"aria-activedescendant":n.getActiveSuggestionId(),disabled:!n.state.ready};return r({},t,e,{onKeyDown:(0,l.compose)(n.handleInputKeyDown,e.onKeyDown),onBlur:(0,l.compose)(n.handleInputOnBlur,e.onBlur),value:n.props.value,onChange:function(e){n.handleInputChange(e)}})},n.getSuggestionItemProps=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.handleSuggestionMouseEnter.bind(n,e.index),s=n.handleSuggestionClick.bind(n,e);return r({},t,{key:e.id,id:n.getActiveSuggestionId(),role:"option",onMouseEnter:(0,l.compose)(i,t.onMouseEnter),onMouseLeave:(0,l.compose)(n.handleSuggestionMouseLeave,t.onMouseLeave),onMouseDown:(0,l.compose)(n.handleSuggestionMouseDown,t.onMouseDown),onMouseUp:(0,l.compose)(n.handleSuggestionMouseUp,t.onMouseUp),onTouchStart:(0,l.compose)(n.handleSuggestionTouchStart,t.onTouchStart),onTouchEnd:(0,l.compose)(n.handleSuggestionMouseUp,t.onTouchEnd),onClick:(0,l.compose)(s,t.onClick)})},n.handleSuggestionMouseEnter=function(e){n.setActiveAtIndex(e)},n.handleSuggestionMouseLeave=function(){n.mousedownOnSuggestion=!1,n.clearActive()},n.handleSuggestionMouseDown=function(e){e.preventDefault(),n.mousedownOnSuggestion=!0},n.handleSuggestionTouchStart=function(){n.mousedownOnSuggestion=!0},n.handleSuggestionMouseUp=function(){n.mousedownOnSuggestion=!1},n.handleSuggestionClick=function(e,t){t&&t.preventDefault&&t.preventDefault();var r=e.description,i=e.placeId;n.handleSelect(r,i,e),setTimeout((function(){n.mousedownOnSuggestion=!1}))},n.state={loading:!1,suggestions:[],userInputValue:e.value,ready:!e.googleCallbackName},n.debouncedFetchPredictions=(0,a.default)(n.fetchPredictions,e.debounce),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.props.googleCallbackName;e?window.google&&window.google.maps&&window.google.maps.places?this.init():window[e]=this.init:this.init()}},{key:"componentWillUnmount",value:function(){var e=this.props.googleCallbackName;e&&window[e]&&delete window[e]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),t}(s.default.Component);u.propTypes={onChange:o.default.func.isRequired,value:o.default.string.isRequired,children:o.default.func.isRequired,onError:o.default.func,onSelect:o.default.func,searchOptions:o.default.shape({bounds:o.default.object,componentRestrictions:o.default.object,location:o.default.object,offset:o.default.oneOfType([o.default.number,o.default.string]),radius:o.default.oneOfType([o.default.number,o.default.string]),types:o.default.array}),debounce:o.default.number,highlightFirstSuggestion:o.default.bool,shouldFetchSuggestions:o.default.bool,googleCallbackName:o.default.string},u.defaultProps={onError:function(e,t){return console.error("[react-places-autocomplete]: error happened when fetching data from Google Maps API.\nPlease check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)\nStatus: ",e)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0},t.default=u},930:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.compose=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e&&e.apply(void 0,n)}))}},t.pick=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e&&e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}},382:(e,t,n)=>{"use strict";var r,i=n(879),s=(r=i)&&r.__esModule?r:{default:r},o=n(496);o.geocodeByAddress,o.geocodeByPlaceId,o.getLatLng,t.ZP=s.default},496:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.geocodeByAddress=function(e){var t=new window.google.maps.Geocoder,n=window.google.maps.GeocoderStatus.OK;return new Promise((function(r,i){t.geocode({address:e},(function(e,t){t!==n&&i(t),r(e)}))}))},t.getLatLng=function(e){return new Promise((function(t,n){try{t({lat:e.geometry.location.lat(),lng:e.geometry.location.lng()})}catch(r){n(r)}}))},t.geocodeByPlaceId=function(e){var t=new window.google.maps.Geocoder,n=window.google.maps.GeocoderStatus.OK;return new Promise((function(r,i){t.geocode({placeId:e},(function(e,t){t!==n&&i(t),r(e)}))}))}},374:(e,t,n)=>{"use strict";var r=n(791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.jsx=c,t.jsxs=c},117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,S=Object.prototype.hasOwnProperty,I={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:I.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(x(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+C(a=e[c],c);l+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=s+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:I};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,D(S);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(x),x=-1),p=!0;var s=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,E=!1,k=null,x=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==k){var e=t.unstable_now();C=e;var n=!0;try{n=k(!0,e)}finally{n?I():(E=!1,k=null)}}else E=!1}if("function"===typeof w)I=function(){w(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,I=function(){R.postMessage(null)}}else I=function(){v(A,0)};function D(e){k=e,E||(E=!0,I())}function O(e,n){x=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(x),x=-1):g=!0,O(_,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,D(S))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)},561:(e,t,n)=>{"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useState,o=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return a((function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})}),[e,n,t]),o((function(){return c(i)&&u({inst:i}),e((function(){c(i)&&u({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},248:(e,t,n)=>{"use strict";e.exports=n(561)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{SWRConfig:()=>dn,default:()=>fn,mutate:()=>Xt,preload:()=>an,unstable_serialize:()=>cn,useSWRConfig:()=>on});var t={};n.r(t),n.d(t,{FirebaseError:()=>zr,SDK_VERSION:()=>Wi,_DEFAULT_ENTRY_NAME:()=>Di,_addComponent:()=>Mi,_addOrOverwriteComponent:()=>Ui,_apps:()=>ji,_clearComponents:()=>Bi,_components:()=>Li,_getProvider:()=>Vi,_registerComponent:()=>Fi,_removeServiceInstance:()=>zi,deleteApp:()=>Yi,getApp:()=>Gi,getApps:()=>Qi,initializeApp:()=>Ki,onLog:()=>$i,registerVersion:()=>Ji,setLogLevel:()=>Xi});var r,i=n(791),s=n.t(i,2),o=n(164),a=n.t(o,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,t,n,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,h=r.Pop,m=null,g=v();function v(){return(a.state||{idx:null}).idx}function y(){h=r.Pop;let e=v(),t=null==e?null:e-g;g=e,m&&m({action:h,location:b.location,delta:t})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(l({},a.state,{idx:g}),""));let b={get action(){return h},get location(){return e(s,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(c,y),m=e,()=>{s.removeEventListener(c,y),m=null}},createHref:e=>t(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){h=r.Push;let i=f(b.location,e,t);n&&n(i,e),g=v()+1;let l=d(i,g),c=b.createHref(i);try{a.pushState(l,"",c)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(c)}o&&m&&m({action:h,location:b.location,delta:1})},replace:function(e,t){h=r.Replace;let i=f(b.location,e,t);n&&n(i,e),g=v();let s=d(i,g),l=b.createHref(i);a.replaceState(s,"",l),o&&m&&m({action:h,location:b.location,delta:0})},go:e=>a.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){void 0===n&&(n="/");let r=R(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o)s=N(i[o],P(r));return s}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(u(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=M([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),w(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:C(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=b(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:\w+$/,S=3,I=2,E=1,k=10,x=-2,T=e=>"*"===e;function C(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=x),t&&(r+=I),n.filter((e=>!T(e))).reduce(((e,t)=>e+(_.test(t)?S:""===t?E:k)),r)}function N(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:M([i,c.pathname]),pathnameBase:U(M([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=M([i,c.pathnameBase]))}return s}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return h(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l||"",r),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function P(e){try{return decodeURI(e)}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function j(e){return O(e).map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase))}function L(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else if(r){let e=t[t.length-1].replace(/^\//,"").split("/");if(a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e.pop();i.pathname=t.join("/")}s="/"+e.join("/")}else{let e=t.length-1;if(a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:F(r),hash:V(i)}}(i,s),h=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const M=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],q=(new Set(B),["get",...B]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}const W=i.createContext(null);const K=i.createContext(null);const G=i.createContext(null);const Q=i.createContext(null);const Y=i.createContext({outlet:null,matches:[],isDataRoute:!1});const J=i.createContext(null);function $(){return null!=i.useContext(Q)}function X(){return $()||u(!1),i.useContext(Q).location}function Z(e){i.useContext(G).static||i.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=i.useContext(Y);return e?function(){let{router:e}=he(ce.UseNavigateStable),t=fe(ue.UseNavigateStable),n=i.useRef(!1);Z((()=>{n.current=!0}));let r=i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,H({fromRouteId:t},i)))}),[e,t]);return r}():function(){$()||u(!1);let e=i.useContext(W),{basename:t,navigator:n}=i.useContext(G),{matches:r}=i.useContext(Y),{pathname:s}=X(),o=JSON.stringify(j(r)),a=i.useRef(!1);return Z((()=>{a.current=!0})),i.useCallback((function(r,i){if(void 0===i&&(i={}),!a.current)return;if("number"===typeof r)return void n.go(r);let l=L(r,JSON.parse(o),s,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:M([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)}),[t,n,o,s,e])}()}function te(){let{matches:e}=i.useContext(Y),t=e[e.length-1];return t?t.params:{}}function ne(e,t){let{relative:n}=void 0===t?{}:t,{matches:r}=i.useContext(Y),{pathname:s}=X(),o=JSON.stringify(j(r));return i.useMemo((()=>L(e,JSON.parse(o),s,"path"===n)),[e,o,s,n])}function re(e,t,n){$()||u(!1);let{navigator:s}=i.useContext(G),{matches:o}=i.useContext(Y),a=o[o.length-1],l=a?a.params:{},c=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let h,d=X();if(t){var f;let e="string"===typeof t?m(t):t;"/"===c||(null==(f=e.pathname)?void 0:f.startsWith(c))||u(!1),h=e}else h=d;let p=h.pathname||"/",g=y(e,{pathname:"/"===c?p:p.slice(c.length)||"/"});let v=le(g&&g.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:M([c,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:M([c,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,n);return t&&v?i.createElement(Q.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},v):v}function ie(){let e=function(){var e;let t=i.useContext(J),n=de(ue.UseRouteError),r=fe(ue.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const se=i.createElement(ie,null);class oe extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?i.createElement(Y.Provider,{value:this.props.routeContext},i.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(W);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(Y.Provider,{value:t},r)}function le(e,t,n){var r;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var s;if(null==(s=n)||!s.errors)return null;e=n.matches}let o=e,a=null==(r=n)?void 0:r.errors;if(null!=a){let e=o.findIndex((e=>e.route.id&&(null==a?void 0:a[e.route.id])));e>=0||u(!1),o=o.slice(0,Math.min(o.length,e+1))}return o.reduceRight(((e,r,s)=>{let l=r.route.id?null==a?void 0:a[r.route.id]:null,c=null;n&&(c=r.route.errorElement||se);let u=t.concat(o.slice(0,s+1)),h=()=>{let t;return t=l?c:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(ae,{match:r,routeContext:{outlet:e,matches:u,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(oe,{location:n.location,revalidation:n.revalidation,component:c,error:l,children:h(),routeContext:{outlet:null,matches:u,isDataRoute:!0}}):h()}),null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function he(e){let t=i.useContext(W);return t||u(!1),t}function de(e){let t=i.useContext(K);return t||u(!1),t}function fe(e){let t=function(e){let t=i.useContext(Y);return t||u(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}s.startTransition;function pe(e){let{to:t,replace:n,state:r,relative:s}=e;$()||u(!1);let{matches:o}=i.useContext(Y),{pathname:a}=X(),l=ee(),c=L(t,j(o),a,"path"===s),h=JSON.stringify(c);return i.useEffect((()=>l(JSON.parse(h),{replace:n,state:r,relative:s})),[l,h,s,n,r]),null}function me(e){u(!1)}function ge(e){let{basename:t="/",children:n=null,location:s,navigationType:o=r.Pop,navigator:a,static:l=!1}=e;$()&&u(!1);let c=t.replace(/^\/*/,"/"),h=i.useMemo((()=>({basename:c,navigator:a,static:l})),[c,a,l]);"string"===typeof s&&(s=m(s));let{pathname:d="/",search:f="",hash:p="",state:g=null,key:v="default"}=s,y=i.useMemo((()=>{let e=R(d,c);return null==e?null:{location:{pathname:e,search:f,hash:p,state:g,key:v},navigationType:o}}),[c,d,f,p,g,v,o]);return null==y?null:i.createElement(G.Provider,{value:h},i.createElement(Q.Provider,{children:n,value:y}))}function ve(e){let{children:t,location:n}=e;return re(ye(t),n)}new Promise((()=>{}));i.Component;function ye(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,ye(e.props.children,s));e.type!==me&&u(!1),e.props.index&&e.props.children&&u(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ye(e.props.children,s)),n.push(o)})),n}function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}function be(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const _e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;const Se=s.startTransition;a.flushSync;function Ie(e){let{basename:t,children:n,future:r,window:s}=e,o=i.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,a)));let l=o.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},d=i.useCallback((e=>{h&&Se?Se((()=>u(e))):u(e)}),[u,h]);return i.useLayoutEffect((()=>l.listen(d)),[l,d]),i.createElement(ge,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l})}const Ee="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ke=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xe=i.forwardRef((function(e,t){let n,{onClick:r,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:h,preventScrollReset:d,unstable_viewTransition:f}=e,m=be(e,_e),{basename:g}=i.useContext(G),v=!1;if("string"===typeof h&&ke.test(h)&&(n=h,Ee))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=R(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(b){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;$()||u(!1);let{basename:r,navigator:s}=i.useContext(G),{hash:o,pathname:a,search:l}=ne(e,{relative:n}),c=a;return"/"!==r&&(c="/"===a?r:M([r,a])),s.createHref({pathname:c,search:l,hash:o})}(h,{relative:s}),w=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,c=ee(),u=X(),h=ne(e,{relative:a});return i.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:p(u)===p(h);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[u,c,h,r,s,n,e,o,a,l])}(h,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,unstable_viewTransition:f});return i.createElement("a",we({},m,{href:n||y,onClick:v||o?r:function(e){r&&r(e),e.defaultPrevented||w(e)},ref:t,target:c}))}));var Te,Ce;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Te||(Te={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ce||(Ce={}));n(720);var Ne=e=>"undefined"!==typeof atob&&"function"===typeof atob?atob(e):"undefined"!==typeof global&&global.Buffer?new global.Buffer(e,"base64").toString():e,Ae="pk_live_",Pe="pk_test_";function Re(e){if(!De(e=e||""))return null;const t=e.startsWith(Ae)?"production":"development";let n=Ne(e.split("_")[2]);return n.endsWith("$")?(n=n.slice(0,-1),{instanceType:t,frontendApi:n}):null}function De(e){const t=(e=e||"").startsWith(Ae)||e.startsWith(Pe),n=Ne(e.split("_")[2]||"").endsWith("$");return t&&n}var Oe=Object.defineProperty,je=Object.getOwnPropertyDescriptor,Le=Object.getOwnPropertyNames,Me=Object.prototype.hasOwnProperty,Ue=(e,t,n,r)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let i of Le(t))Me.call(e,i)||i===n||Oe(e,i,{get:()=>t[i],enumerable:!(r=je(t,i))||r.enumerable});return e},Fe=new Set,Ve=(e,t,n)=>{const r=(()=>{try{return!1}catch(e){}return!1})()||(()=>{try{return!0}catch(e){}return!1})(),i=null!==n&&void 0!==n?n:e;Fe.has(i)||r||(Fe.add(i),console.warn('Clerk - DEPRECATION WARNING: "'.concat(e,'" is deprecated and will be removed in the next major release.\n').concat(t)))};new Proxy({Expired:"expired",Failed:"failed"},{get:(e,t,n)=>(Ve("MagicLinkErrorCode","Use `EmailLinkErrorCode` instead."),Reflect.get(e,t,n))});var ze=Object.freeze({InvalidFrontendApiErrorMessage:"The frontendApi passed to Clerk is invalid. You can get your Frontend API key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys."});const Be="Clerk: Unsupported usage of domain or proxyUrl. The usage of domain or proxyUrl as function is not supported in non-browser environments.",qe=function(e){let{packageName:t,customMessages:n}=e,r=t;const i={...ze,...n};function s(e,t){if(!t)return"".concat(r,": ").concat(e);let n=e;const i=e.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const r of i){const e=(t[r[1]]||"").toString();n=n.replace("{{".concat(r[1],"}}"),e)}return"".concat(r,": ").concat(n)}return{setPackageName(e){let{packageName:t}=e;return"string"===typeof t&&(r=t),this},setMessages(e){let{customMessages:t}=e;return Object.assign(i,t||{}),this},throwInvalidPublishableKeyError(e){throw new Error(s(i.InvalidPublishableKeyErrorMessage,e))},throwInvalidFrontendApiError(e){throw new Error(s(i.InvalidFrontendApiErrorMessage,e))},throwInvalidProxyUrl(e){throw new Error(s(i.InvalidProxyUrlErrorMessage,e))},throwMissingPublishableKeyError(){throw new Error(s(i.MissingPublishableKeyErrorMessage))}}}({packageName:"@clerk/react"});const He=new Map;var We=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ke=(e,t,n)=>(We(e,t,"read from private field"),n?n.call(e):t.get(e)),Ge=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Qe=(e,t,n,r)=>(We(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);function Ye(){return"undefined"!==typeof window}new RegExp(["bot","spider","crawl","APIs-Google","AdsBot","Googlebot","mediapartners","Google Favicon","FeedFetcher","Google-Read-Aloud","DuplexWeb-Google","googleweblight","bing","yandex","baidu","duckduck","yahoo","ecosia","ia_archiver","facebook","instagram","pinterest","reddit","slack","twitter","whatsapp","youtube","semrush"].join("|"),"i");function Je(e,t,n){return"function"===typeof e?e(t):"undefined"!==typeof e?e:"undefined"!==typeof n?n:void 0}function $e(e){return e.startsWith("/")}const{isDevOrStagingUrl:Xe}=function(){const e=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],t=new Map;return{isDevOrStagingUrl:n=>{if(!n)return!1;const r="string"===typeof n?n:n.hostname;let i=t.get(r);return void 0===i&&(i=e.some((e=>r.endsWith(e))),t.set(r,i)),i}}}(),Ze=e=>{var t;return null===(t=e.match(/-(.*)\./))||void 0===t?void 0:t[1]},et=e=>e.split(".")[0],tt=e=>{const{frontendApi:t,publishableKey:n}=e;return n||t||qe.throwMissingPublishableKeyError(),async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;const{async:n,defer:r,beforeLoad:i,crossOrigin:s}=t||{};return new Promise(((t,o)=>{e||o("loadScript cannot be called without a src"),document&&document.body||o("loadScript cannot be called when document does not exist");const a=document.createElement("script");s&&a.setAttribute("crossorigin",s),a.async=n||!1,a.defer=r||!1,a.addEventListener("load",(()=>{a.remove(),t(a)})),a.addEventListener("error",(()=>{a.remove(),o()})),a.src=e,null===i||void 0===i||i(a),document.body.appendChild(a)}))}(nt(e),{async:!0,crossOrigin:"anonymous",beforeLoad:rt(e)}).catch((()=>{throw new Error("Clerk: Failed to load Clerk")}))},nt=e=>{var t;const{clerkJSUrl:n,clerkJSVariant:r,clerkJSVersion:i,proxyUrl:s,domain:o,publishableKey:a,frontendApi:l}=e;if(n)return n;let c="";if(s&&(!(d=s)||function(e){return/^http(s)?:\/\//.test(e||"")}(d)||$e(d)))c=(h=s,h?$e(h)?new URL(h,window.location.origin).toString():h:"").replace(/http(s)?:\/\//,"");else if(o&&!Xe((null===(t=Re(a))||void 0===t?void 0:t.frontendApi)||l||""))c=function(e){if(!e)return"";let t;if(e.match(/^(clerk\.)+\w*$/))t=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;t=/^(clerk\.)*/gi}const n=e.replace(t,"");return"clerk.".concat(n)}(o);else{var u;c=(null===(u=Re(a))||void 0===u?void 0:u.frontendApi)||l||""}var h,d;const f=r?"".concat(r.replace(/\.+$/,""),"."):"",p=(e=>{if(e)return e;const t=Ze("4.28.1");return t?"snapshot"===t?"4.65.3":t:et("4.28.1")})(i);return"https://".concat(c,"/npm/@clerk/clerk-js@").concat(p,"/dist/clerk.").concat(f,"browser.js")},rt=e=>t=>{const{publishableKey:n,frontendApi:r,proxyUrl:i,domain:s}=e;n?t.setAttribute("data-clerk-publishable-key",n):r&&t.setAttribute("data-clerk-frontend-api",r),i&&t.setAttribute("data-clerk-proxy-url",i),s&&t.setAttribute("data-clerk-domain",s)};var it,st,ot,at;const lt=class e{constructor(e){var t=this;this.clerkjs=null,this.preopenSignIn=null,this.preopenSignUp=null,this.preopenUserProfile=null,this.preopenOrganizationProfile=null,this.preopenCreateOrganization=null,this.premountSignInNodes=new Map,this.premountSignUpNodes=new Map,this.premountUserProfileNodes=new Map,this.premountUserButtonNodes=new Map,this.premountOrganizationProfileNodes=new Map,this.premountCreateOrganizationNodes=new Map,this.premountOrganizationSwitcherNodes=new Map,this.premountOrganizationListNodes=new Map,this.premountMethodCalls=new Map,this.loadedListeners=[],Ge(this,it,!1),Ge(this,st,void 0),Ge(this,ot,void 0),this.addOnLoaded=e=>{this.loadedListeners.push(e)},this.emitLoaded=()=>{this.loadedListeners.forEach((e=>e())),this.loadedListeners=[]},this.hydrateClerkJS=e=>{if(!e)throw new Error("Failed to hydrate latest Clerk JS");return this.clerkjs=e,this.premountMethodCalls.forEach((e=>e())),null!==this.preopenSignIn&&e.openSignIn(this.preopenSignIn),null!==this.preopenSignUp&&e.openSignUp(this.preopenSignUp),null!==this.preopenUserProfile&&e.openUserProfile(this.preopenUserProfile),null!==this.preopenOrganizationProfile&&e.openOrganizationProfile(this.preopenOrganizationProfile),null!==this.preopenCreateOrganization&&e.openCreateOrganization(this.preopenCreateOrganization),this.premountSignInNodes.forEach(((t,n)=>{e.mountSignIn(n,t)})),this.premountSignUpNodes.forEach(((t,n)=>{e.mountSignUp(n,t)})),this.premountUserProfileNodes.forEach(((t,n)=>{e.mountUserProfile(n,t)})),this.premountUserButtonNodes.forEach(((t,n)=>{e.mountUserButton(n,t)})),this.premountOrganizationListNodes.forEach(((t,n)=>{e.mountOrganizationList(n,t)})),Qe(this,it,!0),this.emitLoaded(),this.clerkjs},this.__unstable__updateProps=e=>{this.clerkjs&&"__unstable__updateProps"in this.clerkjs&&this.clerkjs.__unstable__updateProps(e)},this.setActive=e=>{let{session:t,organization:n,beforeEmit:r}=e;return this.clerkjs?this.clerkjs.setActive({session:t,organization:n,beforeEmit:r}):Promise.reject()},this.setSession=(e,t)=>(Ve("setSession","Use `Clerk.setActive` instead"),this.setActive({session:e,beforeEmit:t})),this.openSignIn=e=>{this.clerkjs&&Ke(this,it)?this.clerkjs.openSignIn(e):this.preopenSignIn=e},this.closeSignIn=()=>{this.clerkjs&&Ke(this,it)?this.clerkjs.closeSignIn():this.preopenSignIn=null},this.openUserProfile=e=>{this.clerkjs&&Ke(this,it)?this.clerkjs.openUserProfile(e):this.preopenUserProfile=e},this.closeUserProfile=()=>{this.clerkjs&&Ke(this,it)?this.clerkjs.closeUserProfile():this.preopenUserProfile=null},this.openOrganizationProfile=e=>{this.clerkjs&&Ke(this,it)?this.clerkjs.openOrganizationProfile(e):this.preopenOrganizationProfile=e},this.closeOrganizationProfile=()=>{this.clerkjs&&Ke(this,it)?this.clerkjs.closeOrganizationProfile():this.preopenOrganizationProfile=null},this.openCreateOrganization=e=>{this.clerkjs&&Ke(this,it)?this.clerkjs.openCreateOrganization(e):this.preopenCreateOrganization=e},this.closeCreateOrganization=()=>{this.clerkjs&&Ke(this,it)?this.clerkjs.closeCreateOrganization():this.preopenCreateOrganization=null},this.openSignUp=e=>{this.clerkjs&&Ke(this,it)?this.clerkjs.openSignUp(e):this.preopenSignUp=e},this.closeSignUp=()=>{this.clerkjs&&Ke(this,it)?this.clerkjs.closeSignUp():this.preopenSignUp=null},this.mountSignIn=(e,t)=>{this.clerkjs&&Ke(this,it)?this.clerkjs.mountSignIn(e,t):this.premountSignInNodes.set(e,t)},this.unmountSignIn=e=>{this.clerkjs&&Ke(this,it)?this.clerkjs.unmountSignIn(e):this.premountSignInNodes.delete(e)},this.mountSignUp=(e,t)=>{this.clerkjs&&Ke(this,it)?this.clerkjs.mountSignUp(e,t):this.premountSignUpNodes.set(e,t)},this.unmountSignUp=e=>{this.clerkjs&&Ke(this,it)?this.clerkjs.unmountSignUp(e):this.premountSignUpNodes.delete(e)},this.mountUserProfile=(e,t)=>{this.clerkjs&&Ke(this,it)?this.clerkjs.mountUserProfile(e,t):this.premountUserProfileNodes.set(e,t)},this.unmountUserProfile=e=>{this.clerkjs&&Ke(this,it)?this.clerkjs.unmountUserProfile(e):this.premountUserProfileNodes.delete(e)},this.mountOrganizationProfile=(e,t)=>{this.clerkjs&&Ke(this,it)?this.clerkjs.mountOrganizationProfile(e,t):this.premountOrganizationProfileNodes.set(e,t)},this.unmountOrganizationProfile=e=>{this.clerkjs&&Ke(this,it)?this.clerkjs.unmountOrganizationProfile(e):this.premountOrganizationProfileNodes.delete(e)},this.mountCreateOrganization=(e,t)=>{this.clerkjs&&Ke(this,it)?this.clerkjs.mountCreateOrganization(e,t):this.premountCreateOrganizationNodes.set(e,t)},this.unmountCreateOrganization=e=>{this.clerkjs&&Ke(this,it)?this.clerkjs.unmountCreateOrganization(e):this.premountCreateOrganizationNodes.delete(e)},this.mountOrganizationSwitcher=(e,t)=>{this.clerkjs&&Ke(this,it)?this.clerkjs.mountOrganizationSwitcher(e,t):this.premountOrganizationSwitcherNodes.set(e,t)},this.unmountOrganizationSwitcher=e=>{this.clerkjs&&Ke(this,it)?this.clerkjs.unmountOrganizationSwitcher(e):this.premountOrganizationSwitcherNodes.delete(e)},this.mountOrganizationList=(e,t)=>{this.clerkjs&&Ke(this,it)?this.clerkjs.mountOrganizationList(e,t):this.premountOrganizationListNodes.set(e,t)},this.unmountOrganizationList=e=>{this.clerkjs&&Ke(this,it)?this.clerkjs.unmountOrganizationList(e):this.premountOrganizationListNodes.delete(e)},this.mountUserButton=(e,t)=>{this.clerkjs&&Ke(this,it)?this.clerkjs.mountUserButton(e,t):this.premountUserButtonNodes.set(e,t)},this.unmountUserButton=e=>{this.clerkjs&&Ke(this,it)?this.clerkjs.unmountUserButton(e):this.premountUserButtonNodes.delete(e)},this.addListener=e=>{const t=()=>{var t;return null===(t=this.clerkjs)||void 0===t?void 0:t.addListener(e)};return this.clerkjs?t():(this.premountMethodCalls.set("addListener",t),()=>this.premountMethodCalls.delete("addListener"))},this.navigate=e=>{const t=()=>{var t;return null===(t=this.clerkjs)||void 0===t?void 0:t.navigate(e)};this.clerkjs&&Ke(this,it)?t():this.premountMethodCalls.set("navigate",t)},this.redirectWithAuth=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=()=>{var e;return null===(e=t.clerkjs)||void 0===e?void 0:e.redirectWithAuth(...n)};t.clerkjs&&Ke(t,it)?i():t.premountMethodCalls.set("redirectWithAuth",i)},this.redirectToSignIn=e=>{const t=()=>{var t;return null===(t=this.clerkjs)||void 0===t?void 0:t.redirectToSignIn(e)};this.clerkjs&&Ke(this,it)?t():this.premountMethodCalls.set("redirectToSignIn",t)},this.redirectToSignUp=e=>{const t=()=>{var t;return null===(t=this.clerkjs)||void 0===t?void 0:t.redirectToSignUp(e)};this.clerkjs&&Ke(this,it)?t():this.premountMethodCalls.set("redirectToSignUp",t)},this.redirectToUserProfile=()=>{const e=()=>{var e;return null===(e=this.clerkjs)||void 0===e?void 0:e.redirectToUserProfile()};this.clerkjs&&Ke(this,it)?e():this.premountMethodCalls.set("redirectToUserProfile",e)},this.redirectToHome=()=>{const e=()=>{var e;return null===(e=this.clerkjs)||void 0===e?void 0:e.redirectToHome()};this.clerkjs&&Ke(this,it)?e():this.premountMethodCalls.set("redirectToHome",e)},this.redirectToOrganizationProfile=()=>{const e=()=>{var e;return null===(e=this.clerkjs)||void 0===e?void 0:e.redirectToOrganizationProfile()};this.clerkjs&&Ke(this,it)?e():this.premountMethodCalls.set("redirectToOrganizationProfile",e)},this.redirectToCreateOrganization=()=>{const e=()=>{var e;return null===(e=this.clerkjs)||void 0===e?void 0:e.redirectToCreateOrganization()};this.clerkjs&&Ke(this,it)?e():this.premountMethodCalls.set("redirectToCreateOrganization",e)},this.handleRedirectCallback=e=>{const t=()=>{var t;return null===(t=this.clerkjs)||void 0===t?void 0:t.handleRedirectCallback(e)};var n;this.clerkjs&&Ke(this,it)?null===(n=t())||void 0===n||n.catch((()=>{})):this.premountMethodCalls.set("handleRedirectCallback",t)},this.handleMagicLinkVerification=async e=>{Ve("handleMagicLinkVerification","Use `handleEmailLinkVerification` instead.");const t=()=>{var t;return null===(t=this.clerkjs)||void 0===t?void 0:t.handleMagicLinkVerification(e)};if(this.clerkjs&&Ke(this,it))return t();this.premountMethodCalls.set("handleMagicLinkVerification",t)},this.handleEmailLinkVerification=async e=>{const t=()=>{var t;return null===(t=this.clerkjs)||void 0===t?void 0:t.handleEmailLinkVerification(e)};if(this.clerkjs&&Ke(this,it))return t();this.premountMethodCalls.set("handleEmailLinkVerification",t)},this.authenticateWithMetamask=async e=>{const t=()=>{var t;return null===(t=this.clerkjs)||void 0===t?void 0:t.authenticateWithMetamask(e)};if(this.clerkjs&&Ke(this,it))return t();this.premountMethodCalls.set("authenticateWithMetamask",t)},this.createOrganization=async e=>{const t=()=>{var t;return null===(t=this.clerkjs)||void 0===t?void 0:t.createOrganization(e)};if(this.clerkjs&&Ke(this,it))return t();this.premountMethodCalls.set("createOrganization",t)},this.getOrganizationMemberships=async()=>{const e=()=>{var e;return null===(e=this.clerkjs)||void 0===e?void 0:e.getOrganizationMemberships()};if(this.clerkjs&&Ke(this,it))return e();this.premountMethodCalls.set("getOrganizationMemberships",e)},this.getOrganization=async e=>{const t=()=>{var t;return null===(t=this.clerkjs)||void 0===t?void 0:t.getOrganization(e)};if(this.clerkjs&&Ke(this,it))return t();this.premountMethodCalls.set("getOrganization",t)},this.signOut=async(e,t)=>{const n=()=>{var n;return null===(n=this.clerkjs)||void 0===n?void 0:n.signOut(e,t)};if(this.clerkjs&&Ke(this,it))return n();this.premountMethodCalls.set("signOut",n)};const{Clerk:n=null,frontendApi:r,publishableKey:i}=e||{};this.frontendApi=r,this.publishableKey=i,Qe(this,ot,null===e||void 0===e?void 0:e.proxyUrl),Qe(this,st,null===e||void 0===e?void 0:e.domain),this.options=e,this.Clerk=n,this.mode=Ye()?"browser":"server",this.loadClerkJS()}get loaded(){return Ke(this,it)}static getOrCreateInstance(t){return(!Ye()||!Ke(this,at)||t.Clerk&&Ke(this,at).Clerk!==t.Clerk)&&Qe(this,at,new e(t)),Ke(this,at)}get domain(){if("undefined"!==typeof window&&window.location)return Je(Ke(this,st),new URL(window.location.href),"");if("function"===typeof Ke(this,st))throw new Error(Be);return Ke(this,st)||""}get proxyUrl(){if("undefined"!==typeof window&&window.location)return Je(Ke(this,ot),new URL(window.location.href),"");if("function"===typeof Ke(this,ot))throw new Error(Be);return Ke(this,ot)||""}async loadClerkJS(){if("browser"===this.mode&&!Ke(this,it)){"undefined"!==typeof window&&(window.__clerk_frontend_api=this.frontendApi,window.__clerk_publishable_key=this.publishableKey,window.__clerk_proxy_url=this.proxyUrl,window.__clerk_domain=this.domain);try{var e,t,r;if(this.Clerk){let e;"function"===typeof this.Clerk?(e=new this.Clerk(this.publishableKey||this.frontendApi||"",{proxyUrl:this.proxyUrl,domain:this.domain}),await e.load(this.options)):(e=this.Clerk,e.isReady()||await e.load(this.options)),n.g.Clerk=e}else{if(n.g.Clerk||await tt({...this.options,frontendApi:this.frontendApi,publishableKey:this.publishableKey,proxyUrl:this.proxyUrl,domain:this.domain}),!n.g.Clerk)throw new Error("Failed to download latest ClerkJS. Contact support@clerk.com.");await n.g.Clerk.load(this.options)}return n.g.Clerk.sdkMetadata=null!==(e=this.options.sdkMetadata)&&void 0!==e?e:{name:"@clerk/clerk-react",version:"4.28.1"},null!==(t=n.g.Clerk)&&void 0!==t&&t.loaded||null!==(r=n.g.Clerk)&&void 0!==r&&r.isReady()?this.hydrateClerkJS(n.g.Clerk):void 0}catch(i){const e=i;return void console.error(e.stack||e.message||e)}}}get version(){var e;return null===(e=this.clerkjs)||void 0===e?void 0:e.version}get client(){return this.clerkjs?this.clerkjs.client:void 0}get session(){return this.clerkjs?this.clerkjs.session:void 0}get user(){return this.clerkjs?this.clerkjs.user:void 0}get organization(){return this.clerkjs?this.clerkjs.organization:void 0}get __unstable__environment(){return this.clerkjs?this.clerkjs.__unstable__environment:void 0}__unstable__setEnvironment(){if(this.clerkjs&&"__unstable__setEnvironment"in this.clerkjs){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.clerkjs.__unstable__setEnvironment(t)}}};it=new WeakMap,st=new WeakMap,ot=new WeakMap,at=new WeakMap,Ge(lt,at,void 0);let ct=lt;const ut=(e,t,n)=>!e&&n?ht(n):dt(t),ht=e=>({userId:e.userId,user:e.user,sessionId:e.sessionId,session:e.session,organization:e.organization,orgId:e.orgId,orgRole:e.orgRole,orgSlug:e.orgSlug,actor:e.actor,lastOrganizationInvitation:null,lastOrganizationMember:null}),dt=e=>{var t;const n=e.user?e.user.id:e.user,r=e.user,i=e.session?e.session.id:e.session,s=e.session,o=null===s||void 0===s?void 0:s.actor,a=e.organization,l=e.organization?e.organization.id:e.organization,c=null===a||void 0===a?void 0:a.slug,u=a?null===r||void 0===r||null===(t=r.organizationMemberships)||void 0===t?void 0:t.find((e=>e.organization.id===l)):a,h=u?u.permissions:u,d=u?u.role:u,f=e.lastOrganizationInvitation,p=e.lastOrganizationMember;return{userId:n,user:r,sessionId:i,session:s,organization:a,orgId:l,orgRole:d,orgSlug:c,orgPermissions:h,actor:o,lastOrganizationInvitation:f,lastOrganizationMember:p}};var ft=n(248);const pt=()=>{},mt=pt(),gt=Object,vt=e=>e===mt,yt=e=>"function"==typeof e,wt=(e,t)=>({...e,...t}),bt=new WeakMap;let _t=0;const St=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let i,s;if(gt(e)!==e||r||n==RegExp)i=r?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(i=bt.get(e),i)return i;if(i=++_t+"~",bt.set(e,i),n==Array){for(i="@",s=0;s<e.length;s++)i+=St(e[s])+",";bt.set(e,i)}if(n==gt){i="#";const t=gt.keys(e).sort();for(;!vt(s=t.pop());)vt(e[s])||(i+=s+":"+St(e[s])+",");bt.set(e,i)}}return i},It=new WeakMap,Et={},kt={},xt="undefined",Tt=typeof window!=xt,Ct=typeof document!=xt,Nt=(e,t)=>{const n=It.get(e);return[()=>!vt(t)&&e.get(t)||Et,r=>{if(!vt(t)){const i=e.get(t);t in kt||(kt[t]=i),n[5](t,wt(i,r),i||Et)}},n[6],()=>!vt(t)&&t in kt?kt[t]:!vt(t)&&e.get(t)||Et]};let At=!0;const[Pt,Rt]=Tt&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[pt,pt],Dt={isOnline:()=>At,isVisible:()=>{const e=Ct&&document.visibilityState;return vt(e)||"hidden"!==e}},Ot={initFocus:e=>(Ct&&document.addEventListener("visibilitychange",e),Pt("focus",e),()=>{Ct&&document.removeEventListener("visibilitychange",e),Rt("focus",e)}),initReconnect:e=>{const t=()=>{At=!0,e()},n=()=>{At=!1};return Pt("online",t),Pt("offline",n),()=>{Rt("online",t),Rt("offline",n)}}},jt=!i.useId,Lt=!Tt||"Deno"in window,Mt=e=>Tt&&typeof window.requestAnimationFrame!=xt?window.requestAnimationFrame(e):setTimeout(e,1),Ut=Lt?i.useEffect:i.useLayoutEffect,Ft="undefined"!==typeof navigator&&navigator.connection,Vt=!Lt&&Ft&&(["slow-2g","2g"].includes(Ft.effectiveType)||Ft.saveData),zt=e=>{if(yt(e))try{e=e()}catch(n){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?St(e):"",t]};let Bt=0;const qt=()=>++Bt;var Ht=3,Wt=0,Kt=2,Gt=1;async function Qt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r,i,s,o]=t,a=wt({populateCache:!0,throwOnError:!0},"boolean"===typeof o?{revalidate:o}:o||{});let l=a.populateCache;const c=a.rollbackOnError;let u=a.optimisticData;const h=!1!==a.revalidate,d=a.throwOnError;if(yt(i)){const e=i,t=[],n=r.keys();for(const i of n)!/^\$(inf|sub)\$/.test(i)&&e(r.get(i)._k)&&t.push(i);return Promise.all(t.map(f))}return f(i);async function f(e){const[n]=zt(e);if(!n)return;const[i,o]=Nt(r,n),[a,f,p,m]=It.get(r),g=a[n],v=()=>h&&(delete p[n],delete m[n],g&&g[0])?g[0](2).then((()=>i().data)):i().data;if(t.length<3)return v();let y,w=s;const b=qt();f[n]=[b,0];const _=!vt(u),S=i(),I=S.data,E=S._c,k=vt(E)?I:E;if(_&&(u=yt(u)?u(k,I):u,o({data:u,_c:k})),yt(w))try{w=w(k)}catch(T){y=T}if(w&&(e=>yt(e.then))(w)){if(w=await w.catch((e=>{y=e})),b!==f[n][0]){if(y)throw y;return w}y&&_&&(e=>"function"===typeof c?c(e):!1!==c)(y)&&(l=!0,w=k,o({data:w,_c:mt}))}l&&(y||(yt(l)&&(w=l(w,k)),o({data:w,error:mt,_c:mt}))),f[n][1]=qt();const x=await v();if(o({_c:mt}),!y)return l?x:w;if(d)throw y}}const Yt=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},Jt=(e,t)=>{if(!It.has(e)){const n=wt(Ot,t),r={},i=Qt.bind(mt,e);let s=pt;const o={},a=(e,t)=>{const n=o[e]||[];return o[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},l=(t,n,r)=>{e.set(t,n);const i=o[t];if(i)for(const e of i)e(n,r)},c=()=>{if(!It.has(e)&&(It.set(e,[r,{},{},{},i,l,a]),!Lt)){const t=n.initFocus(setTimeout.bind(mt,Yt.bind(mt,r,0))),i=n.initReconnect(setTimeout.bind(mt,Yt.bind(mt,r,1)));s=()=>{t&&t(),i&&i(),It.delete(e)}}};return c(),[e,i,c,s]}return[e,It.get(e)[4]]},[$t,Xt]=Jt(new Map),Zt=wt({onLoadingSlow:pt,onSuccess:pt,onError:pt,onErrorRetry:(e,t,n,r,i)=>{const s=n.errorRetryCount,o=i.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!vt(s)&&o>s||setTimeout(r,a,i)},onDiscarded:pt,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Vt?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:Vt?5e3:3e3,compare:(e,t)=>St(e)==St(t),isPaused:()=>!1,cache:$t,mutate:Xt,fallback:{}},Dt),en=(e,t)=>{const n=wt(e,t);if(t){const{use:r,fallback:i}=e,{use:s,fallback:o}=t;r&&s&&(n.use=r.concat(s)),i&&o&&(n.fallback=wt(i,o))}return n},tn=(0,i.createContext)({}),nn=Tt&&window.__SWR_DEVTOOLS_USE__,rn=nn?window.__SWR_DEVTOOLS_USE__:[],sn=e=>yt(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],on=()=>wt(Zt,(0,i.useContext)(tn)),an=(e,t)=>{const[n,r]=zt(e),[,,,i]=It.get($t);if(i[n])return i[n];const s=t(r);return i[n]=s,s},ln=rn.concat((e=>(t,n,r)=>e(t,n&&function(){const[e]=zt(t),[,,,r]=It.get($t),i=r[e];return vt(i)?n(...arguments):(delete r[e],i)},r)));nn&&(window.__SWR_DEVTOOLS_REACT__=i);const cn=e=>zt(e)[0],un=i.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})),e)}),hn={dedupe:!0},dn=gt.defineProperty((e=>{const{value:t}=e,n=(0,i.useContext)(tn),r=yt(t),s=(0,i.useMemo)((()=>r?t(n):t),[r,n,t]),o=(0,i.useMemo)((()=>r?s:en(n,s)),[r,n,s]),a=s&&s.provider,l=(0,i.useRef)(mt);a&&!l.current&&(l.current=Jt(a(o.cache||$t),s));const c=l.current;return c&&(o.cache=c[0],o.mutate=c[1]),Ut((()=>{if(c)return c[2]&&c[2](),c[3]}),[]),(0,i.createElement)(tn.Provider,wt(e,{value:o}))}),"defaultValue",{value:Zt}),fn=(pn=(e,t,n)=>{const{cache:r,compare:s,suspense:o,fallbackData:a,revalidateOnMount:l,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:h,refreshWhenOffline:d,keepPreviousData:f}=n,[p,m,g,v]=It.get(r),[y,w]=zt(e),b=(0,i.useRef)(!1),_=(0,i.useRef)(!1),S=(0,i.useRef)(y),I=(0,i.useRef)(t),E=(0,i.useRef)(n),k=()=>E.current,x=()=>k().isVisible()&&k().isOnline(),[T,C,N,A]=Nt(r,y),P=(0,i.useRef)({}).current,R=vt(a)?n.fallback[y]:a,D=(e,t)=>{for(const n in P){const r=n;if("data"===r){if(!s(e[r],t[r])){if(!vt(e[r]))return!1;if(!s(B,t[r]))return!1}}else if(t[r]!==e[r])return!1}return!0},O=(0,i.useMemo)((()=>{const e=!!y&&!!t&&(vt(l)?!k().isPaused()&&!o&&(!!vt(c)||c):l),n=t=>{const n=wt(t);return delete n._k,e?{isValidating:!0,isLoading:!0,...n}:n},r=T(),i=A(),s=n(r),a=r===i?s:n(i);let u=s;return[()=>{const e=n(T());return D(e,u)?(u.data=e.data,u.isLoading=e.isLoading,u.isValidating=e.isValidating,u.error=e.error,u):(u=e,e)},()=>a]}),[r,y]),j=(0,ft.useSyncExternalStore)((0,i.useCallback)((e=>N(y,((t,n)=>{D(n,t)||e()}))),[r,y]),O[0],O[1]),L=!b.current,M=p[y]&&p[y].length>0,U=j.data,F=vt(U)?R:U,V=j.error,z=(0,i.useRef)(F),B=f?vt(U)?z.current:U:F,q=!(M&&!vt(V))&&(L&&!vt(l)?l:!k().isPaused()&&(o?!vt(F)&&c:vt(F)||c)),H=!!(y&&t&&L&&q),W=vt(j.isValidating)?H:j.isValidating,K=vt(j.isLoading)?H:j.isLoading,G=(0,i.useCallback)((async e=>{const t=I.current;if(!y||!t||_.current||k().isPaused())return!1;let r,i,o=!0;const a=e||{},l=!g[y]||!a.dedupe,c=()=>jt?!_.current&&y===S.current&&b.current:y===S.current,u={isValidating:!1,isLoading:!1},h=()=>{C(u)},d=()=>{const e=g[y];e&&e[1]===i&&delete g[y]},f={isValidating:!0};vt(T().data)&&(f.isLoading=!0);try{if(l&&(C(f),n.loadingTimeout&&vt(T().data)&&setTimeout((()=>{o&&c()&&k().onLoadingSlow(y,n)}),n.loadingTimeout),g[y]=[t(w),qt()]),[r,i]=g[y],r=await r,l&&setTimeout(d,n.dedupingInterval),!g[y]||g[y][1]!==i)return l&&c()&&k().onDiscarded(y),!1;u.error=mt;const e=m[y];if(!vt(e)&&(i<=e[0]||i<=e[1]||0===e[1]))return h(),l&&c()&&k().onDiscarded(y),!1;const a=T().data;u.data=s(a,r)?a:r,l&&c()&&k().onSuccess(r,y,n)}catch(v){d();const e=k(),{shouldRetryOnError:t}=e;e.isPaused()||(u.error=v,l&&c()&&(e.onError(v,y,e),(!0===t||yt(t)&&t(v))&&x()&&e.onErrorRetry(v,y,e,(e=>{const t=p[y];t&&t[0]&&t[0](Ht,e)}),{retryCount:(a.retryCount||0)+1,dedupe:!0})))}return o=!1,h(),!0}),[y,r]),Q=(0,i.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qt(r,S.current,...t)}),[]);if(Ut((()=>{I.current=t,E.current=n,vt(U)||(z.current=U)})),Ut((()=>{if(!y)return;const e=G.bind(mt,hn);let t=0;const n=((e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}})(y,p,(function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n==Wt){const n=Date.now();k().revalidateOnFocus&&n>t&&x()&&(t=n+k().focusThrottleInterval,e())}else if(n==Gt)k().revalidateOnReconnect&&x()&&e();else{if(n==Kt)return G();if(n==Ht)return G(r)}}));return _.current=!1,S.current=y,b.current=!0,C({_k:w}),q&&(vt(F)||Lt?e():Mt(e)),()=>{_.current=!0,n()}}),[y]),Ut((()=>{let e;function t(){const t=yt(u)?u(T().data):u;t&&-1!==e&&(e=setTimeout(n,t))}function n(){T().error||!h&&!k().isVisible()||!d&&!k().isOnline()?t():G(hn).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}}),[u,h,d,y]),(0,i.useDebugValue)(B),o&&vt(F)&&y){if(!jt&&Lt)throw new Error("Fallback data is required when using suspense in SSR.");I.current=t,E.current=n,_.current=!1;const e=v[y];if(!vt(e)){const t=Q(e);un(t)}if(!vt(V))throw V;{const e=G(hn);vt(B)||(e.status="fulfilled",e.value=!0),un(e)}}return{mutate:Q,get data(){return P.data=!0,B},get error(){return P.error=!0,V},get isValidating(){return P.isValidating=!0,W},get isLoading(){return P.isLoading=!0,K}}},function(){const e=on();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const[i,s,o]=sn(n),a=en(e,o);let l=pn;const{use:c}=a,u=(c||[]).concat(ln);for(let h=u.length;h--;)l=u[h](l);return l(i,s||a.fetcher||null,a)});var pn;const mn="$inf$",gn=e=>zt(e?e(0,null):null)[0],vn=Promise.resolve(),yn=((e,t)=>function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const[s,o,a]=sn(r),l=(a.use||[]).concat(t);return e(s,o,{...a,use:l})})(fn,(e=>(t,n,r)=>{const s=(0,i.useRef)(!1),{cache:o,initialSize:a=1,revalidateAll:l=!1,persistSize:c=!1,revalidateFirstPage:u=!0,revalidateOnMount:h=!1,parallel:d=!1}=r;let f;try{f=gn(t),f&&(f=mn+f)}catch(E){}const[p,m,g]=Nt(o,f),v=(0,i.useCallback)((()=>vt(p()._l)?a:p()._l),[o,f,a]);(0,ft.useSyncExternalStore)((0,i.useCallback)((e=>f?g(f,(()=>{e()})):()=>{}),[o,f]),v,v);const y=(0,i.useCallback)((()=>{const e=p()._l;return vt(e)?a:e}),[f,a]),w=(0,i.useRef)(y());Ut((()=>{s.current?f&&m({_l:c?w.current:y()}):s.current=!0}),[f,o]);const b=h&&!s.current,_=e(f,(async e=>{const i=p()._i,s=[],a=y(),[c]=Nt(o,e),h=c().data,f=[];let g=null;for(let p=0;p<a;++p){const[e,a]=zt(t(p,d?null:g));if(!e)break;const[c,m]=Nt(o,e);let v=c().data;const y=l||i||vt(v)||u&&!p&&!vt(h)||b||h&&!vt(h[p])&&!r.compare(h[p],v);if(n&&y){const e=async()=>{v=await n(a),m({data:v,_k:a}),s[p]=v};d?f.push(e):await e()}else s[p]=v;d||(g=v)}return d&&await Promise.all(f.map((e=>e()))),m({_i:mt}),s}),r),S=(0,i.useCallback)((function(e,t){const n="boolean"===typeof t?{revalidate:t}:t||{},r=!1!==n.revalidate;return f?(r&&(vt(e)?m({_i:!0}):m({_i:!1})),arguments.length?_.mutate(e,{...n,revalidate:r}):_.mutate()):vn}),[f,o]),I=(0,i.useCallback)((e=>{if(!f)return vn;const[,n]=Nt(o,f);let r;if(yt(e)?r=e(y()):"number"==typeof e&&(r=e),"number"!=typeof r)return vn;n({_l:r}),w.current=r;const i=[],[s]=Nt(o,f);let a=null;for(let l=0;l<r;++l){const[e]=zt(t(l,a)),[n]=Nt(o,e),r=e?n().data:mt;if(vt(r))return S(s().data);i.push(r),a=r}return S(i)}),[f,o,S,y]);return{size:y(),setSize:I,mutate:S,get data(){return _.data},get error(){return _.error},get isValidating(){return _.isValidating},get isLoading(){return _.isLoading}}}));function wn(e,t){if(!e)throw"string"===typeof t?new Error(t):new Error("".concat(t.displayName," not found"))}var bn,_n,Sn=(e,t)=>{const{assertCtxFn:n=wn}=t||{},r=i.createContext(void 0);r.displayName=e;return[r,()=>{const t=i.useContext(r);return n(t,"".concat(e," not found")),t.value},()=>{const e=i.useContext(r);return e?e.value:{}}]},In={};((e,t)=>{for(var n in t)Oe(e,n,{get:t[n],enumerable:!0})})(In,{SWRConfig:()=>dn,useSWR:()=>fn,useSWRInfinite:()=>yn}),Ue(In,bn=e,"default"),_n&&Ue(_n,bn,"default");var[En,kn]=Sn("ClerkInstanceContext"),[xn,Tn]=Sn("UserContext"),[Cn,Nn]=Sn("ClientContext"),[An,Pn]=Sn("SessionContext"),[Rn,Dn]=Sn("OrganizationContext"),On=e=>{let{children:t,organization:n,lastOrganizationMember:r,lastOrganizationInvitation:s,swrConfig:o}=e;return i.createElement(dn,{value:o},i.createElement(Rn.Provider,{value:{value:{organization:n,lastOrganizationMember:r,lastOrganizationInvitation:s}}},t))};"undefined"!==typeof window?i.useLayoutEffect:i.useEffect;const[jn,Ln]=Sn("AuthContext"),[Mn,Un]=[En,kn];function Fn(e){const{isomorphicClerkOptions:t,initialState:n,children:r}=e,{isomorphicClerk:s,loaded:o}=Vn(t);t.frontendApi&&Ve("frontendApi","Use `publishableKey` instead.");const[a,l]=i.useState({client:s.client,session:s.session,user:s.user,organization:s.organization,lastOrganizationInvitation:null,lastOrganizationMember:null});i.useEffect((()=>s.addListener((e=>l({...e})))),[]);const c=ut(o,a,n),u=i.useMemo((()=>({value:s})),[o]),h=i.useMemo((()=>({value:a.client})),[a.client]),{sessionId:d,session:f,userId:p,user:m,orgId:g,actor:v,lastOrganizationInvitation:y,lastOrganizationMember:w,organization:b,orgRole:_,orgSlug:S}=c,I=i.useMemo((()=>({value:{sessionId:d,userId:p,actor:v,orgId:g,orgRole:_,orgSlug:S}})),[d,p,v,g,_,S]),E=i.useMemo((()=>({value:m})),[p,m]),k=i.useMemo((()=>({value:f})),[d,f]),x=i.useMemo((()=>({value:{organization:b,lastOrganizationInvitation:y,lastOrganizationMember:w}})),[g,b,y,w]);return i.createElement(Mn.Provider,{value:u},i.createElement(Cn.Provider,{value:h},i.createElement(An.Provider,{value:k},i.createElement(On,{...x.value},i.createElement(jn.Provider,{value:I},i.createElement(xn.Provider,{value:E},r))))))}const Vn=e=>{const[t,n]=i.useState(!1),r=i.useMemo((()=>ct.getOrCreateInstance(e)),[]);return i.useEffect((()=>{r.__unstable__updateProps({appearance:e.appearance})}),[e.appearance]),i.useEffect((()=>{r.__unstable__updateProps({options:e})}),[e.localization]),i.useEffect((()=>{r.addOnLoaded((()=>n(!0)))}),[]),{isomorphicClerk:r,loaded:t}};const zn=Object.freeze({noGuarantees:Object.freeze({guaranteedLoaded:!1}),guaranteedLoaded:Object.freeze({guaranteedLoaded:!0})}),Bn=i.createContext(void 0);Bn.displayName="StructureContext";const qn=()=>{const e=i.useContext(Bn);return function(e){if(!e)throw new Error("Clerk: You must wrap your application in a <ClerkProvider> component.")}(e),e},Hn=e=>{let{children:t}=e;return qn().guaranteedLoaded?i.createElement(i.Fragment,null,t):i.createElement(Bn.Provider,{value:zn.guaranteedLoaded},t)};var Wn;Wn={packageName:"@clerk/clerk-react"},qe.setMessages(Wn).setPackageName(Wn);const Kn=function(e,t,n){const r=e.displayName||e.name||t||"Component",s=r=>(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i.useEffect((()=>{const r=He.get(e)||0;if(r==n)throw new Error(t);return He.set(e,r+1),()=>{He.set(e,(He.get(e)||1)-1)}}),[])}(t,n),i.createElement(e,{...r}));return s.displayName="withMaxAllowedInstancesGuard(".concat(r,")"),s}((function(e){const{initialState:t,children:n,...r}=e,{frontendApi:s="",publishableKey:o="",Clerk:a}=r;return a||(o||s?o&&!De(o)?qe.throwInvalidPublishableKeyError({key:o}):o||!s||(s||"").startsWith("clerk.")||qe.throwInvalidFrontendApiError({key:s}):qe.throwMissingPublishableKeyError()),i.createElement(Bn.Provider,{value:zn.noGuarantees},i.createElement(Fn,{initialState:t,isomorphicClerkOptions:r},n))}),"ClerkProvider","Clerk: You've added multiple <ClerkProvider> components in your React component tree. Wrap your components in a single <ClerkProvider>.");Kn.displayName="ClerkProvider";var Gn=e=>{const t=n=>{if(!n)return n;if(Array.isArray(n))return n.map((e=>"object"===typeof e||Array.isArray(e)?t(e):e));const r={...n},i=Object.keys(r);for(const s of i){const n=e(s.toString());n!==s&&(r[n]=r[s],delete r[s]),"object"===typeof r[n]&&(r[n]=t(r[n]))}return r};return t};Gn((function(e){return e?e.replace(/[A-Z]/g,(e=>"_".concat(e.toLowerCase()))):""})),Gn((function(e){return e?e.replace(/([-_][a-z])/g,(e=>e.toUpperCase().replace(/-|_/,""))):""}));Object.freeze({"image/png":"png","image/jpeg":"jpg","image/gif":"gif","image/webp":"webp","image/x-icon":"ico","image/vnd.microsoft.icon":"ico"});var Qn=e=>{(()=>{try{return!1}catch(e){}return!1})()&&console.error(e)};const Yn=e=>{const t=Array(e.length).fill(null),[n,r]=(0,i.useState)(t);return e.map(((e,t)=>({id:e.id,mount:e=>r((n=>n.map(((n,r)=>r===t?e:n)))),unmount:()=>r((e=>e.map(((e,n)=>n===t?null:e)))),portal:()=>i.createElement(i.Fragment,null,n[t]?(0,o.createPortal)(e.component,n[t]):null)})))},Jn=(e,t)=>!!e&&i.isValidElement(e)&&(null===e||void 0===e?void 0:e.type)===t,$n=e=>Zn({children:e,reorderItemsLabels:["account","security"],LinkComponent:ar,PageComponent:or,componentName:"UserProfile"}),Xn=e=>Zn({children:e,reorderItemsLabels:["members","settings"],LinkComponent:hr,PageComponent:ur,componentName:"OrganizationProfile"}),Zn=e=>{let{children:t,LinkComponent:n,PageComponent:r,reorderItemsLabels:s,componentName:o}=e;const a=[];i.Children.forEach(t,(e=>{if(!Jn(e,r)&&!Jn(e,n))return void(e&&Qn((e=>"Clerk: <".concat(e," /> can only accept <").concat(e,".Page /> and <").concat(e,".Link /> as its children. Any other provided component will be ignored."))(o)));const{props:t}=e,{children:i,label:l,url:c,labelIcon:u}=t;if(Jn(e,r))if(er(t,s))a.push({label:l});else{if(!tr(t))return void Qn((e=>"Clerk: Missing props. <".concat(e,".Page /> component requires the following props: url, label, labelIcon, alongside with children to be rendered inside the page."))(o));a.push({label:l,labelIcon:u,children:i,url:c})}if(Jn(e,n)){if(!nr(t))return void Qn((e=>"Clerk: Missing props. <".concat(e,".Link /> component requires the following props: url, label and labelIcon."))(o));a.push({label:l,labelIcon:u,url:c})}}));const l=[],c=[],u=[];a.forEach(((e,t)=>{if(tr(e))return l.push({component:e.children,id:t}),void c.push({component:e.labelIcon,id:t});nr(e)&&u.push({component:e.labelIcon,id:t})}));const h=Yn(l),d=Yn(c),f=Yn(u),p=[],m=[];return a.forEach(((e,t)=>{if(er(e,s))p.push({label:e.label});else{if(tr(e)){const{portal:n,mount:r,unmount:i}=h.find((e=>e.id===t)),{portal:s,mount:o,unmount:a}=d.find((e=>e.id===t));return p.push({label:e.label,url:e.url,mount:r,unmount:i,mountIcon:o,unmountIcon:a}),m.push(n),void m.push(s)}if(nr(e)){const{portal:n,mount:r,unmount:i}=f.find((e=>e.id===t));return p.push({label:e.label,url:e.url,mountIcon:r,unmountIcon:i}),void m.push(n)}}})),{customPages:p,customPagesPortals:m}},er=(e,t)=>{const{children:n,label:r,url:i,labelIcon:s}=e;return!n&&!i&&!s&&t.some((e=>e===r))},tr=e=>{const{children:t,label:n,url:r,labelIcon:i}=e;return!!t&&!!r&&!!i&&!!n},nr=e=>{const{children:t,label:n,url:r,labelIcon:i}=e;return!t&&!!r&&!!i&&!!n},rr=(e,t)=>{t=t||e.displayName||e.name||"Component",e.displayName=t;const n=t=>{const n=Un();return n.loaded?i.createElement(Hn,null,i.createElement(e,{...t,clerk:n})):null};return n.displayName="withClerk(".concat(t,")"),n};class ir extends i.PureComponent{constructor(){super(...arguments),this.portalRef=i.createRef()}componentDidUpdate(e){var t,n;e.props.appearance===this.props.props.appearance&&(null===(t=e.props)||void 0===t||null===(t=t.customPages)||void 0===t?void 0:t.length)===(null===(n=this.props.props)||void 0===n||null===(n=n.customPages)||void 0===n?void 0:n.length)||this.props.updateProps({node:this.portalRef.current,props:this.props.props})}componentDidMount(){this.portalRef.current&&this.props.mount(this.portalRef.current,this.props.props)}componentWillUnmount(){this.portalRef.current&&this.props.unmount(this.portalRef.current)}render(){var e;return i.createElement(i.Fragment,null,i.createElement("div",{ref:this.portalRef}),null===(e=this.props)||void 0===e||null===(e=e.customPagesPortals)||void 0===e?void 0:e.map(((e,t)=>(0,i.createElement)(e,{key:t}))))}}rr((e=>{let{clerk:t,...n}=e;return i.createElement(ir,{mount:t.mountSignIn,unmount:t.unmountSignIn,updateProps:t.__unstable__updateProps,props:n})}),"SignIn");const sr=rr((e=>{let{clerk:t,...n}=e;return i.createElement(ir,{mount:t.mountSignUp,unmount:t.unmountSignUp,updateProps:t.__unstable__updateProps,props:n})}),"SignUp");function or(e){let{children:t}=e;return Qn("Clerk: <UserProfile.Page /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`."),i.createElement(i.Fragment,null,t)}function ar(e){let{children:t}=e;return Qn("Clerk: <UserProfile.Link /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`."),i.createElement(i.Fragment,null,t)}const lr=rr((e=>{let{clerk:t,...n}=e;const{customPages:r,customPagesPortals:s}=$n(n.children);return i.createElement(ir,{mount:t.mountUserProfile,unmount:t.unmountUserProfile,updateProps:t.__unstable__updateProps,props:{...n,customPages:r},customPagesPortals:s})}),"UserProfile"),cr=(Object.assign(lr,{Page:or,Link:ar}),rr((e=>{let{clerk:t,...n}=e;const{customPages:r,customPagesPortals:s}=$n(n.children),o=Object.assign(n.userProfileProps||{},{customPages:r});return i.createElement(ir,{mount:t.mountUserButton,unmount:t.unmountUserButton,updateProps:t.__unstable__updateProps,props:{...n,userProfileProps:o},customPagesPortals:s})}),"UserButton"));Object.assign(cr,{UserProfilePage:or,UserProfileLink:ar});function ur(e){let{children:t}=e;return Qn("Clerk: <OrganizationProfile.Page /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`."),i.createElement(i.Fragment,null,t)}function hr(e){let{children:t}=e;return Qn("Clerk: <OrganizationProfile.Link /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`."),i.createElement(i.Fragment,null,t)}const dr=rr((e=>{let{clerk:t,...n}=e;const{customPages:r,customPagesPortals:s}=Xn(n.children);return i.createElement(ir,{mount:t.mountOrganizationProfile,unmount:t.unmountOrganizationProfile,updateProps:t.__unstable__updateProps,props:{...n,customPages:r},customPagesPortals:s})}),"OrganizationProfile"),fr=(Object.assign(dr,{Page:ur,Link:hr}),rr((e=>{let{clerk:t,...n}=e;return i.createElement(ir,{mount:t.mountCreateOrganization,unmount:t.unmountCreateOrganization,updateProps:t.__unstable__updateProps,props:n})}),"CreateOrganization"),rr((e=>{let{clerk:t,...n}=e;const{customPages:r,customPagesPortals:s}=Xn(n.children),o=Object.assign(n.organizationProfileProps||{},{customPages:r});return i.createElement(ir,{mount:t.mountOrganizationSwitcher,unmount:t.unmountOrganizationSwitcher,updateProps:t.__unstable__updateProps,props:{...n,organizationProfileProps:o},customPagesPortals:s})}),"OrganizationSwitcher")),pr=(Object.assign(fr,{OrganizationProfilePage:ur,OrganizationProfileLink:hr}),rr((e=>{let{clerk:t,...n}=e;return i.createElement(ir,{mount:t.mountOrganizationList,unmount:t.unmountOrganizationList,updateProps:t.__unstable__updateProps,props:n})}),"OrganizationList"),e=>{let{children:t}=e;const{userId:n}=Ln();return n?i.createElement(i.Fragment,null,t):null}),mr=e=>{let{children:t}=e;const{userId:n}=Ln();return null===n?i.createElement(i.Fragment,null,t):null};rr((e=>{let{clerk:t,...n}=e;const{client:r,session:s}=t,{__unstable__environment:o}=t,a=r.activeSessions&&r.activeSessions.length>0;return i.useEffect((()=>{if(null===s&&a&&o){const{afterSignOutOneUrl:e}=o.displayConfig;t.navigate(e)}else t.redirectToSignIn(n)}),[]),null}),"RedirectToSignIn"),rr((e=>{let{clerk:t,...n}=e;return i.useEffect((()=>{t.redirectToSignUp(n)}),[]),null}),"RedirectToSignUp"),rr((e=>{let{clerk:t}=e;return i.useEffect((()=>{t.redirectToUserProfile()}),[]),null}),"RedirectToUserProfile"),rr((e=>{let{clerk:t}=e;return i.useEffect((()=>{t.redirectToOrganizationProfile()}),[]),null}),"RedirectToOrganizationProfile"),rr((e=>{let{clerk:t}=e;return i.useEffect((()=>{t.redirectToCreateOrganization()}),[]),null}),"RedirectToCreateOrganization"),rr((e=>{let{clerk:t,...n}=e;return i.useEffect((()=>{t.handleRedirectCallback(n)}),[]),null}),"AuthenticateWithRedirectCallback");function gr(){const e=Tn();return void 0===e?{isLoaded:!1,isSignedIn:void 0,user:void 0}:null===e?{isLoaded:!0,isSignedIn:!1,user:null}:{isLoaded:!0,isSignedIn:!0,user:e}}const vr=()=>Un();var yr=n(184);const wr=e=>{let{onClose:t}=e;return(0,yr.jsx)(pr,{children:(0,yr.jsx)("div",{})})},br={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.4)",overflow:"hidden"},_r=e=>{let{onClose:t}=e;const n=ee(),{session:r}=vr();return(0,i.useEffect)((()=>{r&&r.user&&n("/dashboard")}),[r,n]),(0,yr.jsx)(mr,{children:(0,yr.jsx)("div",{className:"popup-overlay",children:(0,yr.jsxs)("div",{className:"popup-content",style:br,children:[(0,yr.jsx)("button",{className:"close-button",onClick:()=>{t()},children:"X"}),(0,yr.jsx)("div",{className:"clerk-signin-container",children:(0,yr.jsx)(sr,{})})]})})})},Sr=()=>{const[e,t]=(0,i.useState)(!1),n=ee();return(0,yr.jsxs)("div",{children:[(0,yr.jsx)("header",{children:(0,yr.jsx)("h1",{className:"header-title",children:"Rentora"})}),(0,yr.jsx)(xe,{to:"#",className:"get-started-btn",onClick:()=>{t(!0)},children:"Get Started"}),e&&(0,yr.jsx)(_r,{onClose:()=>{t(!1),n("/onboarding")}})]})},Ir=()=>{const e={display:"flex",flexDirection:"column",marginBottom:"10px"},t={fontStyle:"italic"};return(0,yr.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"rgba(255, 255, 255, 0)",overflow:"hidden"},children:(0,yr.jsxs)("div",{style:{maxWidth:"600px",padding:"20px",backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"8px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.9)",fontFamily:"monospace",fontSize:"16px",fontWeight:"normal",lineHeight:"1.5",overflow:"hidden"},children:[(0,yr.jsx)("h1",{children:"Buy Homes - Coming Soon!"}),(0,yr.jsx)("p",{children:"We're excited to announce that the ability to buy homes is in development. Here are some of the features we have planned:"}),(0,yr.jsx)("div",{style:e,children:(0,yr.jsx)("span",{style:t,children:"Buy your dream home with ease"})}),(0,yr.jsx)("div",{style:e,children:(0,yr.jsx)("span",{style:t,children:"Invest by buying shares in a home"})}),(0,yr.jsx)("div",{style:e,children:(0,yr.jsx)("span",{style:t,children:"Rent out homes you own with our long-term rental or short-term venture options"})}),(0,yr.jsx)("p",{children:"Stay tuned for updates on our progress and the launch of this exciting new feature!"})]})})},Er=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},kr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Er(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new xr;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class xr extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tr=function(e){return function(e){const t=Er(e);return kr.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Cr=function(e){try{return kr.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Nr(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Nr(e[n],t[n]));return e}const Ar=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Pr=()=>{try{return Ar()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLERK_PUBLISHABLE_KEY:"pk_test_aG9seS1taW5ub3ctOTkuY2xlcmsuYWNjb3VudHMuZGV2JA",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAW1V1DfQ36scJduIpmX-cH8EQ9diHF5PQ"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Cr(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Rr=()=>{var e;return null===(e=Pr())||void 0===e?void 0:e.config};class Dr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Or(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Tr(JSON.stringify({alg:"none",type:"JWT"})),Tr(JSON.stringify(s)),""].join(".")}function jr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Lr(){var e;const t=null===(e=Pr())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Mr(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ur(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Fr(){const e=jr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Vr(){try{return"object"===typeof indexedDB}catch(e){return!1}}class zr extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Br.prototype.create)}}class Br{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(qr,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new zr(n,s,t)}}const qr=/\{\$([^}]+)}/g;function Hr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Wr(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Kr(n)&&Kr(s)){if(!Wr(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Kr(e){return null!==e&&"object"===typeof e}function Gr(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Qr(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Yr(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Jr(e,t){const n=new $r(e,t);return n.subscribe.bind(n)}class $r{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Xr),void 0===r.error&&(r.error=Xr),void 0===r.complete&&(r.complete=Xr);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Xr(){}function Zr(e){return e&&e._delegate?e._delegate:e}class ei{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ti="[DEFAULT]";class ni{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Dr;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ti})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ti;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ti;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ti;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===ti?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ti;return this.component?this.component.multipleInstances?e:ti:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ri{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ni(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ii=[];var si;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(si||(si={}));const oi={debug:si.DEBUG,verbose:si.VERBOSE,info:si.INFO,warn:si.WARN,error:si.ERROR,silent:si.SILENT},ai=si.INFO,li={[si.DEBUG]:"log",[si.VERBOSE]:"log",[si.INFO]:"info",[si.WARN]:"warn",[si.ERROR]:"error"},ci=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=li[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ui{constructor(e){this.name=e,this._logLevel=ai,this._logHandler=ci,this._userLogHandler=null,ii.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in si))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?oi[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,si.DEBUG,...t),this._logHandler(this,si.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,si.VERBOSE,...t),this._logHandler(this,si.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,si.INFO,...t),this._logHandler(this,si.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,si.WARN,...t),this._logHandler(this,si.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,si.ERROR,...t),this._logHandler(this,si.ERROR,...t)}}const hi=(e,t)=>t.some((t=>e instanceof t));let di,fi;const pi=new WeakMap,mi=new WeakMap,gi=new WeakMap,vi=new WeakMap,yi=new WeakMap;let wi={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return mi.get(e);if("objectStoreNames"===t)return e.objectStoreNames||gi.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Si(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function bi(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(fi||(fi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ii(this),n),Si(pi.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Si(e.apply(Ii(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Ii(this),t,...r);return gi.set(s,t.sort?t.sort():[t]),Si(s)}}function _i(e){return"function"===typeof e?bi(e):(e instanceof IDBTransaction&&function(e){if(mi.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));mi.set(e,t)}(e),hi(e,di||(di=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,wi):e)}function Si(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Si(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&pi.set(t,e)})).catch((()=>{})),yi.set(t,e),t}(e);if(vi.has(e))return vi.get(e);const t=_i(e);return t!==e&&(vi.set(e,t),yi.set(t,e)),t}const Ii=e=>yi.get(e);const Ei=["get","getKey","getAll","getAllKeys","count"],ki=["put","add","delete","clear"],xi=new Map;function Ti(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(xi.get(t))return xi.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ki.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ei.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return xi.set(t,s),s}var Ci;Ci=e=>({...e,get:(t,n,r)=>Ti(t,n)||e.get(t,n,r),has:(t,n)=>!!Ti(t,n)||e.has(t,n)}),wi=Ci(wi);class Ni{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Ai="@firebase/app",Pi="0.9.24",Ri=new ui("@firebase/app"),Di="[DEFAULT]",Oi={[Ai]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ji=new Map,Li=new Map;function Mi(e,t){try{e.container.addComponent(t)}catch(n){Ri.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ui(e,t){e.container.addOrOverwriteComponent(t)}function Fi(e){const t=e.name;if(Li.has(t))return Ri.debug("There were multiple attempts to register component ".concat(t,".")),!1;Li.set(t,e);for(const n of ji.values())Mi(n,e);return!0}function Vi(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function zi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Di;Vi(e,t).clearInstance(n)}function Bi(){Li.clear()}const qi=new Br("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Hi{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ei("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qi.create("app-deleted",{appName:this._name})}}const Wi="10.7.0";function Ki(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Di,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw qi.create("bad-app-name",{appName:String(i)});if(n||(n=Rr()),!n)throw qi.create("no-options");const s=ji.get(i);if(s){if(Wr(n,s.options)&&Wr(r,s.config))return s;throw qi.create("duplicate-app",{appName:i})}const o=new ri(i);for(const l of Li.values())o.addComponent(l);const a=new Hi(n,r,o);return ji.set(i,a),a}function Gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Di;const t=ji.get(e);if(!t&&e===Di&&Rr())return Ki();if(!t)throw qi.create("no-app",{appName:e});return t}function Qi(){return Array.from(ji.values())}async function Yi(e){const t=e.name;ji.has(t)&&(ji.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Ji(e,t,n){var r;let i=null!==(r=Oi[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ri.warn(e.join(" "))}Fi(new ei("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function $i(e,t){if(null!==e&&"function"!==typeof e)throw qi.create("invalid-log-argument");!function(e,t){for(const n of ii){let r=null;t&&t.level&&(r=oi[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:si[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Xi(e){var t;t=e,ii.forEach((e=>{e.setLogLevel(t)}))}const Zi="firebase-heartbeat-database",es=1,ts="firebase-heartbeat-store";let ns=null;function rs(){return ns||(ns=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Si(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Si(o.result),e.oldVersion,e.newVersion,Si(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Zi,es,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(ts)}}).catch((e=>{throw qi.create("idb-open",{originalErrorMessage:e.message})}))),ns}async function is(e,t){try{const n=(await rs()).transaction(ts,"readwrite"),r=n.objectStore(ts);await r.put(t,ss(e)),await n.done}catch(n){if(n instanceof zr)Ri.warn(n.message);else{const e=qi.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Ri.warn(e.message)}}}function ss(e){return"".concat(e.name,"!").concat(e.options.appId)}class os{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ls(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=as();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=as(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),cs(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),cs(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Tr(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function as(){return(new Date).toISOString().substring(0,10)}class ls{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Vr()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await rs();return await t.transaction(ts).objectStore(ts).get(ss(e))}catch(t){if(t instanceof zr)Ri.warn(t.message);else{const e=qi.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Ri.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return is(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return is(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function cs(e){return Tr(JSON.stringify({version:2,heartbeats:e})).length}var us;us="",Fi(new ei("platform-logger",(e=>new Ni(e)),"PRIVATE")),Fi(new ei("heartbeat",(e=>new os(e)),"PRIVATE")),Ji(Ai,Pi,us),Ji(Ai,Pi,"esm2017"),Ji("fire-js","");class hs{constructor(e,t){this._delegate=e,this.firebase=t,Mi(e,new ei("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Yi(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Di;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Di;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Mi(this._delegate,e)}_addOrOverwriteComponent(e){Ui(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ds=new Br("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const fs=function e(){const n=function(e){const n={},r={__esModule:!0,initializeApp:function(t){const i=Ki(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Hr(n,i.name))return n[i.name];const s=new e(i,r);return n[i.name]=s,s},app:i,registerVersion:Ji,setLogLevel:Xi,onLog:$i,apps:null,SDK_VERSION:Wi,INTERNAL:{registerComponent:function(t){const n=t.name,s=n.replace("-compat","");if(Fi(t)&&"PUBLIC"===t.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw ds.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==t.serviceProps&&Nr(o,t.serviceProps),r[s]=o,e.prototype[s]=function(){const e=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:t}};function i(e){if(!Hr(n,e=e||Di))throw ds.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=e,r}(hs);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Nr(n,e)},createSubscribe:Jr,ErrorFactory:Br,deepExtend:Nr}),n}(),ps=new ui("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){ps.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&ps.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ms=fs;!function(e){Ji("@firebase/app-compat","0.2.24",e)}();ms.registerVersion("firebase","10.7.0","app-compat");function gs(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;const vs={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ys="EMAIL_SIGNIN",ws="PASSWORD_RESET",bs="RECOVER_EMAIL",_s="REVERT_SECOND_FACTOR_ADDITION",Ss="VERIFY_AND_CHANGE_EMAIL",Is="VERIFY_EMAIL";function Es(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ks=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},xs=Es,Ts=new Br("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Cs=new ui("@firebase/auth");function Ns(e){if(Cs.logLevel<=si.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Cs.error("Auth (".concat(Wi,"): ").concat(e),...n)}}function As(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Os(e,...n)}function Ps(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Os(e,...n)}function Rs(e,t,n){const r=Object.assign(Object.assign({},xs()),{[t]:n});return new Br("auth","Firebase",r).create(t,{appName:e.name})}function Ds(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&As(e,"argument-error"),Rs(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Os(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Ts.create(e,...n)}function js(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Os(t,...r)}}function Ls(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ns(t),new Error(t)}function Ms(e,t){e||Ls(t)}function Us(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Fs(){return"http:"===Vs()||"https:"===Vs()}function Vs(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class zs{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ms(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jr())||Ur()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Fs()||Mr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Bs(e,t){Ms(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class qs{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Hs={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ws=new zs(3e4,6e4);function Ks(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Gs(e,t,n,r){return Qs(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Gr(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),qs.fetch()(Js(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Qs(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Hs),t);try{const t=new Xs(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Zs(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Zs(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Zs(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Zs(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Rs(e,a,o);As(e,a)}}catch(i){if(i instanceof zr)throw i;As(e,"network-request-failed",{message:String(i)})}}async function Ys(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Gs(e,t,n,r,i);return"mfaPendingCredential"in s&&As(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Js(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Bs(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function $s(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Xs{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Ps(this.auth,"network-request-failed"))),Ws.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zs(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ps(e,t,r);return i.customData._tokenResponse=n,i}function eo(e){return void 0!==e&&void 0!==e.getResponse}function to(e){return void 0!==e&&void 0!==e.enterprise}class no{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return $s(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function ro(e,t){return Gs(e,"GET","/v2/recaptchaConfig",Ks(e,t))}function io(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function so(e){return 1e3*Number(e)}function oo(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ns("JWT malformed, contained fewer than 3 sections"),null;try{const e=Cr(n);return e?JSON.parse(e):(Ns("Failed to decode base64 JWT payload"),null)}catch(i){return Ns("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function ao(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof zr&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class lo{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class co{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=io(this.lastLoginAt),this.creationTime=io(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function uo(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ao(e,async function(e,t){return Gs(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));js(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=gs(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new co(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){js(e.idToken,"internal-error"),js("undefined"!==typeof e.idToken,"internal-error"),js("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=oo(e);return js(t,"internal-error"),js("undefined"!==typeof t.exp,"internal-error"),js("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return js(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Qs(e,{},(async()=>{const n=Gr({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Js(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",qs.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new ho;return n&&(js("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(js("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(js("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ho,this.toJSON())}_performRefresh(){return Ls("not implemented")}}function fo(e,t){js("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class po{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=gs(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new co(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ao(this,this.stsTokenManager.getToken(this.auth,e));return js(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Zr(e),r=await n.getIdToken(t),i=oo(r);js(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:io(so(i.auth_time)),issuedAtTime:io(so(i.iat)),expirationTime:io(so(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Zr(e);await uo(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(js(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new po(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){js(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await uo(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ao(this,async function(e,t){return Gs(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:S}=t;js(y&&S,e,"internal-error");const I=ho.fromJSON(this.name,S);js("string"===typeof y,e,"internal-error"),fo(u,e.name),fo(h,e.name),js("boolean"===typeof w,e,"internal-error"),js("boolean"===typeof b,e,"internal-error"),fo(d,e.name),fo(f,e.name),fo(p,e.name),fo(m,e.name),fo(g,e.name),fo(v,e.name);const E=new po({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(E.providerData=_.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new ho;r.updateFromServerResponse(t);const i=new po({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await uo(i),i}}const mo=new Map;function go(e){Ms(e instanceof Function,"Expected a class definition");let t=mo.get(e);return t?(Ms(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,mo.set(e,t),t)}class vo{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vo.type="NONE";const yo=vo;function wo(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class bo{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=wo(this.userKey,r.apiKey,i),this.fullPersistenceKey=wo("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?po._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new bo(go(yo),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||go(yo);const s=wo(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=po._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new bo(i,e,n)):new bo(i,e,n)}}function _o(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ko(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(So(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(To(t))return"Blackberry";if(Co(t))return"Webos";if(Io(t))return"Safari";if((t.includes("chrome/")||Eo(t))&&!t.includes("edge/"))return"Chrome";if(xo(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function So(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr();return/firefox\//i.test(e)}function Io(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Eo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr();return/crios\//i.test(e)}function ko(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr();return/iemobile/i.test(e)}function xo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr();return/android/i.test(e)}function To(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr();return/blackberry/i.test(e)}function Co(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr();return/webos/i.test(e)}function No(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ao(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr();return No(e)||xo(e)||Co(e)||To(e)||/windows phone/i.test(e)||ko(e)}function Po(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=_o(jr());break;case"Worker":t="".concat(_o(jr()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Wi,"/").concat(r)}class Ro{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Do{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Oo{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lo(this),this.idTokenSubscription=new Lo(this),this.beforeStateQueue=new Ro(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ts,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=go(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return js(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uo(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Zr(e):null;return t&&js(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&js(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(go(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Gs(e,"GET","/v2/passwordPolicy",Ks(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Do(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Br("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Gs(e,"POST","/v2/accounts:revokeToken",Ks(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&go(e)||this._popupRedirectResolver;js(t,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[go(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(js(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return js(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Po(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Cs.logLevel<=si.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Cs.warn("Auth (".concat(Wi,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function jo(e){return Zr(e)}class Lo{constructor(e){this.auth=e,this.observer=null,this.addObserver=Jr((e=>this.observer=e))}get next(){return js(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Mo(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ps("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Uo(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Fo{constructor(e){this.type="recaptcha-enterprise",this.auth=jo(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;to(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ro(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new no(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&to(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Mo("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Vo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Fo(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function zo(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Vo(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Vo(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Bo(e,t,n){const r=jo(e);js(r._canInitEmulator,r,"emulator-config-failed"),js(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=qo(t),{host:o,port:a}=function(e){const t=qo(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ho(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ho(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function qo(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ho(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Wo{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ls("not implemented")}_getIdTokenResponse(e){return Ls("not implemented")}_linkToIdToken(e,t){return Ls("not implemented")}_getReauthenticationResolver(e){return Ls("not implemented")}}async function Ko(e,t){return Gs(e,"POST","/v1/accounts:resetPassword",Ks(e,t))}async function Go(e,t){return Gs(e,"POST","/v1/accounts:signUp",t)}async function Qo(e,t){return Ys(e,"POST","/v1/accounts:signInWithPassword",Ks(e,t))}async function Yo(e,t){return Gs(e,"POST","/v1/accounts:sendOobCode",Ks(e,t))}async function Jo(e,t){return Yo(e,t)}async function $o(e,t){return Yo(e,t)}class Xo extends Wo{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Xo(e,t,"password")}static _fromEmailAndCode(e,t){return new Xo(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return zo(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Qo);case"emailLink":return async function(e,t){return Ys(e,"POST","/v1/accounts:signInWithEmailLink",Ks(e,t))}(e,{email:this._email,oobCode:this._password});default:As(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return zo(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Go);case"emailLink":return async function(e,t){return Ys(e,"POST","/v1/accounts:signInWithEmailLink",Ks(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:As(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Zo(e,t){return Ys(e,"POST","/v1/accounts:signInWithIdp",Ks(e,t))}class ea extends Wo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):As("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=gs(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new ea(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Zo(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Zo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zo(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Gr(t)}return e}}const ta={USER_NOT_FOUND:"user-not-found"};class na extends Wo{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new na({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new na({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Ys(e,"POST","/v1/accounts:signInWithPhoneNumber",Ks(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Ys(e,"POST","/v1/accounts:signInWithPhoneNumber",Ks(e,t));if(n.temporaryProof)throw Zs(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Ys(e,"POST","/v1/accounts:signInWithPhoneNumber",Ks(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ta)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new na({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ra{constructor(e){var t,n,r,i,s,o;const a=Qr(Yr(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);js(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Qr(Yr(e)).link,n=t?Qr(Yr(t)).deep_link_id:null,r=Qr(Yr(e)).deep_link_id;return(r?Qr(Yr(r)).link:null)||r||n||t||e}(e);try{return new ra(t)}catch(n){return null}}}class ia{constructor(){this.providerId=ia.PROVIDER_ID}static credential(e,t){return Xo._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ra.parseLink(t);return js(n,"argument-error"),Xo._fromEmailAndCode(e,n.code,n.tenantId)}}ia.PROVIDER_ID="password",ia.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ia.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class sa{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class oa extends sa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class aa extends oa{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return js("providerId"in t&&"signInMethod"in t,"argument-error"),ea._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return js(e.idToken||e.accessToken,"argument-error"),ea._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return aa.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return aa.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new aa(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(l){return null}}}class la extends oa{constructor(){super("facebook.com")}static credential(e){return ea._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return la.credential(t.oauthAccessToken)}catch(n){return null}}}la.FACEBOOK_SIGN_IN_METHOD="facebook.com",la.PROVIDER_ID="facebook.com";class ca extends oa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ea._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ca.credential(n,r)}catch(i){return null}}}ca.GOOGLE_SIGN_IN_METHOD="google.com",ca.PROVIDER_ID="google.com";class ua extends oa{constructor(){super("github.com")}static credential(e){return ea._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ua.credential(t.oauthAccessToken)}catch(n){return null}}}ua.GITHUB_SIGN_IN_METHOD="github.com",ua.PROVIDER_ID="github.com";class ha extends Wo{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Zo(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Zo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Zo(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new ha(n,i):null}static _create(e,t){return new ha(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class da extends sa{constructor(e){js(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return da.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return da.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=ha.fromJSON(e);return js(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return ha._create(r,n)}catch(i){return null}}}class fa extends oa{constructor(){super("twitter.com")}static credential(e,t){return ea._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return fa.credential(n,r)}catch(i){return null}}}async function pa(e,t){return Ys(e,"POST","/v1/accounts:signUp",Ks(e,t))}fa.TWITTER_SIGN_IN_METHOD="twitter.com",fa.PROVIDER_ID="twitter.com";class ma{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await po._fromIdTokenResponse(e,n,r),s=ga(n);return new ma({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ga(n);return new ma({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ga(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class va extends zr{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,va.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new va(e,t,n,r)}}function ya(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw va._fromErrorAndOperation(e,n,t,r);throw n}))}function wa(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function ba(e,t){const n=Zr(e);await Sa(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Gs(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=wa(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function _a(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ao(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ma._forOperation(e,"link",r)}async function Sa(e,t,n){await uo(t);const r=!1===e?"provider-already-linked":"no-such-provider";js(wa(t.providerData).has(n)===e,t.auth,r)}async function Ia(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await ao(e,ya(r,i,t,e),n);js(s.idToken,r,"internal-error");const o=oo(s.idToken);js(o,r,"internal-error");const{sub:a}=o;return js(e.uid===a,r,"user-mismatch"),ma._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&As(r,"user-mismatch"),s}}async function Ea(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await ya(e,r,t),s=await ma._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function ka(e,t){return Ea(jo(e),t)}async function xa(e,t){const n=Zr(e);return await Sa(!1,n,t.providerId),_a(n,t)}async function Ta(e,t){return Ia(Zr(e),t)}async function Ca(e,t){const n=jo(e),r=await async function(e,t){return Ys(e,"POST","/v1/accounts:signInWithCustomToken",Ks(e,t))}(n,{token:t,returnSecureToken:!0}),i=await ma._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Na{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Aa._fromServerResponse(e,t):"totpInfo"in t?Pa._fromServerResponse(e,t):As(e,"internal-error")}}class Aa extends Na{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Aa(t)}}class Pa extends Na{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Pa(t)}}function Ra(e,t,n){var r;js((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),js("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(js(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(js(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Da(e){const t=jo(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Oa(e,t){await async function(e,t){return Gs(e,"POST","/v1/accounts:update",Ks(e,t))}(Zr(e),{oobCode:t})}async function ja(e,t){const n=Zr(e),r=await Ko(n,{oobCode:t}),i=r.requestType;switch(js(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":js(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":js(r.mfaInfo,n,"internal-error");default:js(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Na._fromServerResponse(jo(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function La(e,t){const n={identifier:t,continueUri:Fs()?Us():"http://localhost"},{signinMethods:r}=await async function(e,t){return Gs(e,"POST","/v1/accounts:createAuthUri",Ks(e,t))}(Zr(e),n);return r||[]}async function Ma(e,t){const n=Zr(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Ra(n.auth,r,t);const{email:i}=await async function(e,t){return Yo(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Ua(e,t,n){const r=Zr(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Ra(r.auth,i,n);const{email:s}=await async function(e,t){return Yo(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function Fa(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Zr(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await ao(i,async function(e,t){return Gs(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function Va(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await ao(e,async function(e,t){return Gs(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class za{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Ba extends za{constructor(e,t,n,r){super(e,t,n),this.username=r}}class qa extends za{constructor(e,t){super(e,"facebook.com",t)}}class Ha extends Ba{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Wa extends za{constructor(e,t){super(e,"google.com",t)}}class Ka extends Ba{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Ga(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=oo(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new za(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new qa(s,i);case"github.com":return new Ha(s,i);case"google.com":return new Wa(s,i);case"twitter.com":return new Ka(s,i,e.screenName||null);case"custom":case"anonymous":return new za(s,null);default:return new za(s,r,i)}}(n)}class Qa{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Qa("enroll",e,t)}static _fromMfaPendingCredential(e){return new Qa("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Qa._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Qa._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Ya{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=jo(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Na._fromServerResponse(n,e)));js(r.mfaPendingCredential,n,"internal-error");const s=Qa._fromMfaPendingCredential(r.mfaPendingCredential);return new Ya(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await ma._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return js(t.user,n,"internal-error"),ma._forOperation(t.user,t.operationType,o);default:As(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class Ja{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Na._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Ja(e)}async getSession(){return Qa._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await ao(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await ao(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},Gs(r,"POST","/v2/accounts/mfaEnrollment:withdraw",Ks(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(s){throw s}var r,i}}const $a=new WeakMap;const Xa="__sak";class Za{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xa,"1"),this.storage.removeItem(Xa),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class el extends Za{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=jr();return Io(e)||No(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Ao(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Fr()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}el.type="LOCAL";const tl=el;class nl extends Za{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}nl.type="SESSION";const rl=nl;class il{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new il(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function sl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}il.receivers=[];class ol{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=sl("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function al(){return window}function ll(){return"undefined"!==typeof al().WorkerGlobalScope&&"function"===typeof al().importScripts}const cl="firebaseLocalStorageDb",ul="firebaseLocalStorage",hl="fbase_key";class dl{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function fl(e,t){return e.transaction([ul],t?"readwrite":"readonly").objectStore(ul)}function pl(){const e=indexedDB.open(cl,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ul,{keyPath:hl})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ul)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(cl);return new dl(e).toPromise()}(),t(await pl()))}))}))}async function ml(e,t,n){const r=fl(e,!0).put({[hl]:t,value:n});return new dl(r).toPromise()}function gl(e,t){const n=fl(e,!0).delete(t);return new dl(n).toPromise()}class vl{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await pl()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ll()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=il._getInstance(ll()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ol(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pl();return await ml(e,Xa,"1"),await gl(e,Xa),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>ml(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=fl(e,!1).get(t),r=await new dl(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>gl(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=fl(e,!1).getAll();return new dl(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}vl.type="LOCAL";const yl=vl;const wl=1e12;class bl{constructor(e){this.auth=e,this.counter=wl,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new _l(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||wl;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||wl;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||wl;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class _l{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;js(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Sl=Uo("rcb"),Il=new zs(3e4,6e4);class El{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=al().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return js(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&eo(al().grecaptcha)?Promise.resolve(al().grecaptcha):new Promise(((n,r)=>{const i=al().setTimeout((()=>{r(Ps(e,"network-request-failed"))}),Il.get());al()[Sl]=()=>{al().clearTimeout(i),delete al()[Sl];const s=al().grecaptcha;if(!s||!eo(s))return void r(Ps(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Mo("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Gr({onload:Sl,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Ps(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=al().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class kl{async load(e){return new bl(e)}clearedOneInstance(){}}const xl="recaptcha",Tl={theme:"light",type:"image"};class Cl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Tl);this.parameters=n,this.type=xl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=jo(e),this.isInvisible="invisible"===this.parameters.size,js("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;js(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kl:new El,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){js(!this.parameters.sitekey,this.auth,"argument-error"),js(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),js("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=al()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){js(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){js(Fs()&&!ll(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Gs(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);js(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return js(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Nl{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=na._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Al(e,t,n){var r;const i=await n.verify();try{let s;if(js("string"===typeof i,e,"argument-error"),js(n.type===xl,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){js("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Gs(e,"POST","/v2/accounts/mfaEnrollment:start",Ks(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{js("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;js(n,e,"missing-multi-factor-info");const o=await function(e,t){return Gs(e,"POST","/v2/accounts/mfaSignIn:start",Ks(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Gs(e,"POST","/v1/accounts:sendVerificationCode",Ks(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Pl{constructor(e){this.providerId=Pl.PROVIDER_ID,this.auth=jo(e)}verifyPhoneNumber(e,t){return Al(this.auth,e,Zr(t))}static credential(e,t){return na._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Pl.credentialFromTaggedObject(t)}static credentialFromError(e){return Pl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?na._fromTokenResponse(n,r):null}}function Rl(e,t){return t?go(t):(js(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Pl.PROVIDER_ID="phone",Pl.PHONE_SIGN_IN_METHOD="phone";class Dl extends Wo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Zo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ol(e){return Ea(e.auth,new Dl(e),e.bypassAuthState)}function jl(e){const{auth:t,user:n}=e;return js(n,t,"internal-error"),Ia(n,new Dl(e),e.bypassAuthState)}async function Ll(e){const{auth:t,user:n}=e;return js(n,t,"internal-error"),_a(n,new Dl(e),e.bypassAuthState)}class Ml{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ol;case"linkViaPopup":case"linkViaRedirect":return Ll;case"reauthViaPopup":case"reauthViaRedirect":return jl;default:As(this.auth,"internal-error")}}resolve(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ul=new zs(2e3,1e4);class Fl extends Ml{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Fl.currentPopupAction&&Fl.currentPopupAction.cancel(),Fl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return js(e,this.auth,"internal-error"),e}async onExecution(){Ms(1===this.filter.length,"Popup operations only handle one event");const e=sl();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Ps(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ps(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Ul.get())};e()}}Fl.currentPopupAction=null;const Vl="pendingRedirect",zl=new Map;class Bl extends Ml{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=zl.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Kl(t),r=Wl(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}zl.set(this.auth._key(),e)}return this.bypassAuthState||zl.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function ql(e,t){return Wl(e)._set(Kl(t),"true")}function Hl(e,t){zl.set(e._key(),t)}function Wl(e){return go(e._redirectPersistence)}function Kl(e){return wo(Vl,e.config.apiKey,e.name)}function Gl(e,t,n){return async function(e,t,n){const r=jo(e);Ds(e,t,sa),await r._initializationPromise;const i=Rl(r,n);return await ql(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Ql(e,t,n){return async function(e,t,n){const r=Zr(e);Ds(r.auth,t,sa),await r.auth._initializationPromise;const i=Rl(r.auth,n);await ql(i,r.auth);const s=await $l(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function Yl(e,t,n){return async function(e,t,n){const r=Zr(e);Ds(r.auth,t,sa),await r.auth._initializationPromise;const i=Rl(r.auth,n);await Sa(!1,r,t.providerId),await ql(i,r.auth);const s=await $l(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function Jl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=jo(e),i=Rl(r,t),s=new Bl(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function $l(e){const t=sl("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Xl{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ec(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ec(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ps(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zl(e))}saveEventToCache(e){this.cachedEventUids.add(Zl(e)),this.lastProcessedEventTime=Date.now()}}function Zl(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function ec(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function tc(e){return Gs(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const nc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rc=/^https?/;function ic(e){const t=Us(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!rc.test(n))return!1;if(nc.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const sc=new zs(3e4,6e4);function oc(){const e=al().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let ac=null;function lc(e){return ac=ac||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){oc(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{oc(),n(Ps(e,"network-request-failed"))},timeout:sc.get()})}if(null===(i=null===(r=al().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=al().gapi)||void 0===s?void 0:s.load)){const t=Uo("iframefcb");return al()[t]=()=>{gapi.load?o():n(Ps(e,"network-request-failed"))},Mo("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw ac=null,e}))}(e),ac}const cc=new zs(5e3,15e3),uc="__/auth/iframe",hc="emulator/auth/iframe",dc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pc(e){const t=e.config;js(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Bs(t,hc):"https://".concat(e.config.authDomain,"/").concat(uc),r={apiKey:t.apiKey,appName:e.name,v:Wi},i=fc.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Gr(r).slice(1))}const mc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class gc{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function vc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},mc),{width:r.toString(),height:i.toString(),top:s,left:o}),c=jr().toLowerCase();n&&(a=Eo(c)?"_blank":n),So(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return No(arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new gc(null);const h=window.open(t||"",a,u);js(h,e,"popup-blocked");try{h.focus()}catch(d){}return new gc(h)}const yc="__/auth/handler",wc="emulator/auth/handler",bc=encodeURIComponent("fac");async function _c(e,t,n,r,i,s){js(e.config.authDomain,e,"auth-domain-config-required"),js(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Wi,eventId:i};if(t instanceof sa){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof oa){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(bc,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(yc);return Bs(t,wc)}(e),"?").concat(Gr(a).slice(1)).concat(c)}const Sc="webStorageSupport";const Ic=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rl,this._completeRedirectFn=Jl,this._overrideRedirectResult=Hl}async _openPopup(e,t,n,r){var i;Ms(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return vc(e,await _c(e,t,n,Us(),r),sl())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){al().location.href=e}(await _c(e,t,n,Us(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Ms(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await lc(e),n=al().gapi;return js(n,e,"internal-error"),t.open({where:document.body,url:pc(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dc,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ps(e,"network-request-failed"),s=al().setTimeout((()=>{r(i)}),cc.get());function o(){al().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new Xl(e);return t.register("authEvent",(t=>{js(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sc,{type:Sc},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Sc];void 0!==i&&t(!!i),As(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await tc(e);for(const r of t)try{if(ic(r))return}catch(n){}As(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ao()||Io()||No()}};class Ec{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ls("unexpected MultiFactorSessionType")}}}class kc extends Ec{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new kc(e)}_finalizeEnroll(e,t,n){return function(e,t){return Gs(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ks(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Gs(e,"POST","/v2/accounts/mfaSignIn:finalize",Ks(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class xc{constructor(){}static assertion(e){return kc._fromCredential(e)}}xc.FACTOR_ID="phone";var Tc="@firebase/auth",Cc="1.5.0";class Nc{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){js(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Pr())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var Ac;function Pc(){return window}Ac="Browser",Fi(new ei("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;js(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Ac,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Po(Ac)},c=new Oo(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(go);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Fi(new ei("auth-internal",(e=>(e=>new Nc(e))(jo(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Ji(Tc,Cc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ac)),Ji(Tc,Cc,"esm2017");async function Rc(e,t,n){var r;const{BuildInfo:i}=Pc();Ms(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Ms(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return No()?o.ibi=i.packageName:xo()?o.apn=i.packageName:As(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,_c(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function Dc(e){const{cordova:t}=Pc();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Oc=20;class jc extends Xl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Lc(e){const t=await Fc()._get(Vc(e));return t&&await Fc()._remove(Vc(e)),t}function Mc(e,t){var n,r;const i=function(e){const t=zc(e),n=t.link?decodeURIComponent(t.link):void 0,r=zc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return zc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=zc(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Ps(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Uc(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Oc;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Fc(){return go(tl)}function Vc(e){return wo("authEvent",e.config.apiKey,e.name)}function zc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Qr(n.join("?"))}const Bc=class{constructor(){this._redirectPersistence=rl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Jl,this._overrideRedirectResult=Hl}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new jc(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){As(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=Pc();js("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),js("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),js("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),js("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),js("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),zl.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Uc(),postBody:null,tenantId:e.tenantId,error:Ps(e,"no-auth-event")}}(e,n,r);await function(e,t){return Fc()._set(Vc(e),t)}(e,s);const o=await Rc(e,s,t);return async function(e,t,n){const{cordova:r}=Pc();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(Ps(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),xo()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await Dc(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Pc(),n={};No()?n.iosBundleId=t.packageName:xo()?n.androidPackageName=t.packageName:As(e,"operation-not-supported-in-this-environment"),await tc(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Pc(),s=setTimeout((async()=>{await Lc(e),t.onEvent(qc())}),500),o=async n=>{clearTimeout(s);const r=await Lc(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Mc(r,n.url)),t.onEvent(i||qc())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");Pc().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function qc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ps("no-auth-event")}}function Hc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Wc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr();return!("file:"!==Hc()&&"ionic:"!==Hc()&&"capacitor:"!==Hc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr();return Fr()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr();return/Edge\/\d+/.test(e)}(e)}function Gc(){try{const e=self.localStorage,t=sl();if(e)return e.setItem(t,"1"),e.removeItem(t),!Kc()||Vr()}catch(e){return Qc()&&Vr()}return!1}function Qc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Yc(){return("http:"===Hc()||"https:"===Hc()||Mr()||Wc())&&!(Ur()||Lr())&&Gc()&&!Qc()}function Jc(){return Wc()&&"undefined"!==typeof document}const $c={LOCAL:"local",NONE:"none",SESSION:"session"},Xc=js,Zc="persistence";async function eu(e){await e._initializationPromise;const t=tu(),n=wo(Zc,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function tu(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const nu=js;class ru{constructor(){this.browserResolver=go(Ic),this.cordovaResolver=go(Bc),this.underlyingResolver=null,this._redirectPersistence=rl,this._completeRedirectFn=Jl,this._overrideRedirectResult=Hl}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Jc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return nu(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Jc()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function iu(e){return e.unwrap()}function su(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new cu(e,function(e,t){var n;const r=Zr(e),i=t;return js(t.customData.operationType,r,"argument-error"),js(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ya._fromError(r,i)}(e,t))}else if(r){const e=ou(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function ou(e){const{_tokenResponse:t}=e instanceof zr?e.customData:e;if(!t)return null;if(!(e instanceof zr)&&"temporaryProof"in t&&"phoneNumber"in t)return Pl.credentialFromResult(e);const n=t.providerId;if(!n||n===vs.PASSWORD)return null;let r;switch(n){case vs.GOOGLE:r=ca;break;case vs.FACEBOOK:r=la;break;case vs.GITHUB:r=ua;break;case vs.TWITTER:r=fa;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?ha._create(n,o):ea._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new aa(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof zr?r.credentialFromError(e):r.credentialFromResult(e)}function au(e,t){return t.catch((t=>{throw t instanceof zr&&su(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,ou(r)),additionalUserInfo:Ga(e),user:uu.getOrCreate(n)};var r}))}async function lu(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>au(e,n.confirm(t))}}class cu{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return au(iu(this.auth),this.resolver.resolveSignIn(e))}}class uu{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Zr(e);return $a.has(t)||$a.set(t,Ja._fromUser(t)),$a.get(t)}(e)}static getOrCreate(e){return uu.USER_MAP.has(e)||uu.USER_MAP.set(e,new uu(e)),uu.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return au(this.auth,xa(this._delegate,e))}async linkWithPhoneNumber(e,t){return lu(this.auth,async function(e,t,n){const r=Zr(e);await Sa(!1,r,"phone");const i=await Al(r.auth,t,Zr(n));return new Nl(i,(e=>xa(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return au(this.auth,async function(e,t,n){const r=Zr(e);Ds(r.auth,t,sa);const i=Rl(r.auth,n);return new Fl(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,ru))}async linkWithRedirect(e){return await eu(jo(this.auth)),Yl(this._delegate,e,ru)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return au(this.auth,Ta(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return lu(this.auth,async function(e,t,n){const r=Zr(e),i=await Al(r.auth,t,Zr(n));return new Nl(i,(e=>Ta(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return au(this.auth,async function(e,t,n){const r=Zr(e);Ds(r.auth,t,sa);const i=Rl(r.auth,n);return new Fl(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,ru))}async reauthenticateWithRedirect(e){return await eu(jo(this.auth)),Ql(this._delegate,e,ru)}sendEmailVerification(e){return Ma(this._delegate,e)}async unlink(e){return await ba(this._delegate,e),this}updateEmail(e){return function(e,t){return Va(Zr(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return Va(Zr(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await _a(Zr(e),t)}(this._delegate,e)}updateProfile(e){return Fa(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Ua(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}uu.USER_MAP=new WeakMap;const hu=js;class du{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;hu(n,"invalid-api-key",{appName:e.name}),hu(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?ru:void 0;this._delegate=t.initialize({options:{persistence:pu(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(ks),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?uu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Bo(this._delegate,e,t)}applyActionCode(e){return Oa(this._delegate,e)}checkActionCode(e){return ja(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Ko(Zr(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Da(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return au(this._delegate,async function(e,t,n){const r=jo(e),i=zo(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pa),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Da(e),t})),o=await ma._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return La(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=ra.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){hu(Yc(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await jo(e)._initializationPromise,Jl(e,t,!1)}(this._delegate,ru);return e?au(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){jo(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=fu(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=fu(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=jo(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){js(t.handleCodeInApp,r,"argument-error"),t&&Ra(r,e,t)}(i,n),await zo(r,i,"getOobCode",$o)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=jo(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Ra(r,i,n),await zo(r,i,"getOobCode",Jo)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){Xc(Object.values($c).includes(t),e,"invalid-persistence-type"),Ur()?Xc(t!==$c.SESSION,e,"unsupported-persistence-type"):Lr()?Xc(t===$c.NONE,e,"unsupported-persistence-type"):Qc()?Xc(t===$c.NONE||t===$c.LOCAL&&Vr(),e,"unsupported-persistence-type"):Xc(t===$c.NONE||Gc(),e,"unsupported-persistence-type")}(this._delegate,e),e){case $c.SESSION:t=rl;break;case $c.LOCAL:t=await go(yl)._isAvailable()?yl:tl;break;case $c.NONE:t=yo;break;default:return As("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return au(this._delegate,async function(e){var t;const n=jo(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new ma({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await pa(n,{returnSecureToken:!0}),i=await ma._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return au(this._delegate,ka(this._delegate,e))}signInWithCustomToken(e){return au(this._delegate,Ca(this._delegate,e))}signInWithEmailAndPassword(e,t){return au(this._delegate,function(e,t,n){return ka(Zr(e),ia.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Da(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return au(this._delegate,async function(e,t,n){const r=Zr(e),i=ia.credentialWithLink(t,n||Us());return js(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ka(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return lu(this._delegate,async function(e,t,n){const r=jo(e),i=await Al(r,t,Zr(n));return new Nl(i,(e=>ka(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return hu(Yc(),this._delegate,"operation-not-supported-in-this-environment"),au(this._delegate,async function(e,t,n){const r=jo(e);Ds(e,t,sa);const i=Rl(r,n);return new Fl(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,ru))}async signInWithRedirect(e){return hu(Yc(),this._delegate,"operation-not-supported-in-this-environment"),await eu(this._delegate),Gl(this._delegate,e,ru)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await ja(Zr(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function fu(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&uu.getOrCreate(e)),error:t,complete:n}}function pu(e,t){const n=function(e,t){const n=tu();if(!n)return[];const r=wo(Zc,e,t);switch(n.getItem(r)){case $c.NONE:return[yo];case $c.LOCAL:return[yl,rl];case $c.SESSION:return[rl];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(yl)||n.push(yl),"undefined"!==typeof window)for(const r of[tl,rl])n.includes(r)||n.push(r);return n.includes(yo)||n.push(yo),n}du.Persistence=$c;class mu{constructor(){this.providerId="phone",this._delegate=new Pl(iu(ms.auth()))}static credential(e,t){return Pl.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}mu.PHONE_SIGN_IN_METHOD=Pl.PHONE_SIGN_IN_METHOD,mu.PROVIDER_ID=Pl.PROVIDER_ID;const gu=js;class vu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ms.app();var r;gu(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Cl(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var yu;(yu=ms).INTERNAL.registerComponent(new ei("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new du(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ys,PASSWORD_RESET:ws,RECOVER_EMAIL:bs,REVERT_SECOND_FACTOR_ADDITION:_s,VERIFY_AND_CHANGE_EMAIL:Ss,VERIFY_EMAIL:Is}},EmailAuthProvider:ia,FacebookAuthProvider:la,GithubAuthProvider:ua,GoogleAuthProvider:ca,OAuthProvider:aa,SAMLAuthProvider:da,PhoneAuthProvider:mu,PhoneMultiFactorGenerator:xc,RecaptchaVerifier:vu,TwitterAuthProvider:fa,Auth:du,AuthCredential:Wo,Error:zr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),yu.registerVersion("@firebase/auth-compat","0.5.0");var wu,bu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},_u={},Su=Su||{},Iu=bu||self;function Eu(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ku(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var xu="closure_uid_"+(1e9*Math.random()>>>0),Tu=0;function Cu(e,t,n){return e.call.apply(e.bind,arguments)}function Nu(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Au(e,t,n){return(Au=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Cu:Nu).apply(null,arguments)}function Pu(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ru(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Du(){this.s=this.s,this.o=this.o}Du.prototype.s=!1,Du.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,xu)&&e[xu]||(e[xu]=++Tu))},Du.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ou=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function ju(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Lu(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Eu(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Mu(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Mu.prototype.h=function(){this.defaultPrevented=!0};var Uu=function(){if(!Iu.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Iu.addEventListener("test",e,t),Iu.removeEventListener("test",e,t)}catch(n){}return e}();function Fu(e){return/^[\s\xa0]*$/.test(e)}function Vu(){var e=Iu.navigator;return e&&(e=e.userAgent)?e:""}function zu(e){return-1!=Vu().indexOf(e)}function Bu(e){return Bu[" "](e),e}Bu[" "]=function(){};var qu,Hu,Wu=zu("Opera"),Ku=zu("Trident")||zu("MSIE"),Gu=zu("Edge"),Qu=Gu||Ku,Yu=zu("Gecko")&&!(-1!=Vu().toLowerCase().indexOf("webkit")&&!zu("Edge"))&&!(zu("Trident")||zu("MSIE"))&&!zu("Edge"),Ju=-1!=Vu().toLowerCase().indexOf("webkit")&&!zu("Edge");function $u(){var e=Iu.document;return e?e.documentMode:void 0}e:{var Xu="",Zu=function(){var e=Vu();return Yu?/rv:([^\);]+)(\)|;)/.exec(e):Gu?/Edge\/([\d\.]+)/.exec(e):Ku?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ju?/WebKit\/(\S+)/.exec(e):Wu?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Zu&&(Xu=Zu?Zu[1]:""),Ku){var eh=$u();if(null!=eh&&eh>parseFloat(Xu)){qu=String(eh);break e}}qu=Xu}if(Iu.document&&Ku){var th=$u();Hu=th||(parseInt(qu,10)||void 0)}else Hu=void 0;var nh=Hu;function rh(e,t){if(Mu.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Yu){e:{try{Bu(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ih[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&rh.$.h.call(this)}}Ru(rh,Mu);var ih={2:"touch",3:"pen",4:"mouse"};rh.prototype.h=function(){rh.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var sh="closure_listenable_"+(1e6*Math.random()|0),oh=0;function ah(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++oh,this.fa=this.ia=!1}function lh(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ch(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function uh(e){const t={};for(const n in e)t[n]=e[n];return t}const hh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dh(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<hh.length;t++)n=hh[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function fh(e){this.src=e,this.g={},this.h=0}function ph(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Ou(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(lh(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function mh(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}fh.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=mh(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new ah(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var gh="closure_lm_"+(1e6*Math.random()|0),vh={};function yh(e,t,n,r,i){if(r&&r.once)return bh(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)yh(e,t[s],n,r,i);return null}return n=Th(n),e&&e[sh]?e.O(t,n,ku(r)?!!r.capture:!!r,i):wh(e,t,n,!1,r,i)}function wh(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=ku(i)?!!i.capture:!!i,a=kh(e);if(a||(e[gh]=a=new fh(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Eh;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Uu||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ih(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function bh(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)bh(e,t[s],n,r,i);return null}return n=Th(n),e&&e[sh]?e.P(t,n,ku(r)?!!r.capture:!!r,i):wh(e,t,n,!0,r,i)}function _h(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)_h(e,t[s],n,r,i);else r=ku(r)?!!r.capture:!!r,n=Th(n),e&&e[sh]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=mh(s=e.g[t],n,r,i))&&(lh(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=kh(e))&&(t=e.g[t.toString()],e=-1,t&&(e=mh(t,n,r,i)),(n=-1<e?t[e]:null)&&Sh(n))}function Sh(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[sh])ph(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ih(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=kh(t))?(ph(n,e),0==n.h&&(n.src=null,t[gh]=null)):lh(e)}}}function Ih(e){return e in vh?vh[e]:vh[e]="on"+e}function Eh(e,t){if(e.fa)e=!0;else{t=new rh(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Sh(e),e=n.call(r,t)}return e}function kh(e){return(e=e[gh])instanceof fh?e:null}var xh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Th(e){return"function"===typeof e?e:(e[xh]||(e[xh]=function(t){return e.handleEvent(t)}),e[xh])}function Ch(){Du.call(this),this.i=new fh(this),this.S=this,this.J=null}function Nh(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Mu(t,e);else if(t instanceof Mu)t.target=t.target||e;else{var i=t;dh(t=new Mu(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Ah(o,r,!0,t)&&i}if(i=Ah(o=t.g=e,r,!0,t)&&i,i=Ah(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Ah(o=t.g=n[s],r,!1,t)&&i}function Ah(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&ph(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Ru(Ch,Du),Ch.prototype[sh]=!0,Ch.prototype.removeEventListener=function(e,t,n,r){_h(this,e,t,n,r)},Ch.prototype.N=function(){if(Ch.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)lh(n[r]);delete t.g[e],t.h--}}this.J=null},Ch.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ch.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ph=Iu.JSON.stringify;function Rh(){var e=Fh;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Dh=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Oh),(e=>e.reset()));class Oh{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function jh(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Lh(e){Iu.setTimeout((()=>{throw e}),0)}let Mh,Uh=!1,Fh=new class{constructor(){this.h=this.g=null}add(e,t){const n=Dh.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Vh=()=>{const e=Iu.Promise.resolve(void 0);Mh=()=>{e.then(zh)}};var zh=()=>{for(var e;e=Rh();){try{e.h.call(e.g)}catch(n){Lh(n)}var t=Dh;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Uh=!1};function Bh(e,t){Ch.call(this),this.h=e||1,this.g=t||Iu,this.j=Au(this.qb,this),this.l=Date.now()}function qh(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Hh(e,t,n){if("function"===typeof e)n&&(e=Au(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Au(e.handleEvent,e)}return 2147483647<Number(t)?-1:Iu.setTimeout(e,t||0)}function Wh(e){e.g=Hh((()=>{e.g=null,e.i&&(e.i=!1,Wh(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Ru(Bh,Ch),(wu=Bh.prototype).ga=!1,wu.T=null,wu.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Nh(this,"tick"),this.ga&&(qh(this),this.start()))}},wu.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wu.N=function(){Bh.$.N.call(this),qh(this),delete this.g};class Kh extends Du{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Wh(this)}N(){super.N(),this.g&&(Iu.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gh(e){Du.call(this),this.h=e,this.g={}}Ru(Gh,Du);var Qh=[];function Yh(e,t,n,r){Array.isArray(n)||(n&&(Qh[0]=n.toString()),n=Qh);for(var i=0;i<n.length;i++){var s=yh(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Jh(e){ch(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Sh(e)}),e),e.g={}}function $h(){this.g=!0}function Xh(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ph(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Gh.prototype.N=function(){Gh.$.N.call(this),Jh(this)},Gh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$h.prototype.Ea=function(){this.g=!1},$h.prototype.info=function(){};var Zh={},ed=null;function td(){return ed=ed||new Ch}function nd(e){Mu.call(this,Zh.Ta,e)}function rd(e){const t=td();Nh(t,new nd(t))}function id(e,t){Mu.call(this,Zh.STAT_EVENT,e),this.stat=t}function sd(e){const t=td();Nh(t,new id(t,e))}function od(e,t){Mu.call(this,Zh.Ua,e),this.size=t}function ad(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Iu.setTimeout((function(){e()}),t)}Zh.Ta="serverreachability",Ru(nd,Mu),Zh.STAT_EVENT="statevent",Ru(id,Mu),Zh.Ua="timingevent",Ru(od,Mu);var ld={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},cd={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ud(){}function hd(e){return e.h||(e.h=e.i())}function dd(){}ud.prototype.h=null;var fd,pd={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function md(){Mu.call(this,"d")}function gd(){Mu.call(this,"c")}function vd(){}function yd(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Gh(this),this.P=bd,e=Qu?125:void 0,this.V=new Bh(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new wd}function wd(){this.i=null,this.g="",this.h=!1}Ru(md,Mu),Ru(gd,Mu),Ru(vd,ud),vd.prototype.g=function(){return new XMLHttpRequest},vd.prototype.i=function(){return{}},fd=new vd;var bd=45e3,_d={},Sd={};function Id(e,t,n){e.L=1,e.A=Bd(Md(t)),e.u=n,e.S=!0,Ed(e,null)}function Ed(e,t){e.G=Date.now(),Cd(e),e.B=Md(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),tf(n.i,"t",r),e.o=0,n=e.l.J,e.h=new wd,e.g=rp(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Kh(Au(e.Pa,e,e.g),e.O)),Yh(e.U,e.g,"readystatechange",e.nb),t=e.I?uh(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),rd(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function kd(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function xd(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Td(e,n),r==Sd){4==t&&(e.s=4,sd(14),i=!1),Xh(e.j,e.m,null,"[Incomplete Response]");break}if(r==_d){e.s=4,sd(15),Xh(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Xh(e.j,e.m,r,null),Dd(e,r)}kd(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,sd(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Yf(t),t.M=!0,sd(11))):(Xh(e.j,e.m,n,"[Invalid Chunked Response]"),Rd(e),Pd(e))}function Td(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Sd:(n=Number(t.substring(n,r)),isNaN(n)?_d:(r+=1)+n>t.length?Sd:(t=t.slice(r,r+n),e.o=r+n,t))}function Cd(e){e.Y=Date.now()+e.P,Nd(e,e.P)}function Nd(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=ad(Au(e.lb,e),t)}function Ad(e){e.C&&(Iu.clearTimeout(e.C),e.C=null)}function Pd(e){0==e.l.H||e.J||Xf(e.l,e)}function Rd(e){Ad(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,qh(e.V),Jh(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Dd(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||cf(n.i,e)))if(!e.K&&cf(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;$f(n),zf(n)}Qf(n),sd(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ad(Au(n.ib,n),6e3));if(1>=lf(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else ep(n,11)}else if((e.K||n.g==e)&&$f(n),!Fu(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(uf(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,zd(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=np(r,r.J?r.pa:null,r.Y),o.K){hf(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Ad(a),Cd(a)),r.g=o}else Gf(r);0<n.j.length&&qf(n)}else"stop"!=c[0]&&"close"!=c[0]||ep(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ep(n,7):Vf(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}rd()}catch(c){}}function Od(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Eu(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Eu(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Eu(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(wu=yd.prototype).setTimeout=function(e){this.P=e},wu.nb=function(e){e=e.target;const t=this.M;t&&3==Of(e)?t.l():this.Pa(e)},wu.Pa=function(e){try{if(e==this.g)e:{const u=Of(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Qu||this.g&&(this.h.h||this.g.ja()||jf(this.g)))){this.J||4!=u||7==t||rd(),Ad(this);var n=this.g.da();this.ca=n;t:if(kd(this)){var r=jf(this.g);e="";var i=r.length,s=4==Of(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Rd(this),Pd(this);var o="";break t}this.h.i=new Iu.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Fu(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,sd(12),Rd(this),Pd(this);break e}Xh(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dd(this,n)}this.S?(xd(this,u,o),Qu&&this.i&&3==u&&(Yh(this.U,this.V,"tick",this.mb),this.V.start())):(Xh(this.j,this.m,o,null),Dd(this,o)),4==u&&Rd(this),this.i&&!this.J&&(4==u?Xf(this.l,this):(this.i=!1,Cd(this)))}else(function(e){const t={};e=(e.g&&2<=Of(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Fu(e[r]))continue;var n=jh(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,sd(12)):(this.s=0,sd(13)),Rd(this),Pd(this)}}}catch(u){}},wu.mb=function(){if(this.g){var e=Of(this.g),t=this.g.ja();this.o<t.length&&(Ad(this),xd(this,e,t),this.i&&4!=e&&Cd(this))}},wu.cancel=function(){this.J=!0,Rd(this)},wu.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(rd(),sd(17)),Rd(this),this.s=2,Pd(this)):Nd(this,this.Y-e)};var jd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ld(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ld){this.h=e.h,Ud(this,e.j),this.s=e.s,this.g=e.g,Fd(this,e.m),this.l=e.l;var t=e.i,n=new $d;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Vd(this,n),this.o=e.o}else e&&(t=String(e).match(jd))?(this.h=!1,Ud(this,t[1]||"",!0),this.s=qd(t[2]||""),this.g=qd(t[3]||"",!0),Fd(this,t[4]),this.l=qd(t[5]||"",!0),Vd(this,t[6]||"",!0),this.o=qd(t[7]||"")):(this.h=!1,this.i=new $d(null,this.h))}function Md(e){return new Ld(e)}function Ud(e,t,n){e.j=n?qd(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Fd(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Vd(e,t,n){t instanceof $d?(e.i=t,function(e,t){t&&!e.j&&(Xd(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Zd(this,t),tf(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Hd(t,Yd)),e.i=new $d(t,e.h))}function zd(e,t,n){e.i.set(t,n)}function Bd(e){return zd(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function qd(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Hd(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Wd),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Wd(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ld.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Hd(t,Kd,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Hd(t,Kd,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Hd(n,"/"==n.charAt(0)?Qd:Gd,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Hd(n,Jd)),e.join("")};var Kd=/[#\/\?@]/g,Gd=/[#\?:]/g,Qd=/[#\?]/g,Yd=/[#\?@]/g,Jd=/#/g;function $d(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Xd(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Zd(e,t){Xd(e),t=nf(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ef(e,t){return Xd(e),t=nf(e,t),e.g.has(t)}function tf(e,t,n){Zd(e,t),0<n.length&&(e.i=null,e.g.set(nf(e,t),ju(n)),e.h+=n.length)}function nf(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(wu=$d.prototype).add=function(e,t){Xd(this),this.i=null,e=nf(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},wu.forEach=function(e,t){Xd(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},wu.ta=function(){Xd(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},wu.Z=function(e){Xd(this);let t=[];if("string"===typeof e)ef(this,e)&&(t=t.concat(this.g.get(nf(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},wu.set=function(e,t){return Xd(this),this.i=null,ef(this,e=nf(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},wu.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},wu.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var rf=class{constructor(e,t){this.g=e,this.map=t}};function sf(e){this.l=e||of,Iu.PerformanceNavigationTiming?e=0<(e=Iu.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Iu.g&&Iu.g.Ka&&Iu.g.Ka()&&Iu.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var of=10;function af(e){return!!e.h||!!e.g&&e.g.size>=e.j}function lf(e){return e.h?1:e.g?e.g.size:0}function cf(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function uf(e,t){e.g?e.g.add(t):e.h=t}function hf(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function df(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return ju(e.i)}sf.prototype.cancel=function(){if(this.i=df(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ff,pf=class{stringify(e){return Iu.JSON.stringify(e,void 0)}parse(e){return Iu.JSON.parse(e,void 0)}};function mf(){this.g=new pf}function gf(e,t,n){const r=n||"";try{Od(e,(function(e,n){let i=e;ku(e)&&(i=Ph(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function vf(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function yf(e){this.l=e.ec||null,this.j=e.ob||!1}function wf(e,t){Ch.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=bf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ru(yf,ud),yf.prototype.g=function(){return new wf(this.l,this.j)},yf.prototype.i=(ff={},function(){return ff}),Ru(wf,Ch);var bf=0;function _f(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Sf(e){e.readyState=4,e.l=null,e.j=null,e.A=null,If(e)}function If(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(wu=wf.prototype).open=function(e,t){if(this.readyState!=bf)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,If(this)},wu.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Iu).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},wu.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sf(this)),this.readyState=bf},wu.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,If(this)),this.g&&(this.readyState=3,If(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Iu.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_f(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},wu.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Sf(this):If(this),3==this.readyState&&_f(this)}},wu.Za=function(e){this.g&&(this.response=this.responseText=e,Sf(this))},wu.Ya=function(e){this.g&&(this.response=e,Sf(this))},wu.ka=function(){this.g&&Sf(this)},wu.setRequestHeader=function(e,t){this.v.append(e,t)},wu.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},wu.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(wf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ef=Iu.JSON.parse;function kf(e){Ch.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=xf,this.L=this.M=!1}Ru(kf,Ch);var xf="",Tf=/^https?$/i,Cf=["POST","PUT"];function Nf(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Af(e),Rf(e)}function Af(e){e.F||(e.F=!0,Nh(e,"complete"),Nh(e,"error"))}function Pf(e){if(e.h&&"undefined"!=typeof Su&&(!e.C[1]||4!=Of(e)||2!=e.da()))if(e.v&&4==Of(e))Hh(e.La,0,e);else if(Nh(e,"readystatechange"),4==Of(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(jd)[1]||null;!i&&Iu.self&&Iu.self.location&&(i=Iu.self.location.protocol.slice(0,-1)),r=!Tf.test(i?i.toLowerCase():"")}n=r}if(n)Nh(e,"complete"),Nh(e,"success");else{e.m=6;try{var s=2<Of(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",Af(e)}}finally{Rf(e)}}}function Rf(e,t){if(e.g){Df(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Nh(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Df(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Iu.clearTimeout(e.A),e.A=null)}function Of(e){return e.g?e.g.readyState:0}function jf(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case xf:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Bp){return null}}function Lf(e){let t="";return ch(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mf(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lf(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):zd(e,t,n))}function Uf(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ff(e){this.Ga=0,this.j=[],this.l=new $h,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Uf("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Uf("baseRetryDelayMs",5e3,e),this.hb=Uf("retryDelaySeedMs",1e4,e),this.eb=Uf("forwardChannelMaxRetries",2,e),this.xa=Uf("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new sf(e&&e.concurrentRequestLimit),this.Ja=new mf,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Vf(e){if(Bf(e),3==e.H){var t=e.W++,n=Md(e.I);if(zd(n,"SID",e.K),zd(n,"RID",t),zd(n,"TYPE","terminate"),Wf(e,n),(t=new yd(e,e.l,t)).L=2,t.A=Bd(Md(n)),n=!1,Iu.navigator&&Iu.navigator.sendBeacon)try{n=Iu.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Iu.Image&&((new Image).src=t.A,n=!0),n||(t.g=rp(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Cd(t)}tp(e)}function zf(e){e.g&&(Yf(e),e.g.cancel(),e.g=null)}function Bf(e){zf(e),e.u&&(Iu.clearTimeout(e.u),e.u=null),$f(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Iu.clearTimeout(e.m),e.m=null)}function qf(e){if(!af(e.i)&&!e.m){e.m=!0;var t=e.Na;Mh||Vh(),Uh||(Mh(),Uh=!0),Fh.add(t,e),e.C=0}}function Hf(e,t){var n;n=t?t.m:e.W++;const r=Md(e.I);zd(r,"SID",e.K),zd(r,"RID",n),zd(r,"AID",e.V),Wf(e,r),e.o&&e.s&&Mf(r,e.o,e.s),n=new yd(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Kf(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),uf(e.i,n),Id(n,r,t)}function Wf(e,t){e.na&&ch(e.na,(function(e,n){zd(t,n,e)})),e.h&&Od({},(function(e,n){zd(t,n,e)}))}function Kf(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Au(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{gf(a,e,"req"+n+"_")}catch(sg){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Gf(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Mh||Vh(),Uh||(Mh(),Uh=!0),Fh.add(t,e),e.A=0}}function Qf(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=ad(Au(e.Ma,e),Zf(e,e.A)),e.A++,!0)}function Yf(e){null!=e.B&&(Iu.clearTimeout(e.B),e.B=null)}function Jf(e){e.g=new yd(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Md(e.wa);zd(t,"RID","rpc"),zd(t,"SID",e.K),zd(t,"AID",e.V),zd(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&zd(t,"TO",e.qa),zd(t,"TYPE","xmlhttp"),Wf(e,t),e.o&&e.s&&Mf(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Bd(Md(t)),n.u=null,n.S=!0,Ed(n,e)}function $f(e){null!=e.v&&(Iu.clearTimeout(e.v),e.v=null)}function Xf(e,t){var n=null;if(e.g==t){$f(e),Yf(e),e.g=null;var r=2}else{if(!cf(e.i,t))return;n=t.F,hf(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Nh(r=td(),new od(r,n)),qf(e)}else Gf(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(lf(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=ad(Au(e.Na,e,t),Zf(e,e.C)),e.C++,!0))}(e,t)||2==r&&Qf(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ep(e,5);break;case 4:ep(e,10);break;case 3:ep(e,6);break;default:ep(e,2)}}function Zf(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ep(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Au(e.pb,e);n||(n=new Ld("//www.google.com/images/cleardot.gif"),Iu.location&&"http"==Iu.location.protocol||Ud(n,"https"),Bd(n)),function(e,t){const n=new $h;if(Iu.Image){const r=new Image;r.onload=Pu(vf,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Pu(vf,n,r,"TestLoadImage: error",!1,t),r.onabort=Pu(vf,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Pu(vf,n,r,"TestLoadImage: timeout",!1,t),Iu.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else sd(2);e.H=0,e.h&&e.h.za(t),tp(e),Bf(e)}function tp(e){if(e.H=0,e.ma=[],e.h){const t=df(e.i);0==t.length&&0==e.j.length||(Lu(e.ma,t),Lu(e.ma,e.j),e.i.i.length=0,ju(e.j),e.j.length=0),e.h.ya()}}function np(e,t,n){var r=n instanceof Ld?Md(n):new Ld(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Fd(r,r.m);else{var i=Iu.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Ld(null);r&&Ud(s,r),t&&(s.g=t),i&&Fd(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&zd(r,n,t),zd(r,"VER",e.ra),Wf(e,r),r}function rp(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new kf(new yf({ob:n})):new kf(e.va)).Oa(e.J),t}function ip(){}function sp(){if(Ku&&!(10<=Number(nh)))throw Error("Environmental error: no available transport.")}function op(e,t){Ch.call(this),this.g=new Ff(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Fu(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Fu(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new cp(this)}function ap(e){md.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function lp(){gd.call(this),this.status=1}function cp(e){this.g=e}function up(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function hp(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function dp(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(wu=kf.prototype).Oa=function(e){this.M=e},wu.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():fd.g(),this.C=this.u?hd(this.u):hd(fd),this.g.onreadystatechange=Au(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Nf(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Iu.FormData&&e instanceof Iu.FormData,!(0<=Ou(Cf,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Df(this),0<this.B&&((this.L=function(e){return Ku&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Au(this.ua,this)):this.A=Hh(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Nf(this,s)}},wu.ua=function(){"undefined"!=typeof Su&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nh(this,"timeout"),this.abort(8))},wu.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Nh(this,"complete"),Nh(this,"abort"),Rf(this))},wu.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rf(this,!0)),kf.$.N.call(this)},wu.La=function(){this.s||(this.G||this.v||this.l?Pf(this):this.kb())},wu.kb=function(){Pf(this)},wu.isActive=function(){return!!this.g},wu.da=function(){try{return 2<Of(this)?this.g.status:-1}catch(ff){return-1}},wu.ja=function(){try{return this.g?this.g.responseText:""}catch(ff){return""}},wu.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ef(t)}},wu.Ia=function(){return this.m},wu.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(wu=Ff.prototype).ra=8,wu.H=1,wu.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new yd(this,this.l,e);let s=this.s;if(this.U&&(s?(s=uh(s),dh(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Kf(this,i,t),zd(n=Md(this.I),"RID",e),zd(n,"CVER",22),this.F&&zd(n,"X-HTTP-Session-Id",this.F),Wf(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lf(s)))+"&"+t:this.o&&Mf(n,this.o,s)),uf(this.i,i),this.bb&&zd(n,"TYPE","init"),this.P?(zd(n,"$req",t),zd(n,"SID","null"),i.aa=!0,Id(i,n,null)):Id(i,n,t),this.H=2}}else 3==this.H&&(e?Hf(this,e):0==this.j.length||af(this.i)||Hf(this))},wu.Ma=function(){if(this.u=null,Jf(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ad(Au(this.jb,this),e)}},wu.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,sd(10),zf(this),Jf(this))},wu.ib=function(){null!=this.v&&(this.v=null,zf(this),Qf(this),sd(19))},wu.pb=function(e){e?(this.l.info("Successfully pinged google.com"),sd(2)):(this.l.info("Failed to ping google.com"),sd(1))},wu.isActive=function(){return!!this.h&&this.h.isActive(this)},(wu=ip.prototype).Ba=function(){},wu.Aa=function(){},wu.za=function(){},wu.ya=function(){},wu.isActive=function(){return!0},wu.Va=function(){},sp.prototype.g=function(e,t){return new op(e,t)},Ru(op,Ch),op.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;sd(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=np(e,null,e.Y),qf(e)},op.prototype.close=function(){Vf(this.g)},op.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ph(e),e=n);t.j.push(new rf(t.fb++,e)),3==t.H&&qf(t)},op.prototype.N=function(){this.g.h=null,delete this.j,Vf(this.g),delete this.g,op.$.N.call(this)},Ru(ap,md),Ru(lp,gd),Ru(cp,ip),cp.prototype.Ba=function(){Nh(this.g,"a")},cp.prototype.Aa=function(e){Nh(this.g,new ap(e))},cp.prototype.za=function(e){Nh(this.g,new lp)},cp.prototype.ya=function(){Nh(this.g,"b")},Ru(up,(function(){this.blockSize=-1})),up.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},up.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)hp(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){hp(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){hp(this,r),i=0;break}}this.h=i,this.i+=t},up.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var fp={};function pp(e){return-128<=e&&128>e?function(e,t){var n=fp;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new dp([0|e],0>e?-1:0)})):new dp([0|e],0>e?-1:0)}function mp(e){if(isNaN(e)||!isFinite(e))return vp;if(0>e)return Sp(mp(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=gp;return new dp(t,0)}var gp=4294967296,vp=pp(0),yp=pp(1),wp=pp(16777216);function bp(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function _p(e){return-1==e.h}function Sp(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new dp(n,~e.h).add(yp)}function Ip(e,t){return e.add(Sp(t))}function Ep(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function kp(e,t){this.g=e,this.h=t}function xp(e,t){if(bp(t))throw Error("division by zero");if(bp(e))return new kp(vp,vp);if(_p(e))return t=xp(Sp(e),t),new kp(Sp(t.g),Sp(t.h));if(_p(t))return t=xp(e,Sp(t)),new kp(Sp(t.g),t.h);if(30<e.g.length){if(_p(e)||_p(t))throw Error("slowDivide_ only works with positive integers.");for(var n=yp,r=t;0>=r.X(e);)n=Tp(n),r=Tp(r);var i=Cp(n,1),s=Cp(r,1);for(r=Cp(r,2),n=Cp(n,2);!bp(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Cp(r,1),n=Cp(n,1)}return t=Ip(e,i.R(t)),new kp(i,t)}for(i=vp;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=mp(n)).R(t);_p(o)||0<o.X(e);)o=(s=mp(n-=r)).R(t);bp(s)&&(s=yp),i=i.add(s),e=Ip(e,o)}return new kp(i,e)}function Tp(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new dp(n,e.h)}function Cp(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new dp(i,e.h)}(wu=dp.prototype).ea=function(){if(_p(this))return-Sp(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:gp+r)*t,t*=gp}return e},wu.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(bp(this))return"0";if(_p(this))return"-"+Sp(this).toString(e);for(var t=mp(Math.pow(e,6)),n=this,r="";;){var i=xp(n,t).g,s=((0<(n=Ip(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(bp(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},wu.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},wu.X=function(e){return _p(e=Ip(this,e))?-1:bp(e)?0:1},wu.abs=function(){return _p(this)?Sp(this):this},wu.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new dp(n,-2147483648&n[n.length-1]?-1:0)},wu.R=function(e){if(bp(this)||bp(e))return vp;if(_p(this))return _p(e)?Sp(this).R(Sp(e)):Sp(Sp(this).R(e));if(_p(e))return Sp(this.R(Sp(e)));if(0>this.X(wp)&&0>e.X(wp))return mp(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,Ep(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Ep(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Ep(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Ep(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new dp(n,0)},wu.gb=function(e){return xp(this,e).h},wu.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new dp(n,this.h&e.h)},wu.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new dp(n,this.h|e.h)},wu.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new dp(n,this.h^e.h)},sp.prototype.createWebChannel=sp.prototype.g,op.prototype.send=op.prototype.u,op.prototype.open=op.prototype.m,op.prototype.close=op.prototype.close,ld.NO_ERROR=0,ld.TIMEOUT=8,ld.HTTP_ERROR=6,cd.COMPLETE="complete",dd.EventType=pd,pd.OPEN="a",pd.CLOSE="b",pd.ERROR="c",pd.MESSAGE="d",Ch.prototype.listen=Ch.prototype.O,kf.prototype.listenOnce=kf.prototype.P,kf.prototype.getLastError=kf.prototype.Sa,kf.prototype.getLastErrorCode=kf.prototype.Ia,kf.prototype.getStatus=kf.prototype.da,kf.prototype.getResponseJson=kf.prototype.Wa,kf.prototype.getResponseText=kf.prototype.ja,kf.prototype.send=kf.prototype.ha,kf.prototype.setWithCredentials=kf.prototype.Oa,up.prototype.digest=up.prototype.l,up.prototype.reset=up.prototype.reset,up.prototype.update=up.prototype.j,dp.prototype.add=dp.prototype.add,dp.prototype.multiply=dp.prototype.R,dp.prototype.modulo=dp.prototype.gb,dp.prototype.compare=dp.prototype.X,dp.prototype.toNumber=dp.prototype.ea,dp.prototype.toString=dp.prototype.toString,dp.prototype.getBits=dp.prototype.D,dp.fromNumber=mp,dp.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Sp(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=mp(Math.pow(n,8)),i=vp,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=mp(Math.pow(n,o)),i=i.R(o).add(mp(a))):i=(i=i.R(r)).add(mp(a))}return i};var Np=_u.createWebChannelTransport=function(){return new sp},Ap=_u.getStatEventTarget=function(){return td()},Pp=_u.ErrorCode=ld,Rp=_u.EventType=cd,Dp=_u.Event=Zh,Op=_u.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},jp=(_u.FetchXmlHttpFactory=yf,_u.WebChannel=dd),Lp=_u.XhrIo=kf,Mp=_u.Md5=up,Up=_u.Integer=dp;const Fp="@firebase/firestore";class Vp{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vp.UNAUTHENTICATED=new Vp(null),Vp.GOOGLE_CREDENTIALS=new Vp("google-credentials-uid"),Vp.FIRST_PARTY=new Vp("first-party-uid"),Vp.MOCK_USER=new Vp("mock-user");let zp="10.7.0";const Bp=new ui("@firebase/firestore");function qp(){return Bp.logLevel}function Hp(e){if(Bp.logLevel<=si.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gp);Bp.debug("Firestore (".concat(zp,"): ").concat(e),...i)}}function Wp(e){if(Bp.logLevel<=si.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gp);Bp.error("Firestore (".concat(zp,"): ").concat(e),...i)}}function Kp(e){if(Bp.logLevel<=si.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gp);Bp.warn("Firestore (".concat(zp,"): ").concat(e),...i)}}function Gp(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Qp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(zp,") INTERNAL ASSERTION FAILED: ")+e;throw Wp(t),new Error(t)}function Yp(e,t){e||Qp()}function Jp(e,t){return e}const $p={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xp extends zr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Zp{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class em{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class tm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Vp.UNAUTHENTICATED)))}shutdown(){}}class nm{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rm{constructor(e){this.t=e,this.currentUser=Vp.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Zp;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zp,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Hp("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Hp("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zp)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Hp("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Yp("string"==typeof t.accessToken),new em(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Yp(null===e||"string"==typeof e),new Vp(e)}}class im{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Vp.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sm{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new im(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Vp.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class om{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class am{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Hp("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Hp("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Hp("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Hp("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Yp("string"==typeof e.token),this.R=e.token,new om(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function lm(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class cm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=lm(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function um(e,t){return e<t?-1:e>t?1:0}function hm(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function dm(e){return e+"\0"}class fm{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xp($p.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xp($p.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Xp($p.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xp($p.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fm.fromMillis(Date.now())}static fromDate(e){return fm.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new fm(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?um(this.nanoseconds,e.nanoseconds):um(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class pm{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pm(e)}static min(){return new pm(new fm(0,0))}static max(){return new pm(new fm(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class mm{constructor(e,t,n){void 0===t?t=0:t>e.length&&Qp(),void 0===n?n=e.length-t:n>e.length-t&&Qp(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===mm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mm?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class gm extends mm{construct(e,t,n){return new gm(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Xp($p.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new gm(e)}static emptyPath(){return new gm([])}}const vm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ym extends mm{construct(e,t,n){return new ym(e,t,n)}static isValidIdentifier(e){return vm.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ym.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ym(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Xp($p.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Xp($p.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Xp($p.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Xp($p.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ym(t)}static emptyPath(){return new ym([])}}class wm{constructor(e){this.path=e}static fromPath(e){return new wm(gm.fromString(e))}static fromName(e){return new wm(gm.fromString(e).popFirst(5))}static empty(){return new wm(gm.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===gm.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return gm.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wm(new gm(e.slice()))}}class bm{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function _m(e){return e.fields.find((e=>2===e.kind))}function Sm(e){return e.fields.filter((e=>2!==e.kind))}bm.UNKNOWN_ID=-1;class Im{constructor(e,t){this.fieldPath=e,this.kind=t}}class Em{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Em(0,Tm.min())}}function km(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=pm.fromTimestamp(1e9===r?new fm(n+1,0):new fm(n,r));return new Tm(i,wm.empty(),t)}function xm(e){return new Tm(e.readTime,e.key,-1)}class Tm{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Tm(pm.min(),wm.empty(),-1)}static max(){return new Tm(pm.max(),wm.empty(),-1)}}function Cm(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=wm.comparator(e.documentKey,t.documentKey),0!==n?n:um(e.largestBatchId,t.largestBatchId))}const Nm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Am{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Pm(e){if(e.code!==$p.FAILED_PRECONDITION||e.message!==Nm)throw e;Hp("LocalStore","Unexpectedly lost primary lease")}class Rm{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qp(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Rm(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Rm?t:Rm.resolve(t)}catch(e){return Rm.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Rm.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Rm.reject(t)}static resolve(e){return new Rm(((t,n)=>{t(e)}))}static reject(e){return new Rm(((t,n)=>{n(e)}))}static waitFor(e){return new Rm(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Rm.resolve(!1);for(const n of e)t=t.next((e=>e?Rm.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Rm(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Rm(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Dm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Zp,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Lm(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=zm(t.target.error);this.V.reject(new Lm(e,n))}}static open(e,t,n,r){try{return new Dm(t,e.transaction(r,n))}catch(e){throw new Lm(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Hp("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Um(t)}}class Om{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Om.S(jr())&&Wp("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Hp("SimpleDb","Removing database:",e),Fm(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Vr())return!1;if(Om.C())return!0;const e=jr(),t=Om.S(e),n=0<t&&t<10,r=Om.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLERK_PUBLISHABLE_KEY:"pk_test_aG9seS1taW5ub3ctOTkuY2xlcmsuYWNjb3VudHMuZGV2JA",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAW1V1DfQ36scJduIpmX-cH8EQ9diHF5PQ"})||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Hp("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Lm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Xp($p.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Xp($p.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Lm(e,r))},r.onupgradeneeded=e=>{Hp("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Hp("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=Dm.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Rm.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Hp("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class jm{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Fm(this.k.delete())}}class Lm extends Xp{constructor(e,t){super($p.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Mm(e){return"IndexedDbTransactionError"===e.name}class Um{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Hp("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Hp("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Fm(n)}add(e){return Hp("SimpleDb","ADD",this.store.name,e,e),Fm(this.store.add(e))}get(e){return Fm(this.store.get(e)).next((t=>(void 0===t&&(t=null),Hp("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Hp("SimpleDb","DELETE",this.store.name,e),Fm(this.store.delete(e))}count(){return Hp("SimpleDb","COUNT",this.store.name),Fm(this.store.count())}W(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new Rm(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Rm(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Hp("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new Rm(((n,r)=>{t.onerror=e=>{const t=zm(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new Rm(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new jm(i),o=t(i.primaryKey,i.value,s);if(o instanceof Rm){const e=o.catch((e=>(s.done(),Rm.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>Rm.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Fm(e){return new Rm(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=zm(e.target.error);n(t)}}))}let Vm=!1;function zm(e){const t=Om.S(jr());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Xp("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Vm||(Vm=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Bm{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Hp("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Hp("IndexBackiller","Documents written: ".concat(await this.X.te()))}catch(e){Mm(e)?Hp("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await Pm(e)}await this.ee(6e4)}))}}class qm{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return Rm.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Hp("IndexBackiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Hp("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=xm(t);Cm(r,n)>0&&(n=r)})),new Tm(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Hm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Wm(e){return null==e}function Km(e){return 0===e&&1/e==-1/0}function Gm(e){return"number"==typeof e&&Number.isInteger(e)&&!Km(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Qm(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Jm(t)),t=Ym(e.get(n),t);return Jm(t)}function Ym(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Jm(e){return e+"\x01\x01"}function $m(e){const t=e.length;if(Yp(t>=2),2===t)return Yp("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),gm.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Qp(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Qp()}s=t+2}return new gm(r)}Hm._e=-1;const Xm=["userId","batchId"];function Zm(e,t){return[e,Qm(t)]}function eg(e,t,n){return[e,Qm(t),n]}const tg={},ng=["prefixPath","collectionGroup","readTime","documentId"],rg=["prefixPath","collectionGroup","documentId"],ig=["collectionGroup","readTime","prefixPath","documentId"],sg=["canonicalId","targetId"],og=["targetId","path"],ag=["path","targetId"],lg=["collectionId","parent"],cg=["indexId","uid"],ug=["uid","sequenceNumber"],hg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dg=["indexId","uid","orderedDocumentKey"],fg=["userId","collectionPath","documentId"],pg=["userId","collectionPath","largestBatchId"],mg=["userId","collectionGroup","largestBatchId"],gg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vg=[...gg,"documentOverlays"],yg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wg=yg,bg=[...wg,"indexConfiguration","indexState","indexEntries"];class _g extends Am{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Sg(e,t){const n=Jp(e);return Om.M(n.ae,t)}function Ig(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Eg(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function kg(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class xg{constructor(e,t){this.comparator=e,this.root=t||Cg.EMPTY}insert(e,t){return new xg(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cg.BLACK,null,null))}remove(e){return new xg(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cg.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tg(this.root,e,this.comparator,!0)}}class Tg{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cg{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Cg.RED,this.left=null!=r?r:Cg.EMPTY,this.right=null!=i?i:Cg.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Cg(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Cg.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Cg.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cg.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cg.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qp();if(this.right.isRed())throw Qp();const e=this.left.check();if(e!==this.right.check())throw Qp();return e+(this.isRed()?0:1)}}Cg.EMPTY=null,Cg.RED=!0,Cg.BLACK=!1,Cg.EMPTY=new class{constructor(){this.size=0}get key(){throw Qp()}get value(){throw Qp()}get color(){throw Qp()}get left(){throw Qp()}get right(){throw Qp()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Cg(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ng{constructor(e){this.comparator=e,this.data=new xg(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ag(this.data.getIterator())}getIteratorFrom(e){return new Ag(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Ng))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ng(this.comparator);return t.data=e,t}}class Ag{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pg(e){return e.hasNext()?e.getNext():void 0}class Rg{constructor(e){this.fields=e,e.sort(ym.comparator)}static empty(){return new Rg([])}unionWith(e){let t=new Ng(ym.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Rg(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hm(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Dg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Og{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Dg("Invalid base64 string: "+e):e}}(e);return new Og(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Og(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return um(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Og.EMPTY_BYTE_STRING=new Og("");const jg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lg(e){if(Yp(!!e),"string"==typeof e){let t=0;const n=jg.exec(e);if(Yp(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Mg(e.seconds),nanos:Mg(e.nanos)}}function Mg(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ug(e){return"string"==typeof e?Og.fromBase64String(e):Og.fromUint8Array(e)}function Fg(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Vg(e){const t=e.mapValue.fields.__previous_value__;return Fg(t)?Vg(t):t}function zg(e){const t=Lg(e.mapValue.fields.__local_write_time__.timestampValue);return new fm(t.seconds,t.nanos)}class Bg{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class qg{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qg("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qg&&e.projectId===this.projectId&&e.database===this.database}}const Hg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wg={nullValue:"NULL_VALUE"};function Kg(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Fg(e)?4:ov(e)?9007199254740991:10:Qp()}function Gg(e,t){if(e===t)return!0;const n=Kg(e);if(n!==Kg(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return zg(e).isEqual(zg(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Lg(e.timestampValue),r=Lg(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ug(e.bytesValue).isEqual(Ug(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Mg(e.geoPointValue.latitude)===Mg(t.geoPointValue.latitude)&&Mg(e.geoPointValue.longitude)===Mg(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Mg(e.integerValue)===Mg(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Mg(e.doubleValue),r=Mg(t.doubleValue);return n===r?Km(n)===Km(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return hm(e.arrayValue.values||[],t.arrayValue.values||[],Gg);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ig(n)!==Ig(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Gg(n[i],r[i])))return!1;return!0}(e,t);default:return Qp()}}function Qg(e,t){return void 0!==(e.values||[]).find((e=>Gg(e,t)))}function Yg(e,t){if(e===t)return 0;const n=Kg(e),r=Kg(t);if(n!==r)return um(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return um(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Mg(e.integerValue||e.doubleValue),r=Mg(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Jg(e.timestampValue,t.timestampValue);case 4:return Jg(zg(e),zg(t));case 5:return um(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ug(e),r=Ug(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=um(n[i],r[i]);if(0!==e)return e}return um(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=um(Mg(e.latitude),Mg(t.latitude));return 0!==n?n:um(Mg(e.longitude),Mg(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Yg(n[i],r[i]);if(e)return e}return um(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Hg.mapValue&&t===Hg.mapValue)return 0;if(e===Hg.mapValue)return 1;if(t===Hg.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=um(r[o],s[o]);if(0!==e)return e;const t=Yg(n[r[o]],i[s[o]]);if(0!==t)return t}return um(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Qp()}}function Jg(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return um(e,t);const n=Lg(e),r=Lg(t),i=um(n.seconds,r.seconds);return 0!==i?i:um(n.nanos,r.nanos)}function $g(e){return Xg(e)}function Xg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Lg(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ug(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return wm.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Xg(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Xg(e.fields[i]));return n+"}"}(e.mapValue):Qp()}function Zg(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ev(e){return!!e&&"integerValue"in e}function tv(e){return!!e&&"arrayValue"in e}function nv(e){return!!e&&"nullValue"in e}function rv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function iv(e){return!!e&&"mapValue"in e}function sv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Eg(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=sv(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=sv(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ov(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function av(e){return"nullValue"in e?Wg:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Zg(qg.empty(),wm.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Qp()}function lv(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Zg(qg.empty(),wm.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Hg:Qp()}function cv(e,t){const n=Yg(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function uv(e,t){const n=Yg(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class hv{constructor(e){this.value=e}static empty(){return new hv({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!iv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sv(t)}setAll(e){let t=ym.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=sv(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());iv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gg(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];iv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Eg(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new hv(sv(this.value))}}function dv(e){const t=[];return Eg(e.fields,((e,n)=>{const r=new ym([e]);if(iv(n)){const e=dv(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Rg(t)}class fv{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new fv(e,0,pm.min(),pm.min(),pm.min(),hv.empty(),0)}static newFoundDocument(e,t,n,r){return new fv(e,1,t,pm.min(),n,r,0)}static newNoDocument(e,t){return new fv(e,2,t,pm.min(),pm.min(),hv.empty(),0)}static newUnknownDocument(e,t){return new fv(e,3,t,pm.min(),pm.min(),hv.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pm.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hv.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hv.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pm.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fv&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fv(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class pv{constructor(e,t){this.position=e,this.inclusive=t}}function mv(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?wm.comparator(wm.fromName(o.referenceValue),n.key):Yg(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function gv(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Gg(e.position[n],t.position[n]))return!1;return!0}class vv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function yv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class wv{}class bv extends wv{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Av(e,t,n):"array-contains"===t?new Ov(e,n):"in"===t?new jv(e,n):"not-in"===t?new Lv(e,n):"array-contains-any"===t?new Mv(e,n):new bv(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Pv(e,n):new Rv(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Yg(t,this.value)):null!==t&&Kg(this.value)===Kg(t)&&this.matchesComparison(Yg(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qp()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _v extends wv{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new _v(e,t)}matches(e){return Sv(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Sv(e){return"and"===e.op}function Iv(e){return"or"===e.op}function Ev(e){return kv(e)&&Sv(e)}function kv(e){for(const t of e.filters)if(t instanceof _v)return!1;return!0}function xv(e){if(e instanceof bv)return e.field.canonicalString()+e.op.toString()+$g(e.value);if(Ev(e))return e.filters.map((e=>xv(e))).join(",");{const t=e.filters.map((e=>xv(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Tv(e,t){return e instanceof bv?function(e,t){return t instanceof bv&&e.op===t.op&&e.field.isEqual(t.field)&&Gg(e.value,t.value)}(e,t):e instanceof _v?function(e,t){return t instanceof _v&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Tv(n,t.filters[r])),!0)}(e,t):void Qp()}function Cv(e,t){const n=e.filters.concat(t);return _v.create(n,e.op)}function Nv(e){return e instanceof bv?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat($g(e.value))}(e):e instanceof _v?function(e){return e.op.toString()+" {"+e.getFilters().map(Nv).join(" ,")+"}"}(e):"Filter"}class Av extends bv{constructor(e,t,n){super(e,t,n),this.key=wm.fromName(n.referenceValue)}matches(e){const t=wm.comparator(e.key,this.key);return this.matchesComparison(t)}}class Pv extends bv{constructor(e,t){super(e,"in",t),this.keys=Dv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Rv extends bv{constructor(e,t){super(e,"not-in",t),this.keys=Dv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Dv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>wm.fromName(e.referenceValue)))}class Ov extends bv{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tv(t)&&Qg(t.arrayValue,this.value)}}class jv extends bv{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Qg(this.value.arrayValue,t)}}class Lv extends bv{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Qg(this.value.arrayValue,t)}}class Mv extends bv{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Qg(this.value.arrayValue,e)))}}class Uv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Fv(e){return new Uv(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Vv(e){const t=Jp(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>xv(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Wm(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>$g(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>$g(e))).join(",")),t.ce=e}return t.ce}function zv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!yv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Tv(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!gv(e.startAt,t.startAt)&&gv(e.endAt,t.endAt)}function Bv(e){return wm.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function qv(e,t){return e.filters.filter((e=>e instanceof bv&&e.field.isEqual(t)))}function Hv(e,t,n){let r=Wg,i=!0;for(const s of qv(e,t)){let e=Wg,t=!0;switch(s.op){case"<":case"<=":e=av(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Wg}cv({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];cv({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Wv(e,t,n){let r=Hg,i=!0;for(const s of qv(e,t)){let e=Hg,t=!0;switch(s.op){case">=":case">":e=lv(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Hg}uv({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];uv({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Kv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Gv(e,t,n,r,i,s,o,a){return new Kv(e,t,n,r,i,s,o,a)}function Qv(e){return new Kv(e)}function Yv(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Jv(e){return null!==e.collectionGroup}function $v(e){const t=Jp(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ng(ym.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new vv(r,n))})),e.has(ym.keyField().canonicalString())||t.le.push(new vv(ym.keyField(),n))}return t.le}function Xv(e){const t=Jp(e);return t.he||(t.he=Zv(t,$v(e))),t.he}function Zv(e,t){if("F"===e.limitType)return Fv(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new vv(e.field,t)}));const n=e.endAt?new pv(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new pv(e.startAt.position,e.startAt.inclusive):null;return Fv(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ey(e,t){const n=e.filters.concat([t]);return new Kv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ty(e,t,n){return new Kv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ny(e,t){return zv(Xv(e),Xv(t))&&e.limitType===t.limitType}function ry(e){return"".concat(Vv(Xv(e)),"|lt:").concat(e.limitType)}function iy(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Nv(e))).join(", "),"]")),Wm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>$g(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>$g(e))).join(",")),"Target(".concat(t,")")}(Xv(e)),"; limitType=").concat(e.limitType,")")}function sy(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):wm.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of $v(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=mv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,$v(e),t))&&!(e.endAt&&!function(e,t,n){const r=mv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,$v(e),t))}(e,t)}function oy(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ay(e){return(t,n)=>{let r=!1;for(const i of $v(e)){const e=ly(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ly(e,t,n){const r=e.field.isKeyField()?wm.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Yg(r,i):Qp()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Qp()}}class cy{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Eg(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return kg(this.inner)}size(){return this.innerSize}}const uy=new xg(wm.comparator);function hy(){return uy}const dy=new xg(wm.comparator);function fy(){let e=dy;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function py(e){let t=dy;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function my(){return vy()}function gy(){return vy()}function vy(){return new cy((e=>e.toString()),((e,t)=>e.isEqual(t)))}const yy=new xg(wm.comparator),wy=new Ng(wm.comparator);function by(){let e=wy;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const _y=new Ng(um);function Sy(){return _y}function Iy(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Km(t)?"-0":t}}function Ey(e){return{integerValue:""+e}}function ky(e,t){return Gm(t)?Ey(t):Iy(e,t)}class xy{constructor(){this._=void 0}}function Ty(e,t,n){return e instanceof Ay?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Fg(t)&&(t=Vg(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Py?Ry(e,t):e instanceof Dy?Oy(e,t):function(e,t){const n=Ny(e,t),r=Ly(n)+Ly(e.Ie);return ev(n)&&ev(e.Ie)?Ey(r):Iy(e.serializer,r)}(e,t)}function Cy(e,t,n){return e instanceof Py?Ry(e,t):e instanceof Dy?Oy(e,t):n}function Ny(e,t){return e instanceof jy?function(e){return ev(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ay extends xy{}class Py extends xy{constructor(e){super(),this.elements=e}}function Ry(e,t){const n=My(t);for(const r of e.elements)n.some((e=>Gg(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Dy extends xy{constructor(e){super(),this.elements=e}}function Oy(e,t){let n=My(t);for(const r of e.elements)n=n.filter((e=>!Gg(e,r)));return{arrayValue:{values:n}}}class jy extends xy{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Ly(e){return Mg(e.integerValue||e.doubleValue)}function My(e){return tv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Uy{constructor(e,t){this.field=e,this.transform=t}}class Fy{constructor(e,t){this.version=e,this.transformResults=t}}class Vy{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vy}static exists(e){return new Vy(void 0,e)}static updateTime(e){return new Vy(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zy(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class By{}function qy(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Zy(e.key,Vy.none()):new Qy(e.key,e.data,Vy.none());{const n=e.data,r=hv.empty();let i=new Ng(ym.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Yy(e.key,r,new Rg(i.toArray()),Vy.none())}}function Hy(e,t,n){e instanceof Qy?function(e,t,n){const r=e.value.clone(),i=$y(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Yy?function(e,t,n){if(!zy(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=$y(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Jy(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Wy(e,t,n,r){return e instanceof Qy?function(e,t,n,r){if(!zy(e.precondition,t))return n;const i=e.value.clone(),s=Xy(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Yy?function(e,t,n,r){if(!zy(e.precondition,t))return n;const i=Xy(e.fieldTransforms,r,t),s=t.data;return s.setAll(Jy(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return zy(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ky(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ny(r.transform,e||null);null!=i&&(null===n&&(n=hv.empty()),n.set(r.field,i))}return n||null}function Gy(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&hm(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Py&&t instanceof Py||e instanceof Dy&&t instanceof Dy?hm(e.elements,t.elements,Gg):e instanceof jy&&t instanceof jy?Gg(e.Ie,t.Ie):e instanceof Ay&&t instanceof Ay}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Qy extends By{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Yy extends By{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Jy(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function $y(e,t,n){const r=new Map;Yp(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Cy(o,a,n[i]))}return r}function Xy(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ty(e,s,t))}return r}class Zy extends By{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ew extends By{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tw{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Hy(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Wy(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Wy(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=gy();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=qy(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(pm.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),by())}isEqual(e){return this.batchId===e.batchId&&hm(this.mutations,e.mutations,((e,t)=>Gy(e,t)))&&hm(this.baseMutations,e.baseMutations,((e,t)=>Gy(e,t)))}}class nw{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Yp(e.mutations.length===n.length);let r=yy;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new nw(e,t,n,r)}}class rw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class iw{constructor(e,t){this.count=e,this.unchangedNames=t}}var sw,ow;function aw(e){switch(e){default:return Qp();case $p.CANCELLED:case $p.UNKNOWN:case $p.DEADLINE_EXCEEDED:case $p.RESOURCE_EXHAUSTED:case $p.INTERNAL:case $p.UNAVAILABLE:case $p.UNAUTHENTICATED:return!1;case $p.INVALID_ARGUMENT:case $p.NOT_FOUND:case $p.ALREADY_EXISTS:case $p.PERMISSION_DENIED:case $p.FAILED_PRECONDITION:case $p.ABORTED:case $p.OUT_OF_RANGE:case $p.UNIMPLEMENTED:case $p.DATA_LOSS:return!0}}function lw(e){if(void 0===e)return Wp("GRPC error has no .code"),$p.UNKNOWN;switch(e){case sw.OK:return $p.OK;case sw.CANCELLED:return $p.CANCELLED;case sw.UNKNOWN:return $p.UNKNOWN;case sw.DEADLINE_EXCEEDED:return $p.DEADLINE_EXCEEDED;case sw.RESOURCE_EXHAUSTED:return $p.RESOURCE_EXHAUSTED;case sw.INTERNAL:return $p.INTERNAL;case sw.UNAVAILABLE:return $p.UNAVAILABLE;case sw.UNAUTHENTICATED:return $p.UNAUTHENTICATED;case sw.INVALID_ARGUMENT:return $p.INVALID_ARGUMENT;case sw.NOT_FOUND:return $p.NOT_FOUND;case sw.ALREADY_EXISTS:return $p.ALREADY_EXISTS;case sw.PERMISSION_DENIED:return $p.PERMISSION_DENIED;case sw.FAILED_PRECONDITION:return $p.FAILED_PRECONDITION;case sw.ABORTED:return $p.ABORTED;case sw.OUT_OF_RANGE:return $p.OUT_OF_RANGE;case sw.UNIMPLEMENTED:return $p.UNIMPLEMENTED;case sw.DATA_LOSS:return $p.DATA_LOSS;default:return Qp()}}(ow=sw||(sw={}))[ow.OK=0]="OK",ow[ow.CANCELLED=1]="CANCELLED",ow[ow.UNKNOWN=2]="UNKNOWN",ow[ow.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ow[ow.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ow[ow.NOT_FOUND=5]="NOT_FOUND",ow[ow.ALREADY_EXISTS=6]="ALREADY_EXISTS",ow[ow.PERMISSION_DENIED=7]="PERMISSION_DENIED",ow[ow.UNAUTHENTICATED=16]="UNAUTHENTICATED",ow[ow.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ow[ow.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ow[ow.ABORTED=10]="ABORTED",ow[ow.OUT_OF_RANGE=11]="OUT_OF_RANGE",ow[ow.UNIMPLEMENTED=12]="UNIMPLEMENTED",ow[ow.INTERNAL=13]="INTERNAL",ow[ow.UNAVAILABLE=14]="UNAVAILABLE",ow[ow.DATA_LOSS=15]="DATA_LOSS";let cw=null;function uw(){return new TextEncoder}const hw=new Up([4294967295,4294967295],0);function dw(e){const t=uw().encode(e),n=new Mp;return n.update(t),new Uint8Array(n.digest())}function fw(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Up([n,r],0),new Up([i,s],0)]}class pw{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new mw("Invalid padding: ".concat(t));if(n<0)throw new mw("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new mw("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new mw("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Up.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Up.fromNumber(n)));return 1===r.compare(hw)&&(r=new Up([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=dw(e),[n,r]=fw(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new pw(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=dw(e),[n,r]=fw(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class mw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class gw{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,vw.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new gw(pm.min(),r,new xg(um),hy(),by())}}class vw{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new vw(n,t,by(),by(),by())}}class yw{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class ww{constructor(e,t){this.targetId=e,this.fe=t}}class bw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Og.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class _w{constructor(){this.ge=0,this.pe=Ew(),this.ye=Og.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=by(),t=by(),n=by();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Qp()}})),new vw(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Ew()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Yp(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Sw{constructor(e){this.Le=e,this.ke=new Map,this.qe=hy(),this.Qe=Iw(),this.Ke=new xg(um)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Qp()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Bv(i))if(0===n){const e=new wm(i.path);this.We(t,e,fv.newNoDocument(e,pm.min()))}else Yp(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==cw||cw.tt(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Ug(n).toUint8Array()}catch(e){if(e instanceof Dg)return Kp("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new pw(s,r,i)}catch(e){return Kp(e instanceof mw?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Bv(i.target)){const t=new wm(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,fv.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=by();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new gw(e,t,this.Ke,this.qe,n);return this.qe=hy(),this.Qe=Iw(),this.Ke=new xg(um),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new _w,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Ng(um),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Hp("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new _w),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Iw(){return new xg(wm.comparator)}function Ew(){return new xg(wm.comparator)}const kw={asc:"ASCENDING",desc:"DESCENDING"},xw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tw={and:"AND",or:"OR"};class Cw{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Nw(e,t){return e.useProto3Json||Wm(t)?t:{value:t}}function Aw(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Pw(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Rw(e,t){return Aw(e,t.toTimestamp())}function Dw(e){return Yp(!!e),pm.fromTimestamp(function(e){const t=Lg(e);return new fm(t.seconds,t.nanos)}(e))}function Ow(e,t){return function(e){return new gm(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function jw(e){const t=gm.fromString(e);return Yp(rb(t)),t}function Lw(e,t){return Ow(e.databaseId,t.path)}function Mw(e,t){const n=jw(t);if(n.get(1)!==e.databaseId.projectId)throw new Xp($p.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Xp($p.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wm(zw(n))}function Uw(e,t){return Ow(e.databaseId,t)}function Fw(e){const t=jw(e);return 4===t.length?gm.emptyPath():zw(t)}function Vw(e){return new gm(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function zw(e){return Yp(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Bw(e,t,n){return{name:Lw(e,t),fields:n.value.mapValue.fields}}function qw(e,t,n){const r=Mw(e,t.name),i=Dw(t.updateTime),s=t.createTime?Dw(t.createTime):pm.min(),o=new hv({mapValue:{fields:t.fields}}),a=fv.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Hw(e,t){let n;if(t instanceof Qy)n={update:Bw(e,t.key,t.value)};else if(t instanceof Zy)n={delete:Lw(e,t.key)};else if(t instanceof Yy)n={update:Bw(e,t.key,t.data),updateMask:nb(t.fieldMask)};else{if(!(t instanceof ew))return Qp();n={verify:Lw(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Ay)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Py)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Dy)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof jy)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Qp()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Rw(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Qp()}(e,t.precondition)),n}function Ww(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Vy.updateTime(Dw(e.updateTime)):void 0!==e.exists?Vy.exists(e.exists):Vy.none()}(t.currentDocument):Vy.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Yp("REQUEST_TIME"===t.setToServerValue),n=new Ay;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Py(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Dy(e)}else"increment"in t?n=new jy(e,t.increment):Qp();const r=ym.fromServerFormat(t.fieldPath);return new Uy(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Mw(e,t.update.name),s=new hv({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Rg(t.map((e=>ym.fromServerFormat(e))))}(t.updateMask);return new Yy(i,s,e,n,r)}return new Qy(i,s,n,r)}if(t.delete){const r=Mw(e,t.delete);return new Zy(r,n)}if(t.verify){const r=Mw(e,t.verify);return new ew(r,n)}return Qp()}function Kw(e,t){return{documents:[Uw(e,t.path)]}}function Gw(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Uw(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Uw(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return tb(_v.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Zw(e.field),direction:Jw(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Nw(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Qw(e){let t=Fw(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Yp(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Yw(e);return t instanceof _v&&Ev(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new vv(eb(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Wm(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new pv(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new pv(n,t)}(n.endAt)),Gv(t,i,o,s,a,"F",l,c)}function Yw(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=eb(e.unaryFilter.field);return bv.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=eb(e.unaryFilter.field);return bv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=eb(e.unaryFilter.field);return bv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=eb(e.unaryFilter.field);return bv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Qp()}}(e):void 0!==e.fieldFilter?function(e){return bv.create(eb(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qp()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return _v.create(e.compositeFilter.filters.map((e=>Yw(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Qp()}}(e.compositeFilter.op))}(e):Qp()}function Jw(e){return kw[e]}function $w(e){return xw[e]}function Xw(e){return Tw[e]}function Zw(e){return{fieldPath:e.canonicalString()}}function eb(e){return ym.fromServerFormat(e.fieldPath)}function tb(e){return e instanceof bv?function(e){if("=="===e.op){if(rv(e.value))return{unaryFilter:{field:Zw(e.field),op:"IS_NAN"}};if(nv(e.value))return{unaryFilter:{field:Zw(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(rv(e.value))return{unaryFilter:{field:Zw(e.field),op:"IS_NOT_NAN"}};if(nv(e.value))return{unaryFilter:{field:Zw(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zw(e.field),op:$w(e.op),value:e.value}}}(e):e instanceof _v?function(e){const t=e.getFilters().map((e=>tb(e)));return 1===t.length?t[0]:{compositeFilter:{op:Xw(e.op),filters:t}}}(e):Qp()}function nb(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function rb(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ib{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:pm.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:pm.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Og.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new ib(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ib(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ib(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ib(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class sb{constructor(e){this.ut=e}}function ob(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ab(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Lw(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Aw(e,t.version.toTimestamp()),createTime:Aw(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:lb(t.version)};else{if(!t.isUnknownDocument())return Qp();r.unknownDocument={path:n.path.toArray(),version:lb(t.version)}}return r}function ab(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function lb(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function cb(e){const t=new fm(e.seconds,e.nanoseconds);return pm.fromTimestamp(t)}function ub(e,t){const n=(t.baseMutations||[]).map((t=>Ww(e.ut,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Ww(e.ut,t))),i=fm.fromMillis(t.localWriteTimeMs);return new tw(t.batchId,i,n,r)}function hb(e){const t=cb(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?cb(e.lastLimboFreeSnapshotVersion):pm.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Yp(1===e.documents.length),Xv(Qv(Fw(e.documents[0])))}(e.query):function(e){return Xv(Qw(e))}(e.query),new ib(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Og.fromBase64String(e.resumeToken))}function db(e,t){const n=lb(t.snapshotVersion),r=lb(t.lastLimboFreeSnapshotVersion);let i;i=Bv(t.target)?Kw(e.ut,t.target):Gw(e.ut,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Vv(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function fb(e){const t=Qw({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ty(t,t.limit,"L"):t}function pb(e,t){return new rw(t.largestBatchId,Ww(e.ut,t.overlayMutation))}function mb(e,t){const n=t.path.lastSegment();return[e,Qm(t.path.popLast()),n]}function gb(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:lb(r.readTime),documentKey:Qm(r.documentKey.path),largestBatchId:r.largestBatchId}}class vb{getBundleMetadata(e,t){return yb(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:cb(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return yb(e).put(function(e){return{bundleId:e.id,createTime:lb(Dw(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return wb(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:fb(e.bundledQuery),readTime:cb(e.readTime)}}(e)}))}saveNamedQuery(e,t){return wb(e).put(function(e){return{name:e.name,readTime:lb(Dw(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function yb(e){return Sg(e,"bundles")}function wb(e){return Sg(e,"namedQueries")}class bb{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new bb(e,n)}getOverlay(e,t){return _b(e).get(mb(this.userId,t)).next((e=>e?pb(this.serializer,e):null))}getOverlays(e,t){const n=my();return Rm.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new rw(t,i);r.push(this.lt(e,s))})),Rm.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Qm(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(_b(e).H("collectionPathOverlayIndex",r))})),Rm.waitFor(i)}getOverlaysForCollection(e,t,n){const r=my(),i=Qm(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return _b(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=pb(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=my();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _b(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=pb(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}lt(e,t){return _b(e).put(function(e,t,n){const[r,i,s]=mb(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Hw(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function _b(e){return Sg(e,"documentOverlays")}class Sb{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Mg(e.integerValue));else if("doubleValue"in e){const n=Mg(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Km(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Ug(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?ov(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Qp()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),wm.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function Ib(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Eb(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Ib(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Sb.St=new Sb;class kb{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Bt(e),n=Eb(t);this.Lt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),n=Eb(t);this.Lt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class xb{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class Tb{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Cb{constructor(){this.Wt=new kb,this.Gt=new xb(this.Wt),this.zt=new Tb(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class Nb{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Nb(this.indexId,this.documentKey,this.arrayValue,n)}}function Ab(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Pb(e.arrayValue,t.arrayValue),0!==n?n:(n=Pb(e.directionalValue,t.directionalValue),0!==n?n:wm.comparator(e.documentKey,t.documentKey)))}function Pb(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Rb{constructor(e){this.Jt=new Ng(((e,t)=>ym.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(Yp(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=_m(e);if(void 0!==t&&!this.tn(t))return!1;const n=Sm(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.nn(e,t)||!this.rn(this.Yt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Yt.length||!this.rn(this.Yt[s++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new Ng(ym.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Im(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Im(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Im(n.field,"asc"===n.dir?0:1)));return new bm(bm.UNKNOWN_ID,this.collectionId,t,Em.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Db(e){var t,n;if(Yp(e instanceof bv||e instanceof _v),e instanceof bv){if(e instanceof jv){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>bv.create(e.field,"==",t))))||[];return _v.create(r,"or")}return e}const r=e.filters.map((e=>Db(e)));return _v.create(r,e.op)}function Ob(e){if(0===e.getFilters().length)return[];const t=Ub(Db(e));return Yp(Mb(t)),jb(t)||Lb(t)?[t]:t.getFilters()}function jb(e){return e instanceof bv}function Lb(e){return e instanceof _v&&Ev(e)}function Mb(e){return jb(e)||Lb(e)||function(e){if(e instanceof _v&&Iv(e)){for(const t of e.getFilters())if(!jb(t)&&!Lb(t))return!1;return!0}return!1}(e)}function Ub(e){if(Yp(e instanceof bv||e instanceof _v),e instanceof bv)return e;if(1===e.filters.length)return Ub(e.filters[0]);const t=e.filters.map((e=>Ub(e)));let n=_v.create(t,e.op);return n=zb(n),Mb(n)?n:(Yp(n instanceof _v),Yp(Sv(n)),Yp(n.filters.length>1),n.filters.reduce(((e,t)=>Fb(e,t))))}function Fb(e,t){let n;return Yp(e instanceof bv||e instanceof _v),Yp(t instanceof bv||t instanceof _v),n=e instanceof bv?t instanceof bv?function(e,t){return _v.create([e,t],"and")}(e,t):Vb(e,t):t instanceof bv?Vb(t,e):function(e,t){if(Yp(e.filters.length>0&&t.filters.length>0),Sv(e)&&Sv(t))return Cv(e,t.getFilters());const n=Iv(e)?e:t,r=Iv(e)?t:e,i=n.filters.map((e=>Fb(e,r)));return _v.create(i,"or")}(e,t),zb(n)}function Vb(e,t){if(Sv(t))return Cv(t,e.getFilters());{const n=t.filters.map((t=>Fb(e,t)));return _v.create(n,"or")}}function zb(e){if(Yp(e instanceof bv||e instanceof _v),e instanceof bv)return e;const t=e.getFilters();if(1===t.length)return zb(t[0]);if(kv(e))return e;const n=t.map((e=>zb(e))),r=[];return n.forEach((t=>{t instanceof bv?r.push(t):t instanceof _v&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:_v.create(r,e.op)}class Bb{constructor(){this.on=new qb}addToCollectionParentIndex(e,t){return this.on.add(t),Rm.resolve()}getCollectionParents(e,t){return Rm.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return Rm.resolve()}deleteFieldIndex(e,t){return Rm.resolve()}deleteAllFieldIndexes(e){return Rm.resolve()}createTargetIndexes(e,t){return Rm.resolve()}getDocumentsMatchingTarget(e,t){return Rm.resolve(null)}getIndexType(e,t){return Rm.resolve(0)}getFieldIndexes(e,t){return Rm.resolve([])}getNextCollectionGroupToUpdate(e){return Rm.resolve(null)}getMinOffset(e,t){return Rm.resolve(Tm.min())}getMinOffsetFromCollectionGroup(e,t){return Rm.resolve(Tm.min())}updateCollectionGroup(e,t,n){return Rm.resolve()}updateIndexEntries(e,t){return Rm.resolve()}}class qb{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ng(gm.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ng(gm.comparator)).toArray()}}const Hb=new Uint8Array(0);class Wb{constructor(e,t){this.user=e,this.databaseId=t,this._n=new qb,this.an=new cy((e=>Vv(e)),((e,t)=>zv(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const i={collectionId:n,parent:Qm(r)};return Kb(e).put(i)}return Rm.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[dm(t),""],!1,!0);return Kb(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push($m(r.parent))}return n}))}addFieldIndex(e,t){const n=Qb(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Yb(e);return i.next((e=>{n.put(gb(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Qb(e),r=Yb(e),i=Gb(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Qb(e),n=Gb(e),r=Yb(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return Rm.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Rb(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Gb(e);let r=!0;const i=new Map;return Rm.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=by();const r=[];return Rm.forEach(i,((i,s)=>{Hp("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Vv(t)));const o=function(e,t){const n=_m(t);if(void 0===n)return null;for(const r of qv(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of Sm(t))for(const t of qv(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Sm(t)){const t=0===i.kind?Hv(e,i.fieldPath,e.startAt):Wv(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new pv(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of Sm(t)){const t=0===i.kind?Wv(e,i.fieldPath,e.endAt):Hv(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new pv(n,r)}(s,i),u=this.ln(i,s,l),h=this.ln(i,s,c),d=this.hn(i,s,a),f=this.Pn(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return Rm.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=wm.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Rm.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:Ob(_v.create(e.filters,"and")).map((t=>Fv(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.In(t[u/l]):Hb,h=this.Tn(e,a,n[u%l],r),d=this.En(e,a,i[u%l],s),f=o.map((t=>this.Tn(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}Tn(e,t,n,r){const i=new Nb(e,wm.empty(),t,n);return r?i:i.Ht()}En(e,t,n,r){const i=new Nb(e,wm.empty(),t,n);return r?i.Ht():i}cn(e,t){const n=new Rb(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return Rm.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Ng(ym.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new Cb;for(const r of Sm(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.jt(r.kind);Sb.St.ht(e,i)}return n.Ut()}In(e){const t=new Cb;return Sb.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new Cb;return Sb.St.ht(Zg(this.databaseId,t),n.jt(function(e){const t=Sm(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new Cb);let i=0;for(const s of Sm(e)){const e=n[i++];for(const n of r)if(this.Rn(t,s.fieldPath)&&tv(e))r=this.Vn(r,s,e);else{const t=n.jt(s.kind);Sb.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Cb;n.seed(e.Ut()),Sb.St.ht(s,n.jt(t.kind)),i.push(n)}return i}Rn(e,t){return!!e.filters.find((e=>e instanceof bv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Qb(e),r=Yb(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return Rm.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Em(t.sequenceNumber,new Tm(cb(t.readTime),new wm($m(t.documentKey)),t.largestBatchId)):Em.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Im(ym.fromServerFormat(t),n)}));return new bm(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:um(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Qb(e),i=Yb(e);return this.fn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Rm.forEach(t,(t=>i.put(gb(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Rm.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Rm.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Rm.forEach(i,(n=>this.gn(e,t,n).next((t=>{const i=this.pn(r,n);return t.isEqual(i)?Rm.resolve():this.yn(e,r,n,t,i)})))))))}))}wn(e,t,n,r){return Gb(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return Gb(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=Gb(e);let i=new Ng(Ab);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{i=i.add(new Nb(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}pn(e,t){let n=new Ng(Ab);const r=this.dn(t,e);if(null==r)return n;const i=_m(t);if(null!=i){const s=e.data.field(i.fieldPath);if(tv(s))for(const i of s.arrayValue.values||[])n=n.add(new Nb(t.indexId,e.key,this.In(i),r))}else n=n.add(new Nb(t.indexId,e.key,Hb,r));return n}yn(e,t,n,r,i){Hp("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Pg(s),l=Pg(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Pg(o)):t?(i(a),a=Pg(s)):(a=Pg(s),l=Pg(o))}}(r,i,Ab,(r=>{s.push(this.wn(e,t,n,r))}),(r=>{s.push(this.Sn(e,t,n,r))})),Rm.waitFor(s)}fn(e){let t=1;return Yb(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Ab(e,t))).filter(((e,t,n)=>!t||0!==Ab(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Ab(s,e),i=Ab(s,t);if(0===n)r[0]=e.Ht();else if(n>0&&i<0)r.push(s),r.push(s.Ht());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Hb,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Hb,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return Ab(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Jb)}getMinOffset(e,t){return Rm.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||Qp())))).next(Jb)}}function Kb(e){return Sg(e,"collectionParents")}function Gb(e){return Sg(e,"indexEntries")}function Qb(e){return Sg(e,"indexConfiguration")}function Yb(e){return Sg(e,"indexState")}function Jb(e){Yp(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Cm(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Tm(t.readTime,t.documentKey,n)}const $b={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xb{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Xb(e,Xb.DEFAULT_COLLECTION_PERCENTILE,Xb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Zb(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Yp(1===a)})));const c=[];for(const u of n.mutations){const e=eg(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return Rm.waitFor(s).next((()=>c))}function e_(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Qp();t=e.noDocument}return JSON.stringify(t).length}Xb.DEFAULT_COLLECTION_PERCENTILE=10,Xb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xb.DEFAULT=new Xb(41943040,Xb.DEFAULT_COLLECTION_PERCENTILE,Xb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xb.DISABLED=new Xb(-1,0,0);class t_{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){Yp(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new t_(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return r_(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=i_(e),s=r_(e);return s.add({}).next((o=>{Yp("number"==typeof o);const a=new tw(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Hw(e.ut,t))),i=n.mutations.map((t=>Hw(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new Ng(((e,t)=>um(e.canonicalString(),t.canonicalString())));for(const e of r){const t=eg(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,tg))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[o]=a.keys()})),Rm.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return r_(e).get(t).next((e=>e?(Yp(e.userId===this.userId),ub(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?Rm.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return r_(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Yp(t.batchId>=n),i=ub(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return r_(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return r_(e).W("userMutationsIndex",t).next((e=>e.map((e=>ub(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Zm(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return i_(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,c=$m(a);if(o===this.userId&&t.path.isEqual(c))return r_(e).get(l).next((e=>{if(!e)throw Qp();Yp(e.userId===this.userId),i.push(ub(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ng(um);const r=[];return t.forEach((t=>{const i=Zm(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=i_(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=$m(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),Rm.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Zm(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Ng(um);return i_(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,c=$m(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.vn(e,o)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(r_(e).get(t).next((e=>{if(null===e)throw Qp();Yp(e.userId===this.userId),n.push(ub(this.serializer,e))})))})),Rm.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Zb(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),Rm.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Rm.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return i_(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=$m(e[1]);r.push(t)}else n.done()})).next((()=>{Yp(0===r.length)}))}))}containsKey(e,t){return n_(e,this.userId,t)}Mn(e){return s_(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function n_(e,t,n){const r=Zm(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return i_(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function r_(e){return Sg(e,"mutations")}function i_(e){return Sg(e,"documentMutations")}function s_(e){return Sg(e,"mutationQueues")}class o_{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new o_(0)}static Nn(){return new o_(-1)}}class a_{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new o_(t.highestTargetId);return t.highestTargetId=n.next(),this.Ln(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>pm.fromTimestamp(new fm(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Ln(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>l_(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Yp(t.targetCount>0),t.targetCount-=1,this.Ln(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return l_(e).Y(((s,o)=>{const a=hb(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Rm.waitFor(i))).next((()=>r))}forEachTarget(e,t){return l_(e).Y(((e,n)=>{const r=hb(n);t(r)}))}Bn(e){return c_(e).get("targetGlobalKey").next((e=>(Yp(null!==e),e)))}Ln(e,t){return c_(e).put("targetGlobalKey",t)}kn(e,t){return l_(e).put(db(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Vv(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return l_(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=hb(n);zv(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=u_(e);return t.forEach((t=>{const s=Qm(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Rm.waitFor(r)}removeMatchingKeys(e,t,n){const r=u_(e);return Rm.forEach(t,(t=>{const i=Qm(t.path);return Rm.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=u_(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=u_(e);let i=by();return r.Y({range:n,J:!0},((e,t,n)=>{const r=$m(e[1]),s=new wm(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Qm(t.path),r=IDBKeyRange.bound([n],[dm(n)],!1,!0);let i=0;return u_(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return l_(e).get(t).next((e=>e?hb(e):null))}}function l_(e){return Sg(e,"targets")}function c_(e){return Sg(e,"targetGlobal")}function u_(e){return Sg(e,"targetDocuments")}function h_(e,t){let[n,r]=e,[i,s]=t;const o=um(n,i);return 0===o?um(r,s):o}class d_{constructor(e){this.Qn=e,this.buffer=new Ng(h_),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();h_(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class f_{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){Hp("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Mm(e)?Hp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Pm(e)}await this.Gn(3e5)}))}}class p_{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Rm.resolve(Hm._e);const n=new d_(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Hp("LruGarbageCollector","Garbage collection skipped; disabled"),Rm.resolve($b)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Hp("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),$b):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Hp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),qp()<=si.DEBUG&&Hp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Rm.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function m_(e,t){return new p_(e,t)}class g_{constructor(e,t){this.db=e,this.garbageCollector=m_(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return v_(e,n)}removeReference(e,t,n){return v_(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return v_(e,t)}Xn(e,t){return function(e,t){let n=!1;return s_(e).Z((r=>n_(e,r,t).next((e=>(e&&(n=!0),Rm.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Zn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,pm.min()),u_(e).delete(function(e){return[0,Qm(e.path)]}(s)))))}));r.push(t)}})).next((()=>Rm.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return v_(e,t)}Zn(e,t){const n=u_(e);let r,i=Hm._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Hm._e&&t(new wm($m(r)),i),i=l,r=a):i=Hm._e})).next((()=>{i!==Hm._e&&t(new wm($m(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function v_(e,t){return u_(e).put(function(e,t){return{targetId:0,path:Qm(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class y_{constructor(){this.changes=new cy((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fv.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Rm.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class w_{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return I_(e).put(n)}removeEntry(e,t,n){return I_(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],ab(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=fv.newInvalidDocument(t);return I_(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(E_(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:fv.newInvalidDocument(t)};return I_(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(E_(t))},((e,r)=>{n={document:this.tr(t,r),size:e_(r)}})).next((()=>n))}getEntries(e,t){let n=hy();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=hy(),r=new xg(wm.comparator);return this.rr(e,t,((e,t)=>{const i=this.tr(e,t);n=n.insert(e,i),r=r.insert(e,e_(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return Rm.resolve();let r=new Ng(x_);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(E_(r.first()),E_(r.last())),s=r.getIterator();let o=s.getNext();return I_(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=wm.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&x_(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(E_(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),ab(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return I_(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=hy();for(const i of e){const e=this.tr(wm.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(sy(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=hy();const s=k_(t,n),o=k_(t,Tm.max());return I_(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.tr(wm.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new __(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return S_(e).get("remoteDocumentGlobalKey").next((e=>(Yp(!!e),e)))}er(e,t){return S_(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=qw(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=wm.fromSegments(t.noDocument.path),r=cb(t.noDocument.readTime);n=fv.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Qp();{const e=wm.fromSegments(t.unknownDocument.path),r=cb(t.unknownDocument.version);n=fv.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new fm(e[0],e[1]);return pm.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(pm.min()))return e}return fv.newInvalidDocument(e)}}function b_(e){return new w_(e)}class __ extends y_{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new cy((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Ng(((e,t)=>um(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ar.get(i);if(t.push(this._r.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=ob(this._r.serializer,s);r=r.add(i.path.popLast());const l=e_(a);n+=l-o.size,t.push(this._r.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=ob(this._r.serializer,s.convertToNoDocument(pm.min()));t.push(this._r.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),Rm.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function S_(e){return Sg(e,"remoteDocumentGlobal")}function I_(e){return Sg(e,"remoteDocumentsV14")}function E_(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function k_(e,t){const n=t.documentKey.path.toArray();return[e,ab(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function x_(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=um(n[s],r[s]),i)return i;return i=um(n.length,r.length),i||(i=um(n[n.length-2],r[r.length-2]),i||um(n[n.length-1],r[r.length-1]))}class T_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class C_{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Wy(n.mutation,e,Rg.empty(),fm.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,by()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:by();const r=my();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=fy();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=my();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,by())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=hy();const s=vy(),o=vy();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Yy)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Wy(o.mutation,t,o.mutation.getFieldMask(),fm.now())):s.set(t.key,Rg.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new T_(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=vy();let r=new xg(((e,t)=>e-t)),i=by();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Rg.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||by()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=gy();l.forEach((e=>{if(!i.has(e)){const r=qy(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Rm.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return wm.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Jv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Rm.resolve(my());let o=-1,a=i;return s.next((t=>Rm.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Rm.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,by()))).next((e=>({batchId:o,changes:py(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new wm(t)).next((e=>{let t=fy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=fy();return this.indexManager.getCollectionParents(e,i).next((o=>Rm.forEach(o,(o=>{const a=function(e,t){return new Kv(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,fv.newInvalidDocument(r)))}));let n=fy();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Wy(s.mutation,r,Rg.empty(),fm.now()),sy(t,r)&&(n=n.insert(e,r))})),n}))}}class N_{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return Rm.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Dw(e.createTime)}}(t)),Rm.resolve()}getNamedQuery(e,t){return Rm.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:fb(e.bundledQuery),readTime:Dw(e.readTime)}}(t)),Rm.resolve()}}class A_{constructor(){this.overlays=new xg(wm.comparator),this.lr=new Map}getOverlay(e,t){return Rm.resolve(this.overlays.get(t))}getOverlays(e,t){const n=my();return Rm.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),Rm.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),Rm.resolve()}getOverlaysForCollection(e,t,n){const r=my(),i=t.length+1,s=new wm(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Rm.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new xg(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=my(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=my(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Rm.resolve(o)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new rw(t,n));let i=this.lr.get(t);void 0===i&&(i=by(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class P_{constructor(){this.hr=new Ng(R_.Pr),this.Ir=new Ng(R_.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new R_(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new R_(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new wm(new gm([])),n=new R_(t,e),r=new R_(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new wm(new gm([])),n=new R_(t,e),r=new R_(t,e+1);let i=by();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new R_(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class R_{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return wm.comparator(e.key,t.key)||um(e.gr,t.gr)}static Tr(e,t){return um(e.gr,t.gr)||wm.comparator(e.key,t.key)}}class D_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Ng(R_.Pr)}checkEmpty(e){return Rm.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new tw(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.yr=this.yr.add(new R_(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Rm.resolve(s)}lookupMutationBatch(e,t){return Rm.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return Rm.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Rm.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return Rm.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new R_(t,0),r=new R_(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),Rm.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ng(um);return t.forEach((e=>{const t=new R_(e,0),r=new R_(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),Rm.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;wm.isDocumentKey(i)||(i=i.child(""));const s=new R_(new wm(i),0);let o=new Ng(um);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),s),Rm.resolve(this.br(o))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Yp(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return Rm.forEach(t.mutations,(r=>{const i=new R_(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new R_(t,0),r=this.yr.firstAfterOrEqual(n);return Rm.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Rm.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class O_{constructor(e){this.Cr=e,this.docs=new xg(wm.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Rm.resolve(n?n.document.mutableCopy():fv.newInvalidDocument(t))}getEntries(e,t){let n=hy();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():fv.newInvalidDocument(e))})),Rm.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=hy();const s=t.path,o=new wm(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Cm(xm(o),n)<=0||(r.has(o.key)||sy(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Rm.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Qp()}vr(e,t){return Rm.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new j_(this)}getSize(e){return Rm.resolve(this.size)}}class j_ extends y_{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),Rm.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class L_{constructor(e){this.persistence=e,this.Fr=new cy((e=>Vv(e)),zv),this.lastRemoteSnapshotVersion=pm.min(),this.highestTargetId=0,this.Mr=0,this.Or=new P_,this.targetCount=0,this.Nr=o_.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),Rm.resolve()}getLastRemoteSnapshotVersion(e){return Rm.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Rm.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),Rm.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),Rm.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new o_(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,Rm.resolve()}updateTargetData(e,t){return this.kn(t),Rm.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,Rm.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Rm.waitFor(i).next((()=>r))}getTargetCount(e){return Rm.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return Rm.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),Rm.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Rm.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),Rm.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return Rm.resolve(n)}containsKey(e,t){return Rm.resolve(this.Or.containsKey(t))}}class M_{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Hm(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new L_(this),this.indexManager=new Bb,this.remoteDocumentCache=function(e){return new O_(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new sb(t),this.Kr=new N_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new A_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new D_(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){Hp("MemoryPersistence","Starting transaction:",e);const r=new U_(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return Rm.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class U_ extends Am{constructor(e){super(),this.currentSequenceNumber=e}}class F_{constructor(e){this.persistence=e,this.Gr=new P_,this.zr=null}static jr(e){return new F_(e)}get Hr(){if(this.zr)return this.zr;throw Qp()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),Rm.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),Rm.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),Rm.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rm.forEach(this.Hr,(n=>{const r=wm.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,pm.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return Rm.or([()=>Rm.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class V_{constructor(e){this.serializer=e}N(e,t,n,r){const i=new Dm("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xm,{unique:!0}),e.createObjectStore("documentMutations")}(e),z_(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Rm.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),z_(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pm.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xm,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Rm.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Zr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(i))))),n<7&&r>=7&&(s=s.next((()=>this.ei(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ni(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:fg});t.createIndex("collectionPathOverlayIndex",pg,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",mg,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:ng});t.createIndex("documentKeyIndex",rg),t.createIndex("collectionGroupIndex",ig)}(e))).next((()=>this.ri(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ii(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:cg}).createIndex("sequenceNumberIndex",ug,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:hg}).createIndex("documentKeyIndex",dg,{unique:!1})}(e)))),s}Xr(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=e_(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>Rm.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>Rm.forEach(n,(n=>{Yp(n.userId===t.userId);const r=ub(this.serializer,n);return Zb(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new gm(n),o=function(e){return[0,Qm(e)]}(s);r.push(t.get(o).next((n=>n?Rm.resolve():(n=>t.put({targetId:0,path:Qm(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Rm.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:lg});const n=t.store("collectionParents"),r=new qb,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Qm(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new gm(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=$m(r);return i(o.popLast())}))))}ni(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=hb(n),i=db(this.serializer,r);return t.put(i)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new wm(gm.fromString(e.document.name).popFirst(5)):e.noDocument?wm.fromSegments(e.noDocument.path):e.unknownDocument?wm.fromSegments(e.unknownDocument.path):Qp()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>Rm.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=b_(this.serializer),i=new M_(F_.jr,this.serializer.ut);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:by();ub(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Rm.forEach(n,((e,n)=>{const s=new Vp(n),o=bb.ct(this.serializer,s),a=i.getIndexManager(s),l=t_.ct(s,this.serializer,a,i.referenceDelegate);return new C_(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new _g(t,Hm._e),e).next()}))}))}}function z_(e){e.createObjectStore("targetDocuments",{keyPath:og}).createIndex("documentTargetsIndex",ag,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",sg,{unique:!0}),e.createObjectStore("targetGlobal")}const B_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class q_{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=i,this.window=s,this.document=o,this.oi=l,this._i=c,this.ai=u,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!q_.D())throw new Xp($p.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new g_(this,r),this.Ii=t+"main",this.serializer=new sb(a),this.Ti=new Om(this.Ii,this.ai,new V_(this.serializer)),this.qr=new a_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=b_(this.serializer),this.Kr=new vb,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===c&&Wp("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Xp($p.FAILED_PRECONDITION,B_);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Lr=new Hm(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>W_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(Mm(e))return Hp("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Hp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return H_(e).get("owner").next((e=>Rm.resolve(this.wi(e))))}Si(e){return W_(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Sg(e,"clientMetadata");return t.W().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Rm.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?Rm.resolve(!0):H_(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new Xp($p.FAILED_PRECONDITION,B_);return!1}}return!(!this.networkEnabled||!this.inForeground)||W_(e).W().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Hp("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new _g(e,Hm._e);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>W_(e).W().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return t_.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Wb(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return bb.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){Hp("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?bg:14===e?wg:13===e?yg:12===e?vg:11===e?gg:void Qp()}(this.ai);let s;return this.Ti.runTransaction(e,r,i,(r=>(s=new _g(r,this.Lr?this.Lr.next():Hm._e),"readwrite-primary"===t?this.fi(s).next((e=>!!e||this.gi(s))).next((t=>{if(!t)throw Wp("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new Xp($p.FAILED_PRECONDITION,Nm);return n(s)})).next((e=>this.yi(s).next((()=>e)))):this.Li(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Li(e){return H_(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Xp($p.FAILED_PRECONDITION,B_)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return H_(e).put("owner",t)}static D(){return Om.D()}pi(e){const t=H_(e);return t.get("owner").next((e=>this.wi(e)?(Hp("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Rm.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Wp("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;!Lr()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return Hp("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Wp("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Wp("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(e){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function H_(e){return Sg(e,"owner")}function W_(e){return Sg(e,"clientMetadata")}function K_(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class G_{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=by(),r=by();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new G_(e,t.fromCache,n,r)}}class Q_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Y_{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Q_;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(qp()<=si.DEBUG&&Hp("QueryEngine","SDK will not create cache indexes for query:",iy(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Rm.resolve()):(qp()<=si.DEBUG&&Hp("QueryEngine","Query:",iy(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(qp()<=si.DEBUG&&Hp("QueryEngine","The SDK decides to create cache indexes for query:",iy(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xv(t))):Rm.resolve())}zi(e,t){if(Yv(t))return Rm.resolve(null);let n=Xv(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=ty(t,null,"F"),n=Xv(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=by(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Yi(t,r);return this.Zi(t,s,i,n.readTime)?this.zi(e,ty(t,null,"F")):this.Xi(e,s,t,n)}))))})))))}ji(e,t,n,r){return Yv(t)||r.isEqual(pm.min())?Rm.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const s=this.Yi(t,i);return this.Zi(t,s,n,r)?Rm.resolve(null):(qp()<=si.DEBUG&&Hp("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),iy(t)),this.Xi(e,s,t,km(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new Ng(ay(e));return t.forEach(((t,r)=>{sy(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return qp()<=si.DEBUG&&Hp("QueryEngine","Using full collection scan to execute query:",iy(t)),this.Gi.getDocumentsMatchingQuery(e,t,Tm.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class J_{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new xg(um),this.ns=new cy((e=>Vv(e)),zv),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new C_(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function $_(e,t,n,r){return new J_(e,t,n,r)}async function X_(e,t){const n=Jp(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=by();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Z_(e){const t=Jp(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function eS(e,t,n){let r=by(),i=by();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=hy();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(pm.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Hp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{us:r,cs:i}}))}function tS(e,t){const n=Jp(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function nS(e,t){const n=Jp(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,Rm.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new ib(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function rS(e,t,n){const r=Jp(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Mm(e))throw e;Hp("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function iS(e,t,n){const r=Jp(e);let i=pm.min(),s=by();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Jp(e),i=r.ns.get(n);return void 0!==i?Rm.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,Xv(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:pm.min(),n?s:by()))).next((e=>(aS(r,oy(t),e),{documents:e,ls:s})))))}function sS(e,t){const n=Jp(e),r=Jp(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function oS(e,t){const n=Jp(e),r=n.rs.get(t)||pm.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,km(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(aS(n,t,e),e)))}function aS(e,t,n){let r=e.rs.get(t)||pm.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function lS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:by();const r=await nS(e,Xv(fb(t.bundledQuery))),i=Jp(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Dw(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(e,t);const o=r.withResumeToken(Og.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(o.targetId,o),i.qr.updateTargetData(e,o).next((()=>i.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kr.saveNamedQuery(e,t)))}))}function cS(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function uS(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function hS(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class dS{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Xp(r.error.code,r.error.message))),s?new dS(e,t,r.state,i):(Wp("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fS{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Xp(n.error.code,n.error.message))),i?new fS(e,n.state,r):(Wp("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Sy();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Gm(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new pS(e,i):(Wp("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class mS{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new mS(t.clientId,t.onlineState):(Wp("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class gS{constructor(){this.activeTargetIds=Sy()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vS{constructor(e,t,n,r,i){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new xg(um),this.started=!1,this.ps=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ys=cS(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new gS),this.Ss=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(cS(this.persistenceKey,n));if(e){const t=pS.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(hS(this.persistenceKey,e));if(n){const r=fS.Ts(e,n);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hS(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Hp("SharedClientState","READ",e,t),t}setItem(e,t){Hp("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Hp("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(Hp("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void Wp("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=Hm._e;if(null!=e)try{const n=JSON.parse(e);Yp("number"==typeof n),t=n}catch(e){Wp("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Hm._e&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,n){const r=new dS(this.currentUser,e,t,n),i=uS(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}Bs(e){const t=uS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=hS(this.persistenceKey,e),i=new fS(e,t,n);this.setItem(r,i.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return pS.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return dS.Ts(new Vp(i),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return fS.Ts(r,t)}Ms(e){return mS.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);Hp("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),i=this.Os(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Xs(s,o).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=Sy();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class yS{constructor(){this.eo=new gS,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new gS,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class wS{ro(e){}shutdown(){}}class bS{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Hp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Hp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let _S=null;function SS(){return null===_S?_S=268435456+Math.round(2147483648*Math.random()):_S++,"0x"+_S.toString(16)}const IS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ES{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const kS="WebChannelConnection";class xS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo="projects/".concat(n,"/databases/").concat(r),this.po="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get yo(){return!1}wo(e,t,n,r,i){const s=SS(),o=this.So(e,t);Hp("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,r,i),this.Do(e,o,a,n).then((t=>(Hp("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Kp("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.wo(e,t,n,r,i)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+zp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=IS[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,r){const i=SS();return new Promise(((s,o)=>{const a=new Lp;a.setWithCredentials(!0),a.listenOnce(Rp.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Pp.NO_ERROR:const t=a.getResponseJson();Hp(kS,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Pp.TIMEOUT:Hp(kS,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Xp($p.DEADLINE_EXCEEDED,"Request time out"));break;case Pp.HTTP_ERROR:const n=a.getStatus();if(Hp(kS,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values($p).indexOf(t)>=0?t:$p.UNKNOWN}(t.status);o(new Xp(e,t.message))}else o(new Xp($p.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Xp($p.UNAVAILABLE,"Connection failed."));break;default:Qp()}}finally{Hp(kS,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Hp(kS,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}vo(e,t,n){const r=SS(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Np(),o=Ap(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.bo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Hp(kS,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new ES({co:t=>{d?Hp(kS,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Hp(kS,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Hp(kS,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,jp.EventType.OPEN,(()=>{d||Hp(kS,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,jp.EventType.CLOSE,(()=>{d||(d=!0,Hp(kS,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Ro())})),p(u,jp.EventType.ERROR,(t=>{d||(d=!0,Kp(kS,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Ro(new Xp($p.UNAVAILABLE,"The operation could not be completed")))})),p(u,jp.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Yp(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Hp(kS,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=sw[e];if(void 0!==t)return lw(t)}(t),i=o.message;void 0===n&&(n=$p.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Ro(new Xp(n,i)),u.close()}else Hp(kS,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.Vo(i)}})),p(o,Dp.STAT_EVENT,(t=>{t.stat===Op.PROXY?Hp(kS,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Op.NOPROXY&&Hp(kS,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ao()}),0),f}}function TS(){return"undefined"!=typeof window?window:null}function CS(){return"undefined"!=typeof document?document:null}function NS(e){return new Cw(e,!0)}class AS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Fo=n,this.Mo=r,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&Hp("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class PS{constructor(e,t,n,r,i,s,o,a){this.si=e,this.Ko=n,this.$o=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new AS(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===$p.RESOURCE_EXHAUSTED?(Wp(t.toString()),Wp("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===$p.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Uo===t&&this.s_(n,r)}),(t=>{e((()=>{const e=new Xp($p.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return Hp("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(Hp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class RS extends PS{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Qp()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Yp(void 0===t||"string"==typeof t),Og.fromBase64String(t||"")):(Yp(void 0===t||t instanceof Uint8Array),Og.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?$p.UNKNOWN:lw(e.code);return new Xp(t,e.message||"")}(o);n=new bw(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Mw(e,r.document.name),s=Dw(r.document.updateTime),o=r.document.createTime?Dw(r.document.createTime):pm.min(),a=new hv({mapValue:{fields:r.document.fields}}),l=fv.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new yw(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Mw(e,r.document),s=r.readTime?Dw(r.readTime):pm.min(),o=fv.newNoDocument(i,s),a=r.removedTargetIds||[];n=new yw([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Mw(e,r.document),s=r.removedTargetIds||[];n=new yw([],s,i,null)}else{if(!("filter"in t))return Qp();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new iw(r,i),o=e.targetId;n=new ww(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return pm.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?pm.min():t.readTime?Dw(t.readTime):pm.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=Vw(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Bv(r)?{documents:Kw(e,r)}:{query:Gw(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Pw(e,t.resumeToken);const r=Nw(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(pm.min())>0){n.readTime=Aw(e,t.snapshotVersion.toTimestamp());const r=Nw(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qp()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=Vw(this.serializer),t.removeTarget=e,this.e_(t)}}class DS extends PS{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Yp(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(Yp(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Dw(e.updateTime):Dw(t);return n.isEqual(pm.min())&&(n=Dw(t)),new Fy(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Dw(e.commitTime);return this.listener.I_(n,t)}return Yp(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Vw(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Hw(this.serializer,e)))};this.e_(t)}}class OS extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new Xp($p.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.wo(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===$p.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xp($p.UNKNOWN,e.toString())}))}Co(e,t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Co(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===$p.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xp($p.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class jS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(Wp(t),this.f_=!1):Hp("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class LS{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro((e=>{n.enqueueAndForget((async()=>{WS(this)&&(Hp("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Jp(e);t.C_.add(4),await US(t),t.M_.set("Unknown"),t.C_.delete(4),await MS(t)}(this))}))})),this.M_=new jS(n,r)}}async function MS(e){if(WS(e))for(const t of e.v_)await t(!0)}async function US(e){for(const t of e.v_)await t(!1)}function FS(e,t){const n=Jp(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),HS(n)?qS(n):cI(n).Ho()&&zS(n,t))}function VS(e,t){const n=Jp(e),r=cI(n);n.D_.delete(t),r.Ho()&&BS(n,t),0===n.D_.size&&(r.Ho()?r.Zo():WS(n)&&n.M_.set("Unknown"))}function zS(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(pm.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}cI(e).u_(t)}function BS(e,t){e.x_.Oe(t),cI(e).c_(t)}function qS(e){e.x_=new Sw({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),cI(e).start(),e.M_.g_()}function HS(e){return WS(e)&&!cI(e).jo()&&e.D_.size>0}function WS(e){return 0===Jp(e).C_.size}function KS(e){e.x_=void 0}async function GS(e){e.D_.forEach(((t,n)=>{zS(e,t)}))}async function QS(e,t){KS(e),HS(e)?(e.M_.w_(t),qS(e)):e.M_.set("Unknown")}async function YS(e,t,n){if(e.M_.set("Online"),t instanceof bw&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.D_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.D_.delete(r),e.x_.removeTarget(r))}(e,t)}catch(n){Hp("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await JS(e,n)}else if(t instanceof yw?e.x_.$e(t):t instanceof ww?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(pm.min()))try{const t=await Z_(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.D_.get(t);if(!r)return;e.D_.set(t,r.withResumeToken(Og.EMPTY_BYTE_STRING,r.snapshotVersion)),BS(e,t);const i=new ib(r.target,t,n,r.sequenceNumber);zS(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Hp("RemoteStore","Failed to raise snapshot:",t),await JS(e,t)}}async function JS(e,t,n){if(!Mm(t))throw t;e.C_.add(1),await US(e),e.M_.set("Offline"),n||(n=()=>Z_(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Hp("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await MS(e)}))}function $S(e,t){return t().catch((n=>JS(e,n,t)))}async function XS(e){const t=Jp(e),n=uI(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;ZS(t);)try{const e=await tS(t.localStore,r);if(null===e){0===t.b_.length&&n.Zo();break}r=e.batchId,eI(t,e)}catch(e){await JS(t,e)}tI(t)&&nI(t)}function ZS(e){return WS(e)&&e.b_.length<10}function eI(e,t){e.b_.push(t);const n=uI(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function tI(e){return WS(e)&&!uI(e).jo()&&e.b_.length>0}function nI(e){uI(e).start()}async function rI(e){uI(e).E_()}async function iI(e){const t=uI(e);for(const n of e.b_)t.P_(n.mutations)}async function sI(e,t,n){const r=e.b_.shift(),i=nw.from(r,t,n);await $S(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await XS(e)}async function oI(e,t){t&&uI(e).h_&&await async function(e,t){if(function(e){return aw(e)&&e!==$p.ABORTED}(t.code)){const n=e.b_.shift();uI(e).Yo(),await $S(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await XS(e)}}(e,t),tI(e)&&nI(e)}async function aI(e,t){const n=Jp(e);n.asyncQueue.verifyOperationInProgress(),Hp("RemoteStore","RemoteStore received new credentials");const r=WS(n);n.C_.add(3),await US(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await MS(n)}async function lI(e,t){const n=Jp(e);t?(n.C_.delete(2),await MS(n)):t||(n.C_.add(2),await US(n),n.M_.set("Unknown"))}function cI(e){return e.O_||(e.O_=function(e,t,n){const r=Jp(e);return r.A_(),new RS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:GS.bind(null,e),Io:QS.bind(null,e),a_:YS.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),HS(e)?qS(e):e.M_.set("Unknown")):(await e.O_.stop(),KS(e))}))),e.O_}function uI(e){return e.N_||(e.N_=function(e,t,n){const r=Jp(e);return r.A_(),new DS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:rI.bind(null,e),Io:oI.bind(null,e),T_:iI.bind(null,e),I_:sI.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await XS(e)):(await e.N_.stop(),e.b_.length>0&&(Hp("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]))}))),e.N_}class hI{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Zp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new hI(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xp($p.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dI(e,t){if(Wp("AsyncQueue","".concat(t,": ").concat(e)),Mm(e))return new Xp($p.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class fI{constructor(e){this.comparator=e?(t,n)=>e(t,n)||wm.comparator(t.key,n.key):(e,t)=>wm.comparator(e.key,t.key),this.keyedMap=fy(),this.sortedSet=new xg(this.comparator)}static emptySet(e){return new fI(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fI))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new fI;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class pI{constructor(){this.B_=new xg(wm.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Qp():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class mI{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new mI(e,t,fI.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ny(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class gI{constructor(){this.k_=void 0,this.listeners=[]}}class vI{constructor(){this.queries=new cy((e=>ry(e)),ny),this.onlineState="Unknown",this.q_=new Set}}async function yI(e,t){const n=Jp(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new gI),i)try{s.k_=await n.onListen(r)}catch(e){const n=dI(e,"Initialization of query '".concat(iy(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Q_(n.onlineState),s.k_&&t.K_(s.k_)&&SI(n)}async function wI(e,t){const n=Jp(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function bI(e,t){const n=Jp(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.K_(i)&&(r=!0);t.k_=i}}r&&SI(n)}function _I(e,t,n){const r=Jp(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function SI(e){e.q_.forEach((e=>{e.next()}))}class II{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new mI(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=mI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class EI{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class kI{constructor(e){this.serializer=e}hs(e){return Mw(this.serializer,e)}Ps(e){return e.metadata.exists?qw(this.serializer,e.document,!1):fv.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return Dw(e)}}class xI{constructor(e,t,n){this.X_=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=TI(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const n=gm.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,n=new kI(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||by()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Jp(e);let s=by(),o=hy();for(const c of n){const e=t.hs(c.metadata.name);c.document&&(s=s.add(e));const n=t.Ps(c);n.setReadTime(t.Is(c.metadata.readTime)),o=o.insert(e,n)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),l=await nS(i,function(e){return Xv(Qv(gm.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>eS(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new kI(this.serializer),this.documents,this.X_.id),t=this.ta(this.documents);for(const n of this.queries)await lS(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function TI(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class CI{constructor(e){this.key=e}}class NI{constructor(e){this.key=e}}class AI{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=by(),this.mutatedKeys=by(),this._a=ay(e),this.aa=new fI(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new pI,r=t?t.aa:this.aa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=sy(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ha(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this._a(u,a)>0||l&&this._a(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{aa:s,la:n,Zi:o,mutatedKeys:i}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qp()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n),r=null!=r&&r;const o=t&&!r?this.Ia():[],a=0===this.oa.size&&this.current&&!r?1:0,l=a!==this.sa;return this.sa=a,0!==s.length||l?{snapshot:new mI(this.query,e.aa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new pI,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=by(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new NI(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new CI(n))})),t}da(e){this.ia=e.ls,this.oa=by();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return mI.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class PI{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class RI{constructor(e){this.key=e,this.Ra=!1}}class DI{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new cy((e=>ry(e)),ny),this.fa=new Map,this.ga=new Set,this.pa=new xg(wm.comparator),this.ya=new Map,this.wa=new P_,this.Sa={},this.ba=new Map,this.Da=o_.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function OI(e,t){const n=oE(e);let r,i;const s=n.ma.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const e=await nS(n.localStore,Xv(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await jI(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&FS(n.remoteStore,e)}return i}async function jI(e,t,n,r,i){e.va=(t,n,r)=>async function(e,t,n,r){let i=t.view.ca(n);i.Zi&&(i=await iS(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ca(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return KI(e,t.targetId,a.Ta),a.snapshot}(e,t,n,r);const s=await iS(e.localStore,t,!0),o=new AI(t,s.ls),a=o.ca(s.documents),l=vw.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);KI(e,n,c.Ta);const u=new PI(t,n,o);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function LI(e,t){const n=Jp(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter((e=>!ny(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await rS(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),VS(n.remoteStore,r.targetId),HI(n,r.targetId)})).catch(Pm)):(HI(n,r.targetId),await rS(n.localStore,r.targetId,!0))}async function MI(e,t){const n=Jp(e);try{const e=await function(e,t){const n=Jp(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Og.EMPTY_BYTE_STRING,pm.min()).withLastLimboFreeSnapshotVersion(pm.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.qr.updateTargetData(e,c))}));let a=hy(),l=by();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(eS(e,s,t.documentUpdates).next((e=>{a=e.us,l=e.cs}))),!r.isEqual(pm.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Rm.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ya.get(t);r&&(Yp(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ra=!0:e.modifiedDocuments.size>0?Yp(r.Ra):e.removedDocuments.size>0&&(Yp(r.Ra),r.Ra=!1))})),await YI(n,e,t)}catch(e){await Pm(e)}}function UI(e,t,n){const r=Jp(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ma.forEach(((n,r)=>{const i=r.view.Q_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Jp(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Q_(t)&&(r=!0)})),r&&SI(n)}(r.eventManager,t),e.length&&r.Va.a_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function FI(e,t,n){const r=Jp(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),s=i&&i.key;if(s){let e=new xg(wm.comparator);e=e.insert(s,fv.newNoDocument(s,pm.min()));const n=by().add(s),i=new gw(pm.min(),new Map,new xg(um),e,n);await MI(r,i),r.pa=r.pa.remove(s),r.ya.delete(t),QI(r)}else await rS(r.localStore,t,!1).then((()=>HI(r,t,n))).catch(Pm)}async function VI(e,t){const n=Jp(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Jp(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Rm.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Yp(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=by();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);qI(n,r,null),BI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await YI(n,e)}catch(e){await Pm(e)}}async function zI(e,t,n){const r=Jp(e);try{const e=await function(e,t){const n=Jp(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Yp(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);qI(r,t,n),BI(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await YI(r,e)}catch(n){await Pm(n)}}function BI(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function qI(e,t,n){const r=Jp(e);let i=r.Sa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function HI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||WI(e,t)}))}function WI(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(VS(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),QI(e))}function KI(e,t,n){for(const r of n)r instanceof CI?(e.wa.addReference(r.key,t),GI(e,r)):r instanceof NI?(Hp("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||WI(e,r.key)):Qp()}function GI(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(Hp("SyncEngine","New document in limbo: "+n),e.ga.add(r),QI(e))}function QI(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new wm(gm.fromString(t)),r=e.Da.next();e.ya.set(r,new RI(n)),e.pa=e.pa.insert(n,r),FS(e.remoteStore,new ib(Xv(Qv(n.path)),r,"TargetPurposeLimboResolution",Hm._e))}}async function YI(e,t,n){const r=Jp(e),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach(((e,a)=>{o.push(r.va(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=G_.Qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Va.a_(i),await async function(e,t){const n=Jp(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Rm.forEach(t,(t=>Rm.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Rm.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Mm(e))throw e;Hp("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,s))}async function JI(e,t){const n=Jp(e);if(!n.currentUser.isEqual(t)){Hp("SyncEngine","User change. New user:",t.toKey());const e=await X_(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new Xp($p.CANCELLED,t))}))})),e.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await YI(n,e._s)}}function $I(e,t){const n=Jp(e),r=n.ya.get(t);if(r&&r.Ra)return by().add(r.key);{let e=by();const r=n.fa.get(t);if(!r)return e;for(const t of r){const r=n.ma.get(t);e=e.unionWith(r.view.ua)}return e}}async function XI(e,t){const n=Jp(e),r=await iS(n.localStore,t.query,!0),i=t.view.da(r);return n.isPrimaryClient&&KI(n,t.targetId,i.Ta),i}async function ZI(e,t){const n=Jp(e);return oS(n.localStore,t).then((e=>YI(n,e)))}async function eE(e,t,n,r){const i=Jp(e),s=await function(e,t){const n=Jp(e),r=Jp(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Rm.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await XS(i.remoteStore):"acknowledged"===n||"rejected"===n?(qI(i,t,r||null),BI(i,t),function(e,t){Jp(Jp(e).mutationQueue).Fn(t)}(i.localStore,t)):Qp(),await YI(i,s)):Hp("SyncEngine","Cannot apply mutation batch with id: "+t)}async function tE(e,t,n){const r=Jp(e),i=[],s=[];for(const o of t){let e;const t=r.fa.get(o);if(t&&0!==t.length){e=await nS(r.localStore,Xv(t[0]));for(const e of t){const t=r.ma.get(e),n=await XI(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await sS(r.localStore,o);e=await nS(r.localStore,t),await jI(r,nE(t),o,!1,e.resumeToken)}i.push(e)}return r.Va.a_(s),i}function nE(e){return Gv(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function rE(e){return function(e){return Jp(Jp(e).persistence).Bi()}(Jp(e).localStore)}async function iE(e,t,n,r){const i=Jp(e);if(i.Ca)return void Hp("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await oS(i.localStore,oy(s[0])),r=gw.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Og.EMPTY_BYTE_STRING);await YI(i,e,r);break}case"rejected":await rS(i.localStore,t,!0),HI(i,t,r);break;default:Qp()}}async function sE(e,t,n){const r=oE(e);if(r.Ca){for(const e of t){if(r.fa.has(e)){Hp("SyncEngine","Adding an already active target "+e);continue}const t=await sS(r.localStore,e),n=await nS(r.localStore,t);await jI(r,nE(t),n.targetId,!1,n.resumeToken),FS(r.remoteStore,n)}for(const e of n)r.fa.has(e)&&await rS(r.localStore,e,!1).then((()=>{VS(r.remoteStore,e),HI(r,e)})).catch(Pm)}}function oE(e){const t=Jp(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=MI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$I.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=FI.bind(null,t),t.Va.a_=bI.bind(null,t.eventManager),t.Va.Fa=_I.bind(null,t.eventManager),t}function aE(e){const t=Jp(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=VI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zI.bind(null,t),t}class lE{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=NS(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return $_(this.persistence,new Y_,e.initialUser,this.serializer)}createPersistence(e){return new M_(F_.jr,this.serializer)}createSharedClientState(e){return new yS}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class cE extends lE{constructor(e,t,n){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await aE(this.xa.syncEngine),await XS(this.xa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return $_(this.persistence,new Y_,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new f_(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new qm(t,this.persistence);return new Bm(e.asyncQueue,n)}createPersistence(e){const t=K_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Xb.withCacheSize(this.cacheSizeBytes):Xb.DEFAULT;return new q_(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,TS(),CS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new yS}}class uE extends cE{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xa.syncEngine;this.sharedClientState instanceof vS&&(this.sharedClientState.syncEngine={Ys:eE.bind(null,t),Zs:iE.bind(null,t),Xs:sE.bind(null,t),Bi:rE.bind(null,t),Js:ZI.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=Jp(e);if(oE(n),aE(n),!0===t&&!0!==n.Ca){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await tE(n,e.toArray());n.Ca=!0,await lI(n.remoteStore,!0);for(const r of t)FS(n.remoteStore,r)}else if(!1===t&&!1!==n.Ca){const e=[];let t=Promise.resolve();n.fa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(HI(n,i),rS(n.localStore,i,!0)))),VS(n.remoteStore,i)})),await t,await tE(n,e),function(e){const t=Jp(e);t.ya.forEach(((e,n)=>{VS(t.remoteStore,n)})),t.wa.Vr(),t.ya=new Map,t.pa=new xg(wm.comparator)}(n),n.Ca=!1,await lI(n.remoteStore,!1)}}(this.xa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=TS();if(!vS.D(t))throw new Xp($p.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=K_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vS(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class hE{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>UI(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=JI.bind(null,this.syncEngine),await lI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new vI}createDatastore(e){const t=NS(e.databaseInfo.databaseId),n=function(e){return new xS(e)}(e.databaseInfo);return function(e,t,n,r){return new OS(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new LS(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>UI(this.syncEngine,e,0)),bS.D()?new bS:new wS)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new DI(e,t,n,r,i,s);return o&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Jp(e);Hp("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await US(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}function dE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class fE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Wp("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class pE{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new Zp,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then((e=>{e&&e.Z_()?this.metadata.resolve(e.Y_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Y_))))}),(e=>this.metadata.reject(e)))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(null===e)return null;const t=this.La.decode(e),n=Number(t);isNaN(n)&&this.Qa("length string (".concat(t,") is not valid number"));const r=await this.Ka(n);return new EI(JSON.parse(r),e.length+n)}$a(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(0===this.buffer.length)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const t=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qa(e){throw this.Ba.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ua(){const e=await this.Ba.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class mE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Xp($p.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Jp(e),r=Vw(n.serializer)+"/documents",i={documents:t.map((e=>Lw(n.serializer,e)))},s=await n.Co("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Yp(!!t.found),t.found.name,t.found.updateTime;const n=Mw(e,t.found.name),r=Dw(t.found.updateTime),i=t.found.createTime?Dw(t.found.createTime):pm.min(),s=new hv({mapValue:{fields:t.found.fields}});return fv.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Yp(!!t.missing),Yp(!!t.readTime);const n=Mw(e,t.missing),r=Dw(t.readTime);return fv.newNoDocument(n,r)}(e,t):Qp()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Yp(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=wm.fromPath(t);this.mutations.push(new ew(n,this.precondition(n)))})),await async function(e,t){const n=Jp(e),r=Vw(n.serializer)+"/documents",i={writes:t.map((e=>Hw(n.serializer,e)))};await n.wo("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qp();t=pm.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Xp($p.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(pm.min())?Vy.exists(!1):Vy.updateTime(t):Vy.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(pm.min()))throw new Xp($p.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vy.updateTime(t)}return Vy.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class gE{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Wa=n.maxAttempts,this.zo=new AS(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko((async()=>{const e=new mE(this.datastore),t=this.za(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.ja(e)}))))})).catch((e=>{this.ja(e)}))}))}za(e){try{const t=this.updateFunction(e);return!Wm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ga(),Promise.resolve())))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!aw(t)}return!1}}class vE{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Vp.UNAUTHENTICATED,this.clientId=cm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Hp("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Hp("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Xp($p.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=dI(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function yE(e,t){e.asyncQueue.verifyOperationInProgress(),Hp("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await X_(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function wE(e,t){e.asyncQueue.verifyOperationInProgress();const n=await _E(e);Hp("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>aI(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>aI(t.remoteStore,n))),e._onlineComponents=t}function bE(e){return"FirebaseError"===e.name?e.code===$p.FAILED_PRECONDITION||e.code===$p.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function _E(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Hp("FirestoreClient","Using user provided OfflineComponentProvider");try{await yE(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!bE(n))throw n;Kp("Error using user provided cache. Falling back to memory cache: "+n),await yE(e,new lE)}}else Hp("FirestoreClient","Using default OfflineComponentProvider"),await yE(e,new lE);return e._offlineComponents}async function SE(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Hp("FirestoreClient","Using user provided OnlineComponentProvider"),await wE(e,e._uninitializedComponentsProvider._online)):(Hp("FirestoreClient","Using default OnlineComponentProvider"),await wE(e,new hE))),e._onlineComponents}function IE(e){return _E(e).then((e=>e.persistence))}function EE(e){return _E(e).then((e=>e.localStore))}function kE(e){return SE(e).then((e=>e.remoteStore))}function xE(e){return SE(e).then((e=>e.syncEngine))}function TE(e){return SE(e).then((e=>e.datastore))}async function CE(e){const t=await SE(e),n=t.eventManager;return n.onListen=OI.bind(null,t.syncEngine),n.onUnlisten=LI.bind(null,t.syncEngine),n}function NE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Zp;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new fE({next:s=>{t.enqueueAndForget((()=>wI(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Xp($p.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Xp($p.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new II(Qv(n.path),s,{includeMetadataChanges:!0,J_:!0});return yI(e,o)}(await CE(e),e.asyncQueue,t,n,r))),r.promise}function AE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Zp;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new fE({next:n=>{t.enqueueAndForget((()=>wI(e,o))),n.fromCache&&"server"===r.source?i.reject(new Xp($p.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new II(n,s,{includeMetadataChanges:!0,J_:!0});return yI(e,o)}(await CE(e),e.asyncQueue,t,n,r))),r.promise}function PE(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?uw().encode(e):e,function(e,t){return new pE(e,t)}(function(e,t){if(e instanceof Uint8Array)return dE(e,t);if(e instanceof ArrayBuffer)return dE(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,NS(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Jp(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Jp(e),r=Dw(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(TI(r));const i=new xI(r,e.localStore,t.serializer);let s=await t.Ma();for(;s;){const e=await i.ea(s);e&&n._updateProgress(e),s=await t.Ma()}const o=await i.complete();return await YI(e,o.ra,void 0),await function(e,t){const n=Jp(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.na)}catch(e){return Kp("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await xE(e),i,r)}))}function RE(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const DE=new Map;function OE(e,t,n){if(!n)throw new Xp($p.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function jE(e,t,n,r){if(!0===t&&!0===r)throw new Xp($p.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function LE(e){if(!wm.isDocumentKey(e))throw new Xp($p.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ME(e){if(wm.isDocumentKey(e))throw new Xp($p.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function UE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Qp()}function FE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xp($p.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=UE(e);throw new Xp($p.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function VE(e,t){if(t<=0)throw new Xp($p.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class zE{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Xp($p.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Xp($p.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RE(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Xp($p.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Xp($p.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Xp($p.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class BE{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Xp($p.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Xp($p.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new tm;switch(e.type){case"firstParty":return new sm(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Xp($p.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=DE.get(e);t&&(Hp("ComponentProvider","Removing Datastore"),DE.delete(e),t.terminate())}(this),Promise.resolve()}}function qE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=FE(e,BE))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Kp("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Vp.MOCK_USER;else{t=Or(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Xp($p.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Vp(s)}e._authCredentials=new nm(new em(t,n))}}class HE{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new HE(this.firestore,e,this._query)}}class WE{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new KE(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new WE(this.firestore,e,this._key)}}class KE extends HE{constructor(e,t,n){super(e,t,Qv(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new WE(this.firestore,null,new wm(e))}withConverter(e){return new KE(this.firestore,e,this._path)}}function GE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Zr(e),OE("collection","path",t),e instanceof BE){const n=gm.fromString(t,...r);return ME(n),new KE(e,null,n)}{if(!(e instanceof WE||e instanceof KE))throw new Xp($p.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(gm.fromString(t,...r));return ME(n),new KE(e.firestore,null,n)}}function QE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Zr(e),1===arguments.length&&(t=cm.newId()),OE("doc","path",t),e instanceof BE){const n=gm.fromString(t,...r);return LE(n),new WE(e,null,new wm(n))}{if(!(e instanceof WE||e instanceof KE))throw new Xp($p.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(gm.fromString(t,...r));return LE(n),new WE(e.firestore,e instanceof KE?e.converter:null,new wm(n))}}function YE(e,t){return e=Zr(e),t=Zr(t),(e instanceof WE||e instanceof KE)&&(t instanceof WE||t instanceof KE)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function JE(e,t){return e=Zr(e),t=Zr(t),e instanceof HE&&t instanceof HE&&e.firestore===t.firestore&&ny(e._query,t._query)&&e.converter===t.converter}class $E{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new AS(this,"async_queue_retry"),this.iu=()=>{const e=CS();e&&Hp("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=CS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=CS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new Zp;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Mm(e))throw e;Hp("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Wp("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=hI.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(r),r}su(){this.eu&&Qp()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function XE(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class ZE{constructor(){this._progressObserver={},this._taskCompletionResolver=new Zp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ek extends BE{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new $E,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||nk(this),this._firestoreClient.terminate()}}function tk(e){return e._firestoreClient||nk(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function nk(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Bg(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,RE(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new vE(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function rk(e,t,n){const r=new Zp;return e.asyncQueue.enqueue((async()=>{try{await yE(e,n),await wE(e,t),r.resolve()}catch(e){const n=e;if(!bE(n))throw n;Kp("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function ik(e){return function(e){const t=new Zp;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Jp(e);WS(n.remoteStore)||Hp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Jp(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.ba.get(e)||[];r.push(t),n.ba.set(e,r)}catch(e){const n=dI(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await xE(e),t))),t.promise}(tk(e=FE(e,ek)))}function sk(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await IE(e),n=await kE(e);return t.setNetworkEnabled(!0),function(e){const t=Jp(e);return t.C_.delete(0),MS(t)}(n)}))}(tk(e=FE(e,ek)))}function ok(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await IE(e),n=await kE(e);return t.setNetworkEnabled(!1),async function(e){const t=Jp(e);t.C_.add(0),await US(t),t.M_.set("Offline")}(n)}))}(tk(e=FE(e,ek)))}function ak(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Jp(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await EE(e),t)))}(tk(e=FE(e,ek)),t).then((t=>t?new HE(e,null,t.query):null))}function lk(e){if(e._initialized||e._terminated)throw new Xp($p.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ck{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ck(Og.fromBase64String(e))}catch(e){throw new Xp($p.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ck(Og.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class uk{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Xp($p.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ym(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hk{constructor(e){this._methodName=e}}class dk{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xp($p.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xp($p.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return um(this._lat,e._lat)||um(this._long,e._long)}}const fk=/^__.*__$/;class pk{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Yy(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qy(e,this.data,t,this.fieldTransforms)}}class mk{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Yy(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gk(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qp()}}class vk{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new vk(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Mk(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(gk(this.Iu)&&fk.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class yk{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||NS(e)}pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new vk({Iu:e,methodName:t,gu:n,path:ym.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wk(e){const t=e._freezeSettings(),n=NS(e._databaseId);return new yk(e._databaseId,!!t.ignoreUndefinedProperties,n)}function bk(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.pu(s.merge||s.mergeFields?2:0,t,n,i);Dk("Data must be an object, but it was:",o,r);const a=Pk(r,o);let l,c;if(s.merge)l=new Rg(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Ok(t,r,n);if(!o.contains(i))throw new Xp($p.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Uk(e,i)||e.push(i)}l=new Rg(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new pk(new hv(a),l,c)}class _k extends hk{_toFieldTransform(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _k}}function Sk(e,t,n){return new vk({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Ik extends hk{_toFieldTransform(e){return new Uy(e.path,new Ay)}isEqual(e){return e instanceof Ik}}class Ek extends hk{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=Sk(this,e,!0),n=this.yu.map((e=>Ak(e,t))),r=new Py(n);return new Uy(e.path,r)}isEqual(e){return this===e}}class kk extends hk{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=Sk(this,e,!0),n=this.yu.map((e=>Ak(e,t))),r=new Dy(n);return new Uy(e.path,r)}isEqual(e){return this===e}}class xk extends hk{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new jy(e.serializer,ky(e.serializer,this.wu));return new Uy(e.path,t)}isEqual(e){return this===e}}function Tk(e,t,n,r){const i=e.pu(1,t,n);Dk("Data must be an object, but it was:",i,r);const s=[],o=hv.empty();Eg(r,((e,r)=>{const a=Lk(t,e,n);r=Zr(r);const l=i.Ru(a);if(r instanceof _k)s.push(a);else{const e=Ak(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Rg(s);return new mk(o,a,i.fieldTransforms)}function Ck(e,t,n,r,i,s){const o=e.pu(1,t,n),a=[Ok(t,r,n)],l=[i];if(s.length%2!=0)throw new Xp($p.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(Ok(t,s[d])),l.push(s[d+1]);const c=[],u=hv.empty();for(let d=a.length-1;d>=0;--d)if(!Uk(c,a[d])){const e=a[d];let t=l[d];t=Zr(t);const n=o.Ru(e);if(t instanceof _k)c.push(e);else{const r=Ak(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Rg(c);return new mk(u,h,o.fieldTransforms)}function Nk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ak(n,e.pu(r?4:3,t))}function Ak(e,t){if(Rk(e=Zr(e)))return Dk("Unsupported field value:",t,e),Pk(e,t);if(e instanceof hk)return function(e,t){if(!gk(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ak(i,t.Vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Zr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ky(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=fm.fromDate(e);return{timestampValue:Aw(t.serializer,n)}}if(e instanceof fm){const n=new fm(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Aw(t.serializer,n)}}if(e instanceof dk)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ck)return{bytesValue:Pw(t.serializer,e._byteString)};if(e instanceof WE){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Ow(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(UE(e)))}(e,t)}function Pk(e,t){const n={};return kg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Eg(e,((e,r)=>{const i=Ak(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Rk(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof fm||e instanceof dk||e instanceof ck||e instanceof WE||e instanceof hk)}function Dk(e,t,n){if(!Rk(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=UE(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function Ok(e,t,n){if((t=Zr(t))instanceof uk)return t._internalPath;if("string"==typeof t)return Lk(e,t);throw Mk("Field path arguments must be of type string or ",e,!1,void 0,n)}const jk=new RegExp("[~\\*/\\[\\]]");function Lk(e,t,n){if(t.search(jk)>=0)throw Mk("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new uk(...t.split("."))._internalPath}catch(Ru){throw Mk("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Mk(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Xp($p.INVALID_ARGUMENT,a+e+l)}function Uk(e,t){return e.some((e=>e.isEqual(t)))}class Fk{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new WE(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Vk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Vk extends Fk{data(){return super.data()}}function zk(e,t){return"string"==typeof t?Lk(e,t):t instanceof uk?t._internalPath:t._delegate._internalPath}function Bk(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Xp($p.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qk{}class Hk extends qk{}function Wk(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof qk&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Gk)).length,n=e.filter((e=>e instanceof Kk)).length;if(t>1||t>0&&n>0)throw new Xp($p.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Kk extends Hk{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Kk(e,t,n)}_apply(e){const t=this._parse(e);return tx(e._query,t),new HE(e.firestore,e.converter,ey(e._query,t))}_parse(e){const t=wk(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Xp($p.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){ex(o,s);const t=[];for(const n of o)t.push(Zk(r,e,n));a={arrayValue:{values:t}}}else a=Zk(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||ex(o,s),a=Nk(n,t,o,"in"===s||"not-in"===s);return bv.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Gk extends qk{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Gk(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:_v.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)tx(n,i),n=ey(n,i)}(e._query,t),new HE(e.firestore,e.converter,ey(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Qk extends Hk{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Qk(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Xp($p.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Xp($p.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vv(t,n)}(e._query,this._field,this._direction);return new HE(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Kv(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Yk extends Hk{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Yk(e,t,n)}_apply(e){return new HE(e.firestore,e.converter,ty(e._query,this._limit,this._limitType))}}class Jk extends Hk{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Jk(e,t,n)}_apply(e){const t=Xk(e,this.type,this._docOrFields,this._inclusive);return new HE(e.firestore,e.converter,function(e,t){return new Kv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class $k extends Hk{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new $k(e,t,n)}_apply(e){const t=Xk(e,this.type,this._docOrFields,this._inclusive);return new HE(e.firestore,e.converter,function(e,t){return new Kv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Xk(e,t,n,r){if(n[0]=Zr(n[0]),n[0]instanceof Fk)return function(e,t,n,r,i){if(!r)throw new Xp($p.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of $v(e))if(o.field.isKeyField())s.push(Zg(t,r.key));else{const e=r.data.field(o.field);if(Fg(e))throw new Xp($p.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Xp($p.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new pv(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=wk(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Xp($p.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Xp($p.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Jv(e)&&-1!==s.indexOf("/"))throw new Xp($p.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(gm.fromString(s));if(!wm.isDocumentKey(n))throw new Xp($p.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new wm(n);a.push(Zg(t,i))}else{const e=Nk(n,r,s);a.push(e)}}return new pv(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Zk(e,t,n){if("string"==typeof(n=Zr(n))){if(""===n)throw new Xp($p.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jv(t)&&-1!==n.indexOf("/"))throw new Xp($p.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(gm.fromString(n));if(!wm.isDocumentKey(r))throw new Xp($p.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Zg(e,new wm(r))}if(n instanceof WE)return Zg(e,n._key);throw new Xp($p.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(UE(n),"."))}function ex(e,t){if(!Array.isArray(e)||0===e.length)throw new Xp($p.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function tx(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Xp($p.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Xp($p.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class nx{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Kg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mg(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ug(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qp()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Eg(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new dk(Mg(e.latitude),Mg(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Vg(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(zg(e));default:return null}}convertTimestamp(e){const t=Lg(e);return new fm(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=gm.fromString(e);Yp(rb(n));const r=new qg(n.get(1),n.get(3)),i=new wm(n.popFirst(5));return r.isEqual(t)||Wp("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function rx(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ix extends nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new ck(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new WE(this.firestore,null,t)}}class sx{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ox extends Fk{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new ax(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(zk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class ax extends ox{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class lx{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new sx(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new ax(this._firestore,this._userDataWriter,n.key,n,new sx(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Xp($p.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new ax(e._firestore,e._userDataWriter,n.doc.key,n.doc,new sx(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new ax(e._firestore,e._userDataWriter,t.doc.key,t.doc,new sx(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:cx(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function cx(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qp()}}function ux(e,t){return e instanceof ox&&t instanceof ox?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof lx&&t instanceof lx&&e._firestore===t._firestore&&JE(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class hx extends nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new ck(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new WE(this.firestore,null,t)}}function dx(e){e=FE(e,WE);const t=FE(e.firestore,ek),n=tk(t),r=new hx(t);return function(e,t){const n=new Zp;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Jp(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Xp($p.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=dI(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await EE(e),t,n))),n.promise}(n,e._key).then((n=>new ox(t,r,e._key,n,new sx(null!==n&&n.hasLocalMutations,!0),e.converter)))}function fx(e){e=FE(e,HE);const t=FE(e.firestore,ek),n=tk(t),r=new hx(t);return function(e,t){const n=new Zp;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await iS(e,t,!0),i=new AI(t,r.ls),s=i.ca(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=dI(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await EE(e),t,n))),n.promise}(n,e._query).then((n=>new lx(t,r,e,n)))}function px(e,t,n){e=FE(e,WE);const r=FE(e.firestore,ek),i=rx(e.converter,t,n);return yx(r,[bk(wk(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Vy.none())])}function mx(e,t,n){e=FE(e,WE);const r=FE(e.firestore,ek),i=wk(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Zr(t))||t instanceof uk?Ck(i,"updateDoc",e._key,t,n,a):Tk(i,"updateDoc",e._key,t),yx(r,[s.toMutation(e._key,Vy.exists(!0))])}function gx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Zr(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||XE(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(XE(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof WE)h=FE(e.firestore,ek),d=Qv(e._key.path),u={next:t=>{n[l]&&n[l](wx(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=FE(e,HE);h=FE(t.firestore,ek),d=t._query;const r=new hx(h);u={next:e=>{n[l]&&n[l](new lx(h,r,t,e))},error:n[l+1],complete:n[l+2]},Bk(e._query)}return function(e,t,n,r){const i=new fE(r),s=new II(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>yI(await CE(e),s))),()=>{i.Na(),e.asyncQueue.enqueueAndForget((async()=>wI(await CE(e),s)))}}(tk(h),d,c,u)}function vx(e,t){return function(e,t){const n=new fE(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Jp(e).q_.add(t),t.next()}(await CE(e),n))),()=>{n.Na(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Jp(e).q_.delete(t)}(await CE(e),n)))}}(tk(e=FE(e,ek)),XE(t)?t:{next:t})}function yx(e,t){return function(e,t){const n=new Zp;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=aE(e);try{const e=await function(e,t){const n=Jp(e),r=fm.now(),i=t.reduce(((e,t)=>e.add(t.key)),by());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=hy(),l=by();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Ky(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Yy(e.key,t,dv(t.value.mapValue),Vy.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:py(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Sa[e.currentUser.toKey()];r||(r=new xg(um)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(r,e.batchId,n),await YI(r,e.changes),await XS(r.remoteStore)}catch(e){const t=dI(e,"Failed to persist write");n.reject(t)}}(await xE(e),t,n))),n.promise}(tk(e),t)}function wx(e,t,n){const r=n.docs.get(t._key),i=new hx(e);return new ox(e,i,t._key,r,new sx(n.hasPendingWrites,n.fromCache),t.converter)}const bx={maxAttempts:5};class _x{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wk(e)}set(e,t,n){this._verifyNotCommitted();const r=Sx(e,this._firestore),i=rx(r.converter,t,n),s=bk(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Vy.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Sx(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Zr(t))||t instanceof uk?Ck(this._dataReader,"WriteBatch.update",r._key,t,n,o):Tk(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Vy.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Sx(e,this._firestore);return this._mutations=this._mutations.concat(new Zy(t._key,Vy.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xp($p.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sx(e,t){if((e=Zr(e)).firestore!==t)throw new Xp($p.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Ix extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wk(e)}get(e){const t=Sx(e,this._firestore),n=new ix(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Qp();const r=e[0];if(r.isFoundDocument())return new Fk(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Fk(this._firestore,n,t._key,null,t.converter);throw Qp()}))}set(e,t,n){const r=Sx(e,this._firestore),i=rx(r.converter,t,n),s=bk(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=Sx(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Zr(t))||t instanceof uk?Ck(this._dataReader,"Transaction.update",r._key,t,n,o):Tk(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Sx(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Sx(e,this._firestore),n=new hx(this._firestore);return super.get(e).then((e=>new ox(this._firestore,n,t._key,e._document,new sx(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){zp=e}(Wi),Fi(new ei("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new ek(new rm(e.getProvider("auth-internal")),new am(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Xp($p.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qg(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Ji(Fp,"4.4.0",e),Ji(Fp,"4.4.0","esm2017")}();function Ex(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Xp("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function kx(){if("undefined"===typeof Uint8Array)throw new Xp("unimplemented","Uint8Arrays are not available in this environment.")}function xx(){if("undefined"==typeof atob)throw new Xp("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Tx{constructor(e){this._delegate=e}static fromBase64String(e){return xx(),new Tx(ck.fromBase64String(e))}static fromUint8Array(e){return kx(),new Tx(ck.fromUint8Array(e))}toBase64(){return xx(),this._delegate.toBase64()}toUint8Array(){return kx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Cx(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Nx{enableIndexedDbPersistence(e,t){return function(e,t){lk(e=FE(e,ek));const n=tk(e);if(n._uninitializedComponentsProvider)throw new Xp($p.FAILED_PRECONDITION,"SDK cache is already specified.");Kp("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new hE;return rk(n,i,new cE(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){lk(e=FE(e,ek));const t=tk(e);if(t._uninitializedComponentsProvider)throw new Xp($p.FAILED_PRECONDITION,"SDK cache is already specified.");Kp("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new hE;return rk(t,r,new uE(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Xp($p.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Zp;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Om.D())return Promise.resolve();const t=e+"main";await Om.delete(t)}(K_(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Ax{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof qg||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Kp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};qE(this._delegate,e,t,n)}enableNetwork(){return sk(this._delegate)}disableNetwork(){return ok(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,jE("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ik(this._delegate)}onSnapshotsInSync(e){return vx(this._delegate,e)}get app(){if(!this._appCompat)throw new Xp("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hx(this,GE(this._delegate,e))}catch(t){throw Lx(t,"collection()","Firestore.collection()")}}doc(e){try{return new jx(this,QE(this._delegate,e))}catch(t){throw Lx(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zx(this,function(e,t){if(e=FE(e,BE),OE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Xp($p.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new HE(e,null,function(e){return new Kv(gm.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Lx(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=FE(e,ek);const r=Object.assign(Object.assign({},bx),n);return function(e){if(e.maxAttempts<1)throw new Xp($p.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Zp;return e.asyncQueue.enqueueAndForget((async()=>{const i=await TE(e);new gE(e.asyncQueue,i,n,t,r).run()})),r.promise}(tk(e),(n=>t(new Ix(e,n))),r)}(this._delegate,(t=>e(new Rx(this,t))))}batch(){return tk(this._delegate),new Dx(new _x(this._delegate,(e=>yx(this._delegate,e))))}loadBundle(e){return function(e,t){const n=tk(e=FE(e,ek)),r=new ZE;return PE(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return ak(this._delegate,e).then((e=>e?new zx(this,e):null))}}class Px extends nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tx(new ck(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return jx.forKey(t,this.firestore,null)}}class Rx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Px(e)}get(e){const t=Wx(e);return this._delegate.get(t).then((e=>new Fx(this._firestore,new ox(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=Wx(e);return n?(Ex("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Wx(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Wx(e);return this._delegate.delete(t),this}}class Dx{constructor(e){this._delegate=e}set(e,t,n){const r=Wx(e);return n?(Ex("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Wx(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Wx(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ox{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new ax(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Vx(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Ox.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Ox(e,new Px(e),t),r.set(t,i)),i}}Ox.INSTANCES=new WeakMap;class jx{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Px(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Xp("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new jx(t,new WE(t._delegate,n,new wm(e)))}static forKey(e,t,n){return new jx(t,new WE(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Hx(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hx(this.firestore,GE(this._delegate,e))}catch(t){throw Lx(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Zr(e))instanceof WE&&YE(this._delegate,e)}set(e,t){t=Ex("DocumentReference.set",t);try{return t?px(this._delegate,e,t):px(this._delegate,e)}catch(n){throw Lx(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?mx(this._delegate,e):mx(this._delegate,e,t,...r)}catch(s){throw Lx(s,"updateDoc()","DocumentReference.update()")}}delete(){return yx(FE((e=this._delegate).firestore,ek),[new Zy(e._key,Vy.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Mx(t),i=Ux(t,(e=>new Fx(this.firestore,new ox(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return gx(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?dx(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=FE(e,WE);const t=FE(e.firestore,ek);return NE(tk(t),e._key,{source:"server"}).then((n=>wx(t,e,n)))}(this._delegate):function(e){e=FE(e,WE);const t=FE(e.firestore,ek);return NE(tk(t),e._key).then((n=>wx(t,e,n)))}(this._delegate),t.then((e=>new Fx(this.firestore,new ox(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new jx(this.firestore,e?this._delegate.withConverter(Ox.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Lx(e,t,n){return e.message=e.message.replace(t,n),e}function Mx(e){for(const t of e)if("object"===typeof t&&!Cx(t))return t;return{}}function Ux(e,t){var n,r;let i;return i=Cx(e[0])?e[0]:Cx(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Fx{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new jx(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ux(this._delegate,e._delegate)}}class Vx extends Fx{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Qp(),t}}class zx{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Px(e)}where(e,t,n){try{return new zx(this.firestore,Wk(this._delegate,function(e,t,n){const r=t,i=zk("where",e);return Kk._create(i,r,n)}(e,t,n)))}catch(r){throw Lx(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new zx(this.firestore,Wk(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=zk("orderBy",e);return Qk._create(n,t)}(e,t)))}catch(n){throw Lx(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new zx(this.firestore,Wk(this._delegate,(VE("limit",t=e),Yk._create("limit",t,"F"))))}catch(t){throw Lx(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new zx(this.firestore,Wk(this._delegate,(VE("limitToLast",t=e),Yk._create("limitToLast",t,"L"))))}catch(t){throw Lx(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new zx(this.firestore,Wk(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Jk._create("startAt",t,!0)}(...arguments)))}catch(e){throw Lx(e,"startAt()","Query.startAt()")}}startAfter(){try{return new zx(this.firestore,Wk(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Jk._create("startAfter",t,!1)}(...arguments)))}catch(e){throw Lx(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new zx(this.firestore,Wk(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $k._create("endBefore",t,!1)}(...arguments)))}catch(e){throw Lx(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new zx(this.firestore,Wk(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $k._create("endAt",t,!0)}(...arguments)))}catch(e){throw Lx(e,"endAt()","Query.endAt()")}}isEqual(e){return JE(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?fx(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=FE(e,HE);const t=FE(e.firestore,ek),n=tk(t),r=new hx(t);return AE(n,e._query,{source:"server"}).then((n=>new lx(t,r,e,n)))}(this._delegate):function(e){e=FE(e,HE);const t=FE(e.firestore,ek),n=tk(t),r=new hx(t);return Bk(e._query),AE(n,e._query).then((n=>new lx(t,r,e,n)))}(this._delegate),t.then((e=>new qx(this.firestore,new lx(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Mx(t),i=Ux(t,(e=>new qx(this.firestore,new lx(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return gx(this._delegate,r,i)}withConverter(e){return new zx(this.firestore,e?this._delegate.withConverter(Ox.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Bx{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Vx(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class qx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new zx(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Vx(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Bx(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Vx(this._firestore,n))}))}isEqual(e){return ux(this._delegate,e._delegate)}}class Hx extends zx{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new jx(this.firestore,e):null}doc(e){try{return new jx(this.firestore,void 0===e?QE(this._delegate):QE(this._delegate,e))}catch(t){throw Lx(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=FE(e.firestore,ek),r=QE(e),i=rx(e.converter,t);return yx(n,[bk(wk(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Vy.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new jx(this.firestore,e)))}isEqual(e){return YE(this._delegate,e._delegate)}withConverter(e){return new Hx(this.firestore,e?this._delegate.withConverter(Ox.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Wx(e){return FE(e,WE)}class Kx{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new uk(...t)}static documentId(){return new Kx(ym.keyField().canonicalString())}isEqual(e){return(e=Zr(e))instanceof uk&&this._delegate._internalPath.isEqual(e._internalPath)}}class Gx{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Ik("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Gx(e)}static delete(){const e=new _k("deleteField");return e._methodName="FieldValue.delete",new Gx(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ek("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Gx(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new kk("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Gx(e)}static increment(e){const t=new xk("increment",e);return t._methodName="FieldValue.increment",new Gx(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Qx={Firestore:Ax,GeoPoint:dk,Timestamp:fm,Blob:Tx,Transaction:Rx,WriteBatch:Dx,DocumentReference:jx,DocumentSnapshot:Fx,Query:zx,QueryDocumentSnapshot:Vx,QuerySnapshot:qx,CollectionReference:Hx,FieldPath:Kx,FieldValue:Gx,setLogLevel:function(e){var t;t=e,Bp.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ei("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Qx)))}(e,((e,t)=>new Ax(e,t,new Nx))),e.registerVersion("@firebase/firestore-compat","0.3.23")}(ms);const Yx="firebasestorage.googleapis.com",Jx="storageBucket";class $x extends zr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(eT(e),"Firebase Storage: ".concat(t," (").concat(eT(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$x.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return eT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Xx,Zx;function eT(e){return"storage/"+e}function tT(){return new $x(Xx.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function nT(){return new $x(Xx.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rT(){return new $x(Xx.CANCELED,"User canceled the upload/download.")}function iT(){return new $x(Xx.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function sT(e){return new $x(Xx.INVALID_ARGUMENT,e)}function oT(){return new $x(Xx.APP_DELETED,"The Firebase app was deleted.")}function aT(e){return new $x(Xx.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lT(e,t){return new $x(Xx.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function cT(e){throw new $x(Xx.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Xx||(Xx={}));class uT{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=uT.makeFromUrl(e,t)}catch(i){return new uT(e,"")}if(""===n.path)return n;throw r=e,new $x(Xx.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===Yx?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new uT(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new $x(Xx.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class hT{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function dT(e){return"string"===typeof e||e instanceof String}function fT(e){return pT()&&e instanceof Blob}function pT(){return"undefined"!==typeof Blob}function mT(e,t,n,r){if(r<t)throw sT("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw sT("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function gT(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function vT(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function yT(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Zx||(Zx={}));class wT{constructor(e,t,n,r,i,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new bT(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Zx.NO_ERROR,i=n.getStatus();if(!t||yT(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Zx.ABORT;return void e(!1,new bT(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new bT(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){r(s)}else if(null!==i){const e=tT();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?oT():rT())}else{r(nT())}};this.canceled_?t(0,new bT(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function m(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class bT{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function _T(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ST(){const e=_T();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(pT())return new Blob(n);throw new $x(Xx.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function IT(e){if("undefined"===typeof atob)throw t="base-64",new $x(Xx.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const ET={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class kT{constructor(e,t){this.data=e,this.contentType=t||null}}function xT(e,t){switch(e){case ET.RAW:return new kT(TT(t));case ET.BASE64:case ET.BASE64URL:return new kT(CT(e,t));case ET.DATA_URL:return new kT(function(e){const t=new NT(e);return t.base64?CT(ET.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw lT(ET.DATA_URL,"Malformed data URL.")}return TT(t)}(t.rest)}(t),new NT(t).contentType)}throw tT()}function TT(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function CT(e,t){switch(e){case ET.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw lT(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case ET.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw lT(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=IT(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw lT(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class NT{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw lT(ET.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class AT{constructor(e,t){let n=0,r="";fT(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(fT(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new AT(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new AT(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(pT()){const e=t.map((e=>e instanceof AT?e.data_:e));return new AT(ST.apply(null,e))}{const e=t.map((e=>dT(e)?xT(ET.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new AT(r,!0)}}uploadData(){return this.data_}}function PT(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function RT(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function DT(e,t){return t}class OT{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||DT}}let jT=null;function LT(){if(jT)return jT;const e=[];e.push(new OT("bucket")),e.push(new OT("generation")),e.push(new OT("metageneration")),e.push(new OT("name","fullPath",!0));const t=new OT("name");t.xform=function(e,t){return function(e){return!dT(e)||e.length<2?e:RT(e)}(t)},e.push(t);const n=new OT("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new OT("timeCreated")),e.push(new OT("updated")),e.push(new OT("md5Hash",null,!0)),e.push(new OT("cacheControl",null,!0)),e.push(new OT("contentDisposition",null,!0)),e.push(new OT("contentEncoding",null,!0)),e.push(new OT("contentLanguage",null,!0)),e.push(new OT("contentType",null,!0)),e.push(new OT("metadata","customMetadata",!0)),jT=e,jT}function MT(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new uT(n,r);return t._makeStorageReference(i)}})}(r,e),r}function UT(e,t,n){const r=PT(t);if(null===r)return null;return MT(e,r,n)}function FT(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const VT="prefixes",zT="items";function BT(e,t,n){const r=PT(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[VT])for(const i of n[VT]){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new uT(t,n));r.prefixes.push(s)}if(n[zT])for(const i of n[zT]){const n=e._makeStorageReference(new uT(t,i.name));r.items.push(n)}return r}(e,t,r)}class qT{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function HT(e){if(!e)throw tT()}function WT(e,t){return function(n,r){const i=UT(e,r,t);return HT(null!==i),i}}function KT(e,t){return function(n,r){const i=UT(e,r,t);return HT(null!==i),function(e,t,n,r){const i=PT(t);if(null===i)return null;if(!dT(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return gT("/b/"+o(i)+"/o/"+o(s),n,r)+vT({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function GT(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new $x(Xx.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new $x(Xx.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new $x(Xx.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new $x(Xx.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function QT(e){const t=GT(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new $x(Xx.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function YT(e,t,n){const r=gT(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new qT(r,"GET",WT(e,n),i);return s.errorHandler=QT(t),s}function JT(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=gT(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new qT(o,"GET",function(e,t){return function(n,r){const i=BT(e,t,r);return HT(null!==i),i}}(e,t.bucket),a);return l.urlParams=s,l.errorHandler=GT(t),l}function $T(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function XT(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=$T(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+FT(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=AT.getBlob(c,r,u);if(null===h)throw iT();const d={name:l.fullPath},f=gT(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new qT(f,"POST",WT(e,n),p);return m.urlParams=d,m.headers=o,m.body=h.uploadData(),m.errorHandler=GT(t),m}class ZT{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function eC(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){HT(!1)}return HT(!!n&&-1!==(t||["active"]).indexOf(n)),n}const tC=262144;function nC(e,t,n,r,i,s,o,a){const l=new ZT(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new $x(Xx.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const h=l.current,d=h+u;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(l.current)},m=r.slice(h,d);if(null===m)throw iT();const g=t.maxUploadRetryTime,v=new qT(n,"POST",(function(e,n){const i=eC(e,["active","final"]),o=l.current+u,a=r.size();let c;return c="final"===i?WT(t,s)(e,n):null,new ZT(o,a,"final"===i,c)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=a||null,v.errorHandler=GT(e),v}const rC={STATE_CHANGED:"state_changed"},iC={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function sC(e){switch(e){case"running":case"pausing":case"canceling":return iC.RUNNING;case"paused":return iC.PAUSED;case"success":return iC.SUCCESS;case"canceled":return iC.CANCELED;default:return iC.ERROR}}class oC{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function aC(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let lC=null;class cC{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zx.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Zx.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Zx.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw cT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cT("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw cT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class uC extends cC{initXhr(){this.xhr_.responseType="text"}}function hC(){return lC?lC():new uC}class dC{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=LT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(Xx.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(yT(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=nT()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(Xx.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=$T(t,r,i),a={name:o.fullPath},l=gT(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=FT(o,n),h=e.maxUploadRetryTime,d=new qT(l,"POST",(function(e){let t;eC(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){HT(!1)}return HT(dT(t)),t}),h);return d.urlParams=a,d.headers=c,d.body=u,d.errorHandler=GT(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,hC,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new qT(n,"POST",(function(e){const t=eC(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(s){HT(!1)}n||HT(!1);const i=Number(n);return HT(!isNaN(i)),new ZT(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=GT(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,hC,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=tC*this._chunkMultiplier,t=new ZT(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=nC(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const o=this._ref.storage._makeRequest(s,hC,r,i,!1);this._request=o,o.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(tC*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=YT(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,hC,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=XT(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,hC,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=rT(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=sC(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new oC(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(sC(this._state)){case iC.SUCCESS:aC(this._resolve.bind(null,this.snapshot))();break;case iC.CANCELED:case iC.ERROR:aC(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(sC(this._state)){case iC.RUNNING:case iC.PAUSED:e.next&&aC(e.next.bind(e,this.snapshot))();break;case iC.SUCCESS:e.complete&&aC(e.complete.bind(e))();break;default:e.error&&aC(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class fC{constructor(e,t){this._service=e,this._location=t instanceof uT?t:uT.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new fC(e,t)}get root(){const e=new uT(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RT(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new uT(this._location.bucket,e);return new fC(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw aT(e)}}function pC(e){const t={prefixes:[],items:[]};return mC(e,t).then((()=>t))}async function mC(e,t,n){const r={pageToken:n},i=await gC(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await mC(e,t,i.nextPageToken)}function gC(e,t){null!=t&&"number"===typeof t.maxResults&&mT("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=JT(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,hC)}function vC(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=gT(t.fullServerUrl(),e.host,e._protocol),s=FT(n,r),o=e.maxOperationRetryTime,a=new qT(i,"PATCH",WT(e,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=QT(t),a}(e.storage,e._location,t,LT());return e.storage.makeRequestWithTokens(n,hC)}function yC(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=gT(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new qT(r,"GET",KT(e,n),i);return s.errorHandler=QT(t),s}(e.storage,e._location,LT());return e.storage.makeRequestWithTokens(t,hC).then((e=>{if(null===e)throw new $x(Xx.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function wC(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=gT(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new qT(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=QT(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,hC)}function bC(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new uT(e._location.bucket,n);return new fC(e.storage,r)}function _C(e,t){if(e instanceof EC){const n=e;if(null==n._bucket)throw new $x(Xx.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Jx+"' property when initializing the app?");const r=new fC(n,n._bucket);return null!=t?_C(r,t):r}return void 0!==t?bC(e,t):e}function SC(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof EC)return new fC(e,t);throw sT("To use ref(service, url), the first argument must be a Storage instance.")}return _C(e,t)}function IC(e,t){const n=null===t||void 0===t?void 0:t[Jx];return null==n?null:uT.makeFromBucketSpec(n,e)}class EC{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Yx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?uT.makeFromBucketSpec(r,this._host):IC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=uT.makeFromBucketSpec(this._url,e):this._bucket=IC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fC(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new hT(oT());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=vT(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new wT(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const kC="@firebase/storage",xC="0.12.0",TC="storage";function CC(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new dC(e,new AT(t),n)}(e=Zr(e),t,n)}function NC(e){return function(e){e._throwIfRoot("getMetadata");const t=YT(e.storage,e._location,LT());return e.storage.makeRequestWithTokens(t,hC)}(e=Zr(e))}function AC(e,t){return SC(e=Zr(e),t)}function PC(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Or(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function RC(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new EC(r,i,s,n,Wi)}Fi(new ei(TC,RC,"PUBLIC").setMultipleInstances(!0)),Ji(kC,xC,""),Ji(kC,xC,"esm2017");class DC{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class OC{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new DC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new DC(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new DC(e,this,this._ref)):{next:t.next?e=>t.next(new DC(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class jC{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new LC(e,this._service)))}get items(){return this._delegate.items.map((e=>new LC(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class LC{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return bC(e,t)}(this._delegate,e);return new LC(t,this.storage)}get root(){return new LC(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new LC(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new OC(CC(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ET.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=xT(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new OC(new dC(this._delegate,new AT(r.data,!0),i),this)}listAll(){return function(e){return pC(e=Zr(e))}(this._delegate).then((e=>new jC(e,this.storage)))}list(e){return function(e,t){return gC(e=Zr(e),t)}(this._delegate,e||void 0).then((e=>new jC(e,this.storage)))}getMetadata(){return NC(this._delegate)}updateMetadata(e){return function(e,t){return vC(e=Zr(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return yC(e=Zr(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return wC(e=Zr(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw aT(e)}}class MC{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(UC(e))throw sT("ref() expected a child path but got a URL, use refFromURL instead.");return new LC(AC(this._delegate,e),this)}refFromURL(e){if(!UC(e))throw sT("refFromURL() expected a full URL but got a child path, use ref() instead.");try{uT.makeFromUrl(e,this._delegate.host)}catch(t){throw sT("refFromUrl() expected a valid full URL but got an invalid one.")}return new LC(AC(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};PC(this._delegate,e,t,n)}}function UC(e){return/^[A-Za-z]+:\/\//.test(e)}function FC(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new MC(r,i)}!function(e){const t={TaskState:iC,TaskEvent:rC,StringFormat:ET,Storage:MC,Reference:LC};e.INTERNAL.registerComponent(new ei("storage-compat",FC,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.3")}(ms);const VC=ms.initializeApp({apiKey:"AIzaSyB_iZXO6XkCwtbIivkX8M4MPv0EYmGyFtY",authDomain:"rentora-dbfa3.firebaseapp.com",projectId:"rentora-dbfa3",storageBucket:"rentora-dbfa3.appspot.com",messagingSenderId:"883085066161",appId:"1:883085066161:web:56aa053af3995f2c080790"}),zC=VC.firestore(),BC=VC.storage(),qC=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)({schoolName:""});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{e.exists&&r(e.data())})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);return(0,yr.jsxs)("div",{className:"form-container",children:[(0,yr.jsx)("h2",{className:"step-title",children:"Start By Getting Pre-Qualified"}),(0,yr.jsx)("p",{className:"step-description",children:"Select Your School"}),(0,yr.jsxs)("form",{onSubmit:n=>{n.preventDefault();const r={schoolName:n.target["school-name"].value};if(e){const t=e.id;console.log("Clerk User ID:",t),zC.collection("SurveyResponses").doc(e.id).get().then((t=>{t.exists?zC.collection("SurveyResponses").doc(e.id).update(r).then((()=>{console.log("Document successfully updated!")})).catch((e=>{console.error("Error updating document: ",e)})):zC.collection("SurveyResponses").doc(e.id).set(r).then((()=>{console.log("Document successfully set!")})).catch((e=>{console.error("Error setting document: ",e)}))})).catch((e=>{console.error("Error checking if document exists:",e)}))}else console.log("User not authenticated");t("/rent/off-campus/step2")},children:[(0,yr.jsx)("select",{id:"school-name",className:"input-field",value:n.schoolName,onChange:e=>r({...n,schoolName:e.target.value}),children:(0,yr.jsx)("option",{value:"UC Santa Cruz",children:"UC Santa Cruz"})}),(0,yr.jsx)("button",{className:"next-button",type:"submit",children:"Start Here"})]})]})},HC=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)({firstName:(null===e||void 0===e?void 0:e.firstName)||"",lastName:(null===e||void 0===e?void 0:e.lastName)||"",middleInitial:null!==e&&void 0!==e&&e.middleName?e.middleName.charAt(0).toUpperCase():"",dateOfBirth:(null===e||void 0===e?void 0:e.dateOfBirth)||""});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{e.exists&&r(e.data())})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);return(0,yr.jsxs)("div",{className:"form-container",style:{marginTop:"60px"},children:[(0,yr.jsx)("h2",{className:"step-title",children:"Name and Date of Birth"}),(0,yr.jsx)("p",{className:"step-description",children:"Confirm This Is Your Legal Name and Enter Your Date of Birth*"}),(0,yr.jsx)("input",{type:"text",placeholder:"First Name",className:"input-field",value:n.firstName,onChange:e=>r({...n,firstName:e.target.value})}),(0,yr.jsx)("input",{type:"text",placeholder:"Middle Initial (Optional)",maxLength:1,className:"input-field",value:n.middleInitial,onChange:e=>r({...n,middleInitial:e.target.value.toUpperCase()})}),(0,yr.jsx)("input",{type:"text",placeholder:"Last Name",className:"input-field",value:n.lastName,onChange:e=>r({...n,lastName:e.target.value})}),(0,yr.jsx)("label",{htmlFor:"dateOfBirth",children:"Enter Date of Birth:"}),(0,yr.jsx)("input",{type:"date",id:"dateOfBirth",placeholder:"Date of Birth",className:"input-field",value:n.dateOfBirth,onChange:e=>r({...n,dateOfBirth:e.target.value})}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step1",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{if(!n.firstName||!n.lastName||!n.dateOfBirth)return void alert("Please enter your First Name, Last Name, and Date of Birth.");const r={firstName:void 0!==n.firstName?n.firstName:"",lastName:void 0!==n.lastName?n.lastName:"",middleInitial:void 0!==n.middleInitial?n.middleInitial:"",dateOfBirth:void 0!==n.dateOfBirth?n.dateOfBirth:""};if(e){const t=e.id;console.log("Clerk User ID:",t),zC.collection("SurveyResponses").doc(e.id).update(r).then((()=>{console.log("Document successfully updated!")})).catch((e=>{console.error("Error updating document: ",e)}))}else console.log("User not authenticated");t("/rent/off-campus/step3")},children:"Next"})]})},WC=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)({email:(null===e||void 0===e?void 0:e.email)||""});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{e.exists&&r(e.data())})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);return(0,yr.jsxs)("div",{className:"form-container",children:[(0,yr.jsx)("h2",{className:"step-title",children:"Confirm Email"}),(0,yr.jsx)("p",{className:"step-description",children:"Confirm This Is Your Email*"}),(0,yr.jsx)("input",{type:"text",placeholder:"Email",className:"input-field",value:n.email,onChange:e=>r({...n,email:e.target.value})}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step2",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email))return void alert("Please enter a valid email address.");const r={email:void 0!==n.email?n.email:""};if(e){const t=e.id;console.log("Clerk User ID:",t),zC.collection("SurveyResponses").doc(e.id).update(r).then((()=>{console.log("Document successfully updated!")})).catch((e=>{console.error("Error updating document: ",e)}))}else console.log("User not authenticated");t("/rent/off-campus/step4")},children:"Next"})]})},KC=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)({phone:(null===e||void 0===e?void 0:e.phoneNumber)||""});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{e.exists&&r(e.data())})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);return(0,yr.jsxs)("div",{className:"form-container",children:[(0,yr.jsx)("h2",{className:"step-title",children:"Confirm Phone Number"}),(0,yr.jsx)("p",{className:"step-description",children:"Confirm This Is Your Phone Number*"}),(0,yr.jsx)("input",{type:"text",placeholder:"Phone Number",className:"input-field",value:n.phone,onChange:e=>{const t=e.target.value;/^[0-9]*$/.test(t)&&r((e=>({...e,phone:t})))}}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step3",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{if(!/^\d{10}$/.test(n.phone))return void alert("Please enter a valid phone number with 10 digits.");const r={phone:void 0!==n.phone?n.phone:""};if(e){const t=e.id;console.log("Clerk User ID:",t),zC.collection("SurveyResponses").doc(e.id).update(r).then((()=>{console.log("Document successfully updated!")})).catch((e=>{console.error("Error updating document: ",e)}))}else console.log("User not authenticated");t("/rent/off-campus/step5")},children:"Next"})]})},GC={profileImage:{width:"100px",height:"100px",borderRadius:"50%",objectFit:"cover"}},QC=()=>{var e;const{user:t}=gr(),n=ee(),[r,s]=(0,i.useState)({profilePicture:null!==(e=null===t||void 0===t?void 0:t.imageUrl)&&void 0!==e?e:"url_to_default_image.jpg"}),[o,a]=(0,i.useState)(null),l=(0,i.useRef)(!1);(0,i.useEffect)((()=>{const e=null===t||void 0===t?void 0:t.id;e&&(console.log("Fetching data for user:",t),zC.collection("SurveyResponses").doc(e).get().then((e=>{if(e.exists){console.log("Document found in the database:",e.data());const r=e.data();var n;if(r&&r.profilePicture)console.log("Using profile picture from the stored form data:",r.profilePicture),s({profilePicture:r.profilePicture}),o&&a(null),l.current=!0;else console.log("No profile picture found in the stored form data. Using Clerk image."),s({profilePicture:null!==(n=t.imageUrl)&&void 0!==n?n:"url_to_default_image.jpg"})}else{var r;console.log("No document found in the database. Using Clerk image."),s({profilePicture:null!==(r=t.imageUrl)&&void 0!==r?r:"url_to_default_image.jpg"})}})).catch((e=>{var n;console.error("Error fetching data:",e),console.log("Using Clerk image due to an error."),s({profilePicture:null!==(n=t.imageUrl)&&void 0!==n?n:"url_to_default_image.jpg"})})))}),[t,o]);const c=async(e,t)=>{const n=BC.ref("userProfilePictures/".concat(e,"/").concat(t.name));try{const e=await n.put(t);console.log("File uploaded successfully!",e);return await n.getDownloadURL()}catch(r){return console.error("Error uploading file: ",r),"url_to_default_image.jpg"}};return(0,yr.jsxs)("div",{className:"form-container",style:{marginTop:"35px"},children:[(0,yr.jsx)("h2",{className:"step-title",children:"Upload Profile Picture"}),(0,yr.jsx)("p",{className:"step-description",children:"Please Upload a Professional Picture For The Cover Of Your Application *"}),o?(0,yr.jsx)("img",{src:o,alt:"Preview",className:"image-preview"}):(0,yr.jsx)("img",{src:r.profilePicture,alt:"Profile",style:GC.profileImage}),(0,yr.jsx)("div",{className:"file-input-container",children:(0,yr.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const n=e.target.files[0],i=new FileReader;i.onloadend=async()=>{a(i.result);const e=await c(null===t||void 0===t?void 0:t.id,n);s({...r,profilePicture:e,file:n})},n&&i.readAsDataURL(n)},className:"input-field file-input"})}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step4",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),(0,yr.jsx)("button",{className:"next-button",onClick:async()=>{if(t){var e;const n=t.id;console.log("Clerk User ID:",n);const i={profilePicture:r.file?await c(t.id,r.file):null!==(e=null===t||void 0===t?void 0:t.imageUrl)&&void 0!==e?e:"url_to_default_image.jpg"};await zC.collection("SurveyResponses").doc(t.id).update(i),console.log("Document successfully updated!")}else console.log("User not authenticated");n("/rent/off-campus/step6")},children:"Next"})]})},YC=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)(!1),[a,l]=(0,i.useState)({college:"",schoolName:""});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{e.exists&&l(e.data())})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]),(0,i.useEffect)((()=>{"UC Santa Cruz"!==a.schoolName&&""!==a.schoolName&&t("/rent/off-campus/step7")}),[a.schoolName,t]);const c=e=>({Cowell:{address:"520 Cowell-Stevenson Road, Santa Cruz, CA 95064",phoneNumber:"(831) 459-2173"},Stevenson:{address:"520 Cowell-Stevenson Road, Santa Cruz, CA 95064",phoneNumber:"(831) 459-2173"},Merrill:{address:"655 Merrill Service Road, Santa Cruz, CA 95064",phoneNumber:"(831) 459-5689"},Crown:{address:"655 Merrill Service Road, Santa Cruz, CA 95064",phoneNumber:"(831) 459-5689"},"College 9":{address:"702 College Nine Rd, Santa Cruz, CA 95064",phoneNumber:"(831) 459-2100"},"John R. Lewis College":{address:"702 College Nine Rd, Santa Cruz, CA 95064",phoneNumber:"(831) 459-2100"},Kresge:{address:"Programs Annex, 510 Porter-Kresge Rd, Santa Cruz, CA 95064",phoneNumber:"(831) 459-4433"},Porter:{address:"Programs Annex, 510 Porter-Kresge Rd, Santa Cruz, CA 95064",phoneNumber:"(831) 459-4433"},"Rachel Carson College":{address:"B-L, 6 College Eight Service Rd, Santa Cruz, CA 95064",phoneNumber:"(831) 459-4505"},Oakes:{address:"Oakes Cafe, 1156 High St, Santa Cruz, CA 95064",phoneNumber:"(831) 459-4505"}}[e]||{}),u=""===a.college||"Select a College"===a.college||!s;return(0,yr.jsxs)("div",{className:"form-container",children:[(0,yr.jsx)("h2",{className:"step-title",children:"College Affiliation"}),(0,yr.jsx)("p",{className:"step-description",children:"Select your college:"}),(0,yr.jsxs)("select",{id:"college",className:"input-field",value:a.college,onChange:e=>{l((t=>({...t,college:e.target.value}))),r("")},children:[(0,yr.jsx)("option",{value:"Cowell College",children:"Cowell College"}),(0,yr.jsx)("option",{value:"Stevenson College",children:"Stevenson College"}),(0,yr.jsx)("option",{value:"Merrill College",children:"Merrill College"}),(0,yr.jsx)("option",{value:"Crown College",children:"Crown College"}),(0,yr.jsx)("option",{value:"College 9",children:"College 9"}),(0,yr.jsx)("option",{value:"John R. Lewis College",children:"John R. Lewis College"}),(0,yr.jsx)("option",{value:"Kresge College",children:"Kresge College"}),(0,yr.jsx)("option",{value:"Porter College",children:"Porter College"}),(0,yr.jsx)("option",{value:"Rachel Carson College",children:"Rachel Carson College"}),(0,yr.jsx)("option",{value:"Oakes College",children:"Oakes College"})]}),(0,yr.jsx)("button",{className:"reference-form-button",onClick:()=>{window.open("http://studenthousing.ucsc.edu/"),o(!0),alert("UCSC Reference Release Form Completed!")},children:"UCSC Reference Release Form (Must Complete)"}),(0,yr.jsx)("a",{href:"https://communityrentals.ucsc.edu/renters/before-you-rent/rental-application-packet.html#:~:text=Visit%20the%20Housing%20Portal",target:"_blank",rel:"noopener noreferrer",className:"learn-more-button",children:"Learn More"}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step5",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),n&&(0,yr.jsx)("p",{className:"error-message",children:n}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{if(e&&""!==a.college&&s){const n=c(a.college);zC.collection("SurveyResponses").doc(e.id).update({college:a.college,campusAddress:n.address,phoneNumber:n.phoneNumber}).then((()=>{console.log("Document successfully updated!"),t("/rent/off-campus/step7")})).catch((e=>{console.error("Error updating document: ",e)}))}else r("Please select a valid college and complete the UCSC Reference Release Form")},disabled:u,children:"Next"})]})},JC=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)({studentId:"",schoolName:""});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{e.exists&&r(e.data())})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);const s=""===n.studentId;return(0,yr.jsxs)("div",{className:"form-container",children:[(0,yr.jsxs)("h2",{className:"step-title",children:["What Is Your ",n.schoolName," ID #"]}),(0,yr.jsx)("p",{className:"step-description",children:"Please input your college ID:"}),(0,yr.jsx)("input",{type:"text",id:"studentId",className:"input-field",value:n.studentId,onChange:e=>{const t=e.target.value;/^[0-9]*$/.test(t)&&r((e=>({...e,studentId:t})))}}),(0,yr.jsx)(xe,{to:"UC Santa Cruz"===n.schoolName?"/rent/off-campus/step6":"/rent/off-campus/step5",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{e&&/^[0-9]+$/.test(n.studentId)&&zC.collection("SurveyResponses").doc(e.id).update({studentId:n.studentId}).then((()=>{console.log("Document successfully updated!"),"UC Santa Cruz"===n.schoolName?t("/rent/off-campus/step8"):t("/rent/off-campus/step5")})).catch((e=>{console.error("Error updating document: ",e)}))},disabled:s,children:"Next"})]})},$C=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)({residence:""});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{e.exists&&o(e.data())})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);const a=""===s.residence;return(0,yr.jsxs)("div",{className:"form-container",children:[(0,yr.jsx)("h2",{className:"step-title",children:"What State or Country Are You From?"}),(0,yr.jsx)("p",{className:"step-description",children:"Choose the most recent State/Country of Residence:"}),(0,yr.jsxs)("select",{id:"residence",className:"input-field",value:s.residence,onChange:e=>{o((t=>({...t,residence:e.target.value}))),r("")},children:[(0,yr.jsx)("option",{value:"",children:"Select a Residence"}),["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"].map((e=>(0,yr.jsx)("option",{value:e,children:e},e))),(0,yr.jsx)("optgroup",{label:"Countries",children:["China","India","South Korea","Taiwan","Vietnam","Saudi Arabia","Iran","Canada","Mexico","Brazil","Colombia","Ecuador","Germany","France","Italy","Spain","United Kingdom","Nigeria","Kenya","Ghana","Egypt","South Africa","Australia","Japan","Indonesia","Malaysia","Thailand","Philippines","Singapore"].map((e=>(0,yr.jsx)("option",{value:e,children:e},e)))})]}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step7",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),n&&(0,yr.jsx)("p",{className:"error-message",children:n}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{e&&""!==s.residence?zC.collection("SurveyResponses").doc(e.id).update({residence:s.residence}).then((()=>{console.log("Document successfully updated!"),t("/rent/off-campus/step9")})).catch((e=>{console.error("Error updating document: ",e)})):r("Please select a valid residence")},disabled:a,children:"Next"})]})},XC=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)({major:""});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{e.exists&&o(e.data())})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);const a=""===s.major;return(0,yr.jsxs)("div",{className:"form-container",children:[(0,yr.jsx)("h2",{className:"step-title",children:"Major/Area Of Study"}),(0,yr.jsx)("p",{className:"step-description",children:"Select your major or proposed major if you haven't declared yet:"}),(0,yr.jsxs)("select",{id:"major",className:"input-field",value:s.major,onChange:e=>{o((t=>({...t,major:e.target.value}))),r("")},children:[(0,yr.jsx)("option",{value:"",children:"Select a Major"}),["Computer Science","Biology","Psychology","Engineering","Business Administration","Political Science","English","Chemistry","Mathematics","Economics","History","Physics","Sociology","Communications","Art History","Philosophy","Marketing","Graphic Design","Environmental Science","Nursing","International Relations","Computer Engineering","Criminal Justice","Music","Civil Engineering","Astronomy","Dance","Anthropology","Finance","Journalism","Mechanical Engineering","Geology","Theater","Linguistics","Supply Chain Management","Neuroscience","Human Resource Management","Graphic Communication","Public Health","Aerospace Engineering","Religious Studies","Real Estate","Biomedical Engineering","Women Studies","Information Systems","Education","Industrial Engineering","Social Work","Astrophysics","Fashion Design","Global Studies","Chemical Engineering","Public Relations","Sports Management","Biochemistry","Fine Arts","Urban Planning","Materials Science","Business Analytics","Health Science","Computer Information Systems","Interior Design","Ethnic Studies","Biotechnology","Hospitality Management","Cognitive Science","International Business","Healthcare Administration","Robotics Engineering","French","Spanish","Japanese","Chinese","Italian","German","Russian","Arabic","Korean","Portuguese","Dental Hygiene","Meteorology","Political Economy","Marine Biology","Behavioral Science","Data Science","Culinary Arts","Philosophy of Science","Wildlife Biology","Forensic Science","Quantitative Economics","Artificial Intelligence","Criminal Psychology","Geophysics","Media Studies","Geography","Interior Architecture","Public Policy","Textile Design","Human Biology","Sound Engineering","Archeology","Kinesiology","Music Production","Biostatistics","Food Science","Public Administration","Aviation Management","Landscape Architecture","Digital Marketing","Industrial Design","Social Media Management","Forestry","Neurobiology","Behavioral Economics","Environmental Engineering","Medical Illustration","Agricultural Science","Welding Engineering","Comparative Literature","Architectural Engineering","Urban Design","Environmental Policy","Art Therapy","Biomedical Physics","Political Philosophy","Sustainable Agriculture","Theoretical Physics","Aviation Science","Data Analytics","Consumer Science","Educational Technology","Neuroethics","Space Science","Gerontology","Intelligence Studies","Maritime Studies","Medical Physics","Rhetoric and Composition","Risk Management","Space Engineering","Telecommunications","Applied Linguistics","Computational Mathematics","Entertainment Management","Health Informatics","Medical Laboratory Science","Music Therapy","Public History","Risk Analysis","Speech Pathology","Sport Psychology","Technical Writing","Urban Studies"].map((e=>(0,yr.jsx)("option",{value:e,children:e},e)))]}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step8",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),n&&(0,yr.jsx)("p",{className:"error-message",children:n}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{e&&""!==s.major?zC.collection("SurveyResponses").doc(e.id).update({major:s.major}).then((()=>{console.log("Document successfully updated!"),t("/rent/off-campus/step10")})).catch((e=>{console.error("Error updating document: ",e)})):r("Please select a valid major")},disabled:a,children:"Next"})]})},ZC=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)({startDate:"",endDate:""});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{e.exists&&r(e.data())})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);const s=(e,t)=>e&&t&&new Date(e)>new Date(t)?(alert("End date must be after the Start date"),!1):!(!e||!t)||(alert("Please enter both Start and End dates"),!1);return(0,yr.jsxs)("div",{className:"form-container",style:{marginTop:"70px",width:"500px"},children:[(0,yr.jsxs)("h2",{className:"step-title",children:["Time At ",n.schoolName]}),(0,yr.jsx)("p",{className:"step-description",children:"Start Date - Proposed End Date"}),(0,yr.jsxs)("div",{className:"date-picker-container",children:[(0,yr.jsx)("label",{htmlFor:"startDate",children:"Start Date:"}),(0,yr.jsx)("input",{type:"date",id:"startDate",className:"input-field",value:n.startDate,onChange:e=>r((t=>({...t,startDate:e.target.value})))})]}),(0,yr.jsxs)("div",{className:"date-picker-container",children:[(0,yr.jsx)("label",{htmlFor:"endDate",children:"End Date:"}),(0,yr.jsx)("input",{type:"date",id:"endDate",className:"input-field",value:n.endDate,onChange:e=>r((t=>({...t,endDate:e.target.value})))})]}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step9",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{const r=s(n.startDate,n.endDate);e&&r&&zC.collection("SurveyResponses").doc(e.id).update({startDate:n.startDate,endDate:n.endDate}).then((()=>{console.log("Document successfully updated!"),t("/rent/off-campus/step11")})).catch((e=>{console.error("Error updating document: ",e),alert("An error occurred while saving. Please try again.")}))},children:"Next"})]})},eN=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)({employmentHistory:[]});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{e.exists&&o((t=>({...t,employmentHistory:e.data().employmentHistory||[]})))})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);const a=(e,t,n)=>{o((r=>{const i=[...r.employmentHistory];if(i[e][t]=n,"present"===t&&n?(i[e].present=!0,i[e].endDate="Present"):"endDate"===t&&i[e].present&&(i[e].present=!1),"supervisorPhoneNumber"===t){const r=n.replace(/\D/g,"").slice(0,10);i[e][t]=r.replace(/(\d{3})(\d{3})(\d{4})/,"($1)-$2-$3")}return{...r,employmentHistory:i}}))};return(0,yr.jsxs)("div",{className:"form-container",style:{width:"50%",margin:"60px auto",maxHeight:"80vh",overflowY:"auto",padding:"20px"},children:[(0,yr.jsx)("h2",{className:"step-title",children:"Employment History"}),(0,yr.jsx)("p",{className:"step-description",children:"Please Add Your Previous and Current Employment History"}),Array.isArray(s.employmentHistory)&&s.employmentHistory.map(((e,t)=>(0,yr.jsxs)("div",{className:"employment-entry",children:[(0,yr.jsxs)("div",{className:"form-row",children:[(0,yr.jsx)("label",{children:"Employer:"}),(0,yr.jsx)("input",{type:"text",value:e.employer,onChange:e=>a(t,"employer",e.target.value)}),(0,yr.jsx)("label",{className:"end-label",children:"Title:"}),(0,yr.jsx)("input",{type:"text",value:e.title,onChange:e=>a(t,"title",e.target.value)}),(0,yr.jsx)("button",{onClick:()=>(e=>{o((t=>{const n=[...t.employmentHistory];return n.splice(e,1),{...t,employmentHistory:n}}))})(t),className:"end-label",children:" - "})]}),(0,yr.jsxs)("div",{className:"form-row",children:[(0,yr.jsx)("label",{children:"Start:"}),(0,yr.jsx)("input",{type:"date",value:e.startDate,onChange:e=>a(t,"startDate",e.target.value)}),(0,yr.jsx)("label",{className:"end-label",children:"End:"}),e.present?(0,yr.jsx)("span",{}):(0,yr.jsx)("input",{type:"date",value:e.endDate,onChange:e=>a(t,"endDate",e.target.value)}),(0,yr.jsxs)("label",{className:"end-label",children:[(0,yr.jsx)("input",{type:"checkbox",checked:e.present,onChange:e=>a(t,"present",e.target.checked)}),"Present"]})]}),(0,yr.jsxs)("div",{className:"form-row",children:[(0,yr.jsx)("label",{children:"Supervisor:"}),(0,yr.jsx)("input",{type:"text",value:e.nameOfSupervisor,onChange:e=>a(t,"nameOfSupervisor",e.target.value)}),(0,yr.jsx)("label",{className:"end-label",children:"Supervisor Phone:"}),(0,yr.jsx)("input",{type:"text",value:e.supervisorPhoneNumber,onChange:e=>a(t,"supervisorPhoneNumber",e.target.value)}),(0,yr.jsx)("label",{className:"end-label",children:"City of Employment:"}),(0,yr.jsx)("input",{type:"text",value:e.cityOfEmployment,onChange:e=>a(t,"cityOfEmployment",e.target.value)})]})]},t))),(0,yr.jsx)("div",{className:"add-another-container",children:(0,yr.jsx)("button",{onClick:()=>{o((e=>({...e,employmentHistory:[...e.employmentHistory,{employer:"",title:"",startDate:"",endDate:"",present:!1,nameOfSupervisor:"",supervisorPhoneNumber:"",cityOfEmployment:""}]})))},children:"+ Add Another"})}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step10",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),n&&(0,yr.jsx)("p",{className:"error-message",children:n}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{const n=s.employmentHistory.every((e=>((e,t,n)=>n||e&&t&&new Date(e)<=new Date(t))(e.startDate,e.endDate,e.present)&&""!==e.employer&&""!==e.title&&""!==e.nameOfSupervisor&&""!==e.supervisorPhoneNumber&&""!==e.cityOfEmployment));if(n){const n={employmentHistory:s.employmentHistory.map((e=>({...e,endDate:e.present?"Present":e.endDate})))};zC.collection("SurveyResponses").doc(e.id).update(n).then((()=>{console.log("Document successfully updated!"),t("/rent/off-campus/step12")})).catch((e=>{console.error("Error updating document: ",e)}))}else alert("Please fill out all fields for each employment entry")},children:"Next"})]})},tN=()=>{const{user:e}=gr(),t=ee(),[n]=(0,i.useState)(""),[r,s]=(0,i.useState)({activitiesHistory:[]});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{e.exists&&s((t=>({...t,activitiesHistory:e.data().activitiesHistory||[]})))})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);const o=(e,t,n)=>{s((r=>{const i=[...r.activitiesHistory];return i[e][t]=n,"present"===t&&n&&(i[e].endDate="Present"),{...r,activitiesHistory:i}}))};return console.log("Form Data:",r),(0,yr.jsxs)("div",{className:"form-container",style:{width:"50%",margin:"60px auto",maxHeight:"80vh",overflowY:"auto",padding:"20px"},children:[(0,yr.jsx)("h2",{className:"step-title",children:"Extracurricular Activities"}),(0,yr.jsx)("p",{className:"step-description",children:"Please Add Your Extracurricular Activities:"}),Array.isArray(r.activitiesHistory)&&r.activitiesHistory.map(((e,t)=>(0,yr.jsxs)("div",{className:"activities-entry",children:[(0,yr.jsxs)("div",{className:"form-row",children:[(0,yr.jsx)("label",{children:"Organization:"}),(0,yr.jsx)("input",{type:"text",value:e.organization,onChange:e=>o(t,"organization",e.target.value)}),(0,yr.jsx)("label",{className:"end-label",children:"Title:"}),(0,yr.jsx)("input",{type:"text",value:e.title,onChange:e=>o(t,"title",e.target.value)}),(0,yr.jsx)("button",{onClick:()=>(e=>{s((t=>{const n=[...t.activitiesHistory];return n.splice(e,1),{...t,activitiesHistory:n}}))})(t),className:"end-label",children:" - "})]}),(0,yr.jsxs)("div",{className:"form-row",children:[(0,yr.jsx)("label",{children:"Start:"}),(0,yr.jsx)("input",{type:"date",value:e.startDate,onChange:e=>o(t,"startDate",e.target.value)}),(0,yr.jsx)("label",{className:"end-label",children:"End:"}),e.present?(0,yr.jsxs)(i.Fragment,{children:[(0,yr.jsx)("span",{className:"present-checkbox",children:"Present"}),(0,yr.jsx)("input",{type:"checkbox",checked:e.present,onChange:e=>o(t,"present",e.target.checked)})]}):(0,yr.jsxs)(i.Fragment,{children:[(0,yr.jsx)("input",{type:"date",value:e.endDate,onChange:e=>o(t,"endDate",e.target.value)}),(0,yr.jsxs)("label",{className:"end-label",children:[(0,yr.jsx)("input",{type:"checkbox",checked:e.present,onChange:e=>o(t,"present",e.target.checked)}),"Present"]})]})]})]},t))),(0,yr.jsx)("div",{className:"add-another-container",children:(0,yr.jsx)("button",{onClick:()=>{s((e=>({...e,activitiesHistory:[...e.activitiesHistory,{organization:"",title:"",startDate:"",endDate:"",present:!1}]})))},children:"+ Add Another"})}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step11",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),n&&(0,yr.jsx)("p",{className:"error-message",children:n}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{const n=0===r.activitiesHistory.length||r.activitiesHistory.every((e=>((e,t,n)=>n||e&&t&&new Date(e)<=new Date(t))(e.startDate,e.endDate,e.present)));if(n){const n={activitiesHistory:r.activitiesHistory.map((e=>({organization:e.organization,title:e.title,startDate:e.startDate,endDate:e.present?"Present":e.endDate,present:e.present})))};console.log("Formatted Data:",n),zC.collection("SurveyResponses").doc(e.id).update(n).then((()=>{console.log("Document successfully updated!"),t("/rent/off-campus/step13")})).catch((e=>{console.error("Error updating document: ",e)}))}else alert("Please ensure that Start Date and End Date are provided and that End Date is after Start Date for all entries, or set it to 'Present' if you are still involved")},children:"Next"})]})};var nN=n(382);const rN=()=>{const{user:e}=gr(),t=ee(),[n]=(0,i.useState)(""),[r,s]=(0,i.useState)({rentalHistory:[]});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{e.exists&&s((t=>({...t,rentalHistory:e.data().rentalHistory||[]})))})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);const o=e=>{const t=parseFloat(e.replace(/[^0-9.]/g,""));return isNaN(t)?e:t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0})},a=(e,t)=>{s((n=>{const r=[...n.rentalHistory];return r[t].address=e,{...n,rentalHistory:r}}))},l=(e,t,n)=>{s((r=>{const i=[...r.rentalHistory];return i[e][t]=n,"present"===t&&n&&(i[e].endDate="Present"),{...r,rentalHistory:i}}))};return(0,yr.jsxs)("div",{className:"form-container",style:{width:"50%",margin:"60px auto",maxHeight:"80vh",overflowY:"auto",padding:"20px"},children:[(0,yr.jsx)("h2",{className:"step-title",children:"Previous Tenant Experience"}),(0,yr.jsx)("p",{className:"step-description",children:"Please Add Your Previous Rental History:"}),Array.isArray(r.rentalHistory)&&r.rentalHistory.map(((e,t)=>(0,yr.jsxs)("div",{className:"rental-history-entry",children:[(0,yr.jsxs)("div",{className:"form-row",children:[(0,yr.jsx)("label",{children:"Address:"}),(0,yr.jsx)(nN.ZP,{value:e.address,onChange:e=>a(e,t),onSelect:e=>a(e,t),googleMapsApiKey:"AIzaSyAW1V1DfQ36scJduIpmX-cH8EQ9diHF5PQ",children:e=>{let{getInputProps:t,suggestions:n,getSuggestionItemProps:r,loading:i}=e;return(0,yr.jsxs)("div",{children:[(0,yr.jsx)("input",{...t({placeholder:"Type your address...",className:"location-search-input"})}),(0,yr.jsxs)("div",{className:"autocomplete-dropdown-container",children:[i&&(0,yr.jsx)("div",{}),n.map((e=>(0,yr.jsx)("div",{...r(e,{style:{backgroundColor:e.active?"#a7a9ff":"#fff"}}),children:e.description})))]})]})}}),(0,yr.jsx)("label",{className:"end-label",children:"Monthly Rent:"}),(0,yr.jsx)("input",{type:"text",value:o(e.monthlyRent),onChange:e=>l(t,"monthlyRent",e.target.value)}),(0,yr.jsx)("button",{onClick:()=>(e=>{s((t=>{const n=[...t.rentalHistory];return n.splice(e,1),{...t,rentalHistory:n}}))})(t),className:"end-label",children:" - "})]}),(0,yr.jsxs)("div",{className:"form-row",children:[(0,yr.jsx)("label",{children:"Start Date:"}),(0,yr.jsx)("input",{type:"date",value:e.startDate,onChange:e=>l(t,"startDate",e.target.value)}),(0,yr.jsx)("label",{className:"end-label",children:"End Date:"}),e.present?(0,yr.jsxs)(i.Fragment,{children:[(0,yr.jsx)("span",{className:"present-checkbox",children:"Present"}),(0,yr.jsx)("input",{type:"checkbox",checked:e.present,onChange:e=>l(t,"present",e.target.checked)})]}):(0,yr.jsxs)(i.Fragment,{children:[(0,yr.jsx)("input",{type:"date",value:e.endDate,onChange:e=>l(t,"endDate",e.target.value)}),(0,yr.jsxs)("label",{className:"end-label",children:[(0,yr.jsx)("input",{type:"checkbox",checked:e.present,onChange:e=>l(t,"present",e.target.checked)}),"Present"]})]})]}),(0,yr.jsxs)("div",{className:"form-row",children:[(0,yr.jsx)("label",{children:"Owner Name:"}),(0,yr.jsx)("input",{type:"text",value:e.ownerName,onChange:e=>l(t,"ownerName",e.target.value)}),(0,yr.jsx)("label",{className:"end-label",children:"Reason For Leaving:"}),(0,yr.jsx)("input",{type:"text",value:e.reasonForLeaving,onChange:e=>l(t,"reasonForLeaving",e.target.value)})]})]},t))),(0,yr.jsx)("div",{className:"add-another-container",children:(0,yr.jsx)("button",{onClick:()=>{s((e=>({...e,rentalHistory:[...e.rentalHistory,{address:"",monthlyRent:"",startDate:"",endDate:"",present:!1,ownerName:"",reasonForLeaving:""}]})))},children:"+ Add Another"})}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step12",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),n&&(0,yr.jsx)("p",{className:"error-message",children:n}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{if(r.rentalHistory.some((e=>""===e.address||""===e.monthlyRent||""===e.startDate||!e.present&&""===e.endDate||""===e.ownerName||""===e.reasonForLeaving)))return void alert("Please fill out all fields in the form before proceeding.");const n=0===r.rentalHistory.length||r.rentalHistory.every((e=>((e,t,n)=>n||e&&t&&new Date(e)<=new Date(t))(e.startDate,e.endDate,e.present)));if(n){const n={rentalHistory:r.rentalHistory.map((e=>({address:e.address,monthlyRent:e.monthlyRent,startDate:e.startDate,endDate:e.present?"Present":e.endDate,present:e.present,ownerName:e.ownerName,reasonForLeaving:e.reasonForLeaving})))};console.log("Formatted Data:",n),zC.collection("SurveyResponses").doc(e.id).update(n).then((()=>{console.log("Document successfully updated!"),t("/rent/off-campus/step14")})).catch((e=>{console.error("Error updating document: ",e)}))}else alert("Please ensure that Start Date and End Date are provided and that End Date is after Start Date for all entries, or set it to 'Present' if you are still involved")},children:"Next"})]})},iN=()=>{const{user:e}=gr(),t=ee(),[n]=(0,i.useState)(""),[r,s]=(0,i.useState)({monthlyIncome:[]});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{if(e.exists){const t=(e.data().monthlyIncome||[]).map((e=>{const t=e.source||"Select Source",n="Other"===t?e.otherSource:"";return!["Employment","Parents","Student Loans","Scholarship","Other"].includes(t)?{source:"Other",otherSource:t,amount:e.amount||""}:{source:t,otherSource:n,amount:e.amount||""}}));console.log("Initial Form Data:",t),s((e=>({...e,monthlyIncome:t})))}})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);const o=e=>{const t=parseFloat(e.replace(/[^0-9.]/g,""));return isNaN(t)?e:t.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0})},a=(e,t,n)=>{s((r=>{const i=[...r.monthlyIncome];return i[e][t]="amount"===t?o(n):n,{...r,monthlyIncome:i}}))};return(0,yr.jsxs)("div",{className:"form-container",style:{width:"50%",margin:"60px auto",maxHeight:"80vh",overflowY:"auto",padding:"20px"},children:[(0,yr.jsx)("h2",{className:"step-title",children:"Monthly Income"}),(0,yr.jsx)("p",{className:"step-description",children:"Please Add Your Monthly Income:"}),Array.isArray(r.monthlyIncome)&&r.monthlyIncome.map(((e,t)=>(0,yr.jsx)("div",{className:"monthly-income-entry",children:(0,yr.jsxs)("div",{className:"form-row",children:[(0,yr.jsx)("label",{children:"Source:"}),(0,yr.jsxs)("select",{value:e.source,onChange:e=>a(t,"source",e.target.value),children:[(0,yr.jsx)("option",{value:"Select Source",disabled:!0,hidden:!0,children:"Select Source"}),(0,yr.jsx)("option",{value:"Employment",children:"Employment"}),(0,yr.jsx)("option",{value:"Parents",children:"Parents"}),(0,yr.jsx)("option",{value:"Student Loans",children:"Student Loans"}),(0,yr.jsx)("option",{value:"Scholarship",children:"Scholarship"}),(0,yr.jsx)("option",{value:"Other",children:"Other"})]}),"Other"===e.source&&(0,yr.jsx)("input",{type:"text",value:e.otherSource||"",onChange:e=>a(t,"otherSource",e.target.value),placeholder:"Specify Other Source"}),(0,yr.jsx)("label",{className:"end-label",children:"Amount:"}),(0,yr.jsx)("input",{type:"text",value:e.amount,onChange:e=>a(t,"amount",e.target.value)}),(0,yr.jsx)("button",{onClick:()=>(e=>{s((t=>{const n=[...t.monthlyIncome];return n.splice(e,1),{...t,monthlyIncome:n}}))})(t),className:"end-label",children:" - "})]})},t))),(0,yr.jsx)("div",{className:"add-another-container",children:(0,yr.jsx)("button",{onClick:()=>{s((e=>({...e,monthlyIncome:[...e.monthlyIncome,{source:"Select Source",amount:"",otherSource:""}]})))},children:"+ Add Another"})}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step13",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),n&&(0,yr.jsx)("p",{className:"error-message",children:n}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{if(!r.monthlyIncome.every((e=>""!==e.source&&""!==e.amount)))return void alert("Please choose a source type and provide the amount for each entry before proceeding.");if(r.monthlyIncome.some((e=>"Other"===e.source&&""===e.otherSource)))return void alert('Please specify the "Other" source before proceeding.');if(r.monthlyIncome.some((e=>void 0===e.source||""===e.source||"Select Source"===e.source)))return void alert("Please choose a valid source type for each entry before proceeding.");if(r.monthlyIncome.some((e=>void 0===e.amount||""===e.amount)))return void alert("Please provide a valid amount for each entry before proceeding.");const n={monthlyIncome:r.monthlyIncome.map((e=>({source:"Other"===e.source?e.otherSource:e.source,amount:o(e.amount)})))};console.log("Formatted Data:",n),zC.collection("SurveyResponses").doc(e.id).update(n).then((()=>{console.log("Document successfully updated!"),t("/rent/off-campus/step15")})).catch((e=>{console.error("Error updating document: ",e)}))},disabled:r.monthlyIncome.some((e=>""===e.source||"Select Source"===e.source)),children:"Next"})]})},sN=()=>{const{user:e}=gr(),t=ee(),[n]=(0,i.useState)(""),[r,s]=(0,i.useState)({checkingAccounts:[],savingsAccounts:[]});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{if(e.exists){const t=e.data().bankAccounts||{},n=t.checkingAccounts||[],r=t.savingsAccounts||[];s((e=>({...e,checkingAccounts:n,savingsAccounts:r})))}})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);const o=(e,t,n)=>{s((r=>{const i=[...r[e]];return i[t].name=n,{...r,[e]:i}}))},a=e=>{s((t=>({...t,[e]:[...t[e],{name:""}]})))},l=(e,t)=>{s((n=>{const r=[...n[e]];return r.splice(t,1),{...n,[e]:r}}))};return(0,yr.jsxs)("div",{className:"form-container",style:{width:"50%",margin:"60px auto",maxHeight:"80vh",overflowY:"auto",padding:"20px"},children:[(0,yr.jsx)("h2",{className:"step-title",children:"Bank Accounts"}),(0,yr.jsx)("p",{className:"step-description",children:"Please List All Your Bank Accounts (e.g. Wells Fargo, Bank Of America, etc.)"}),(0,yr.jsxs)("div",{className:"account-type-container",children:[(0,yr.jsx)("h3",{children:"Checking"}),r.checkingAccounts.map(((e,t)=>(0,yr.jsxs)("div",{className:"account-entry",children:[(0,yr.jsx)("input",{type:"text",value:e.name,onChange:e=>o("checkingAccounts",t,e.target.value)}),(0,yr.jsx)("button",{onClick:()=>l("checkingAccounts",t),children:" - "})]},t))),(0,yr.jsx)("button",{onClick:()=>a("checkingAccounts"),children:"+ Add Another"})]}),(0,yr.jsxs)("div",{className:"account-type-container",children:[(0,yr.jsx)("h3",{children:"Savings"}),r.savingsAccounts.map(((e,t)=>(0,yr.jsxs)("div",{className:"account-entry",children:[(0,yr.jsx)("input",{type:"text",value:e.name,onChange:e=>o("savingsAccounts",t,e.target.value)}),(0,yr.jsx)("button",{onClick:()=>l("savingsAccounts",t),children:" - "})]},t))),(0,yr.jsx)("button",{onClick:()=>a("savingsAccounts"),children:"+ Add Another"})]}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step14",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),n&&(0,yr.jsx)("p",{className:"error-message",children:n}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{const n=r.checkingAccounts.some((e=>""===e.name.trim())),i=r.savingsAccounts.some((e=>""===e.name.trim()));if(n||i)return void alert("Please enter a name for each bank account before proceeding.");const s={checkingAccounts:r.checkingAccounts.map((e=>({name:e.name.trim()}))),savingsAccounts:r.savingsAccounts.map((e=>({name:e.name.trim()})))};console.log("Formatted Data:",s),zC.collection("SurveyResponses").doc(e.id).update({bankAccounts:s}).then((()=>{console.log("Document successfully updated!"),t("/rent/off-campus/step16")})).catch((e=>{console.error("Error updating document: ",e)}))},children:"Next"})]})},oN=()=>{const{user:e}=gr(),t=ee(),[n]=(0,i.useState)(""),[r,s]=(0,i.useState)({creditCards:[]});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{if(e.exists){const t=e.data().creditCards||[];s((e=>({...e,creditCards:t})))}})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);return(0,yr.jsxs)("div",{className:"form-container",style:{width:"50%",margin:"60px auto",maxHeight:"80vh",overflowY:"auto",padding:"20px"},children:[(0,yr.jsx)("h2",{className:"step-title",children:"Credit Cards"}),(0,yr.jsx)("p",{className:"step-description",children:"Please List All Your Credit Cards"}),r.creditCards.map(((e,t)=>(0,yr.jsxs)("div",{className:"card-entry",children:[(0,yr.jsx)("input",{type:"text",value:e.name,onChange:e=>((e,t)=>{s((n=>{const r=[...n.creditCards];return r[e].name=t,{...n,creditCards:r}}))})(t,e.target.value)}),(0,yr.jsx)("button",{onClick:()=>(e=>{s((t=>{const n=[...t.creditCards];return n.splice(e,1),{...t,creditCards:n}}))})(t),children:" - "})]},t))),(0,yr.jsx)("div",{className:"add-another-container",children:(0,yr.jsx)("button",{onClick:()=>{s((e=>({...e,creditCards:[...e.creditCards,{name:""}]})))},children:"+ Add Another"})}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step15",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),n&&(0,yr.jsx)("p",{className:"error-message",children:n}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{if(r.creditCards.some((e=>""===e.name.trim())))return void alert("Please enter a name for each credit card before proceeding.");const n={creditCards:r.creditCards.map((e=>({name:e.name.trim()})))};console.log("Formatted Data:",n),zC.collection("SurveyResponses").doc(e.id).update({creditCards:n.creditCards}).then((()=>{console.log("Document successfully updated!"),t("/rent/off-campus/step17")})).catch((e=>{console.error("Error updating document: ",e)}))},children:"Next"})]})},aN=()=>{const{user:e}=gr(),t=ee(),[n]=(0,i.useState)(""),[r,s]=(0,i.useState)({references:[]});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{if(e.exists){const t=e.data().references||[];s((e=>({...e,references:t})))}})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);const o=(e,t,n)=>{s((r=>{const i=[...r.references];let s=n;if("phoneNumber"===t){const e=n.replace(/[^0-9]/g,"");s=e.length<=3?e:e.length<=6?"".concat(e.slice(0,3),"-").concat(e.slice(3)):e.length<=8?"".concat(e.slice(0,3),"-").concat(e.slice(3,6),"-").concat(e.slice(6)):"".concat(e.slice(0,3),"-").concat(e.slice(3,6),"-").concat(e.slice(6,10))}return i[e][t]=s,{...r,references:i}}))},a=e=>/^\d{3}-\d{3}-\d{4}$/.test(e),l=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);return(0,yr.jsxs)("div",{className:"form-container",style:{width:"50%",margin:"60px auto",maxHeight:"80vh",overflowY:"auto",padding:"20px"},children:[(0,yr.jsx)("h2",{className:"step-title",children:"References"}),(0,yr.jsx)("p",{className:"step-description",children:"Please Add All Your References (At Least 2, Up To 3)"}),(0,yr.jsx)("p",{className:"step-description",children:"First Contact will Also Be Used as Emergency Contact"}),r.references.slice(0,3).map(((e,t)=>(0,yr.jsx)("div",{className:"reference-entry",style:{marginBottom:"15px"},children:(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsxs)("div",{className:"name-relation-group",children:[(0,yr.jsx)("label",{children:"Name:"}),(0,yr.jsx)("input",{type:"text",value:e.name,onChange:e=>o(t,"name",e.target.value)}),(0,yr.jsx)("label",{children:"Relation:"}),(0,yr.jsxs)("select",{value:e.relation,onChange:e=>o(t,"relation",e.target.value),children:[(0,yr.jsx)("option",{value:"Select Relation",disabled:!0,hidden:!0,children:"Select Relation"}),(0,yr.jsx)("option",{value:"Friend",children:"Friend"}),(0,yr.jsx)("option",{value:"Mother",children:"Mother"}),(0,yr.jsx)("option",{value:"Father",children:"Father"}),(0,yr.jsx)("option",{value:"Brother",children:"Brother"}),(0,yr.jsx)("option",{value:"Sister",children:"Sister"}),(0,yr.jsx)("option",{value:"Uncle",children:"Uncle"}),(0,yr.jsx)("option",{value:"Aunt",children:"Aunt"}),(0,yr.jsx)("option",{value:"Colleague",children:"Colleague"}),(0,yr.jsx)("option",{value:"Neighbor",children:"Neighbor"}),(0,yr.jsx)("option",{value:"Spouse",children:"Spouse"}),(0,yr.jsx)("option",{value:"Child",children:"Child"}),(0,yr.jsx)("option",{value:"Relative",children:"Relative"}),(0,yr.jsx)("option",{value:"Other",children:"Other"})]}),(0,yr.jsx)("button",{onClick:()=>(e=>{s((t=>{const n=[...t.references];return n.splice(e,1),{...t,references:n}}))})(t),children:" - "})]}),(0,yr.jsxs)("div",{className:"input-group-phone-email",children:[(0,yr.jsx)("label",{children:"Phone Number:"}),(0,yr.jsx)("input",{type:"tel",value:e.phoneNumber,onChange:e=>{const n=e.target.value.replace(/[^0-9]/g,"");o(t,"phoneNumber",n)},maxLength:"12"}),(0,yr.jsx)("label",{children:"Email:"}),(0,yr.jsx)("input",{type:"email",value:e.email,onChange:e=>o(t,"email",e.target.value)})]})]})},t))),r.references.length<3&&(0,yr.jsx)("div",{className:"add-another-container",children:(0,yr.jsx)("button",{onClick:()=>{s((e=>({...e,references:[...e.references,{name:"",relation:"Select Relation",phoneNumber:"",email:""}]})))},children:"+ Add Another"})}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step16",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),n&&(0,yr.jsx)("p",{className:"error-message",children:n}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{const n=r.references.every(((e,t)=>(console.log("Checking reference ".concat(t+1)),console.log("Name:",""!==e.name.trim()),console.log("Relation:","Select Relation"!==e.relation),console.log("Phone Number:",a(e.phoneNumber)),console.log("Email:",l(e.email)),""!==e.name.trim()&&"Select Relation"!==e.relation&&a(e.phoneNumber)&&l(e.email))));if(console.log("isReferenceDataValid:",n),r.references.length<2)return void alert("Please provide at least 2 references before proceeding.");if(!n)return void alert("Please provide valid information for each reference before proceeding.");const i={references:r.references.map((e=>({name:e.name.trim(),relation:e.relation,phoneNumber:e.phoneNumber,email:e.email.trim()})))};console.log("Formatted Data:",i),zC.collection("SurveyResponses").doc(e.id).update({references:i.references}).then((()=>{console.log("Document successfully updated!"),t("/rent/off-campus/step18")})).catch((e=>{console.error("Error updating document: ",e)}))},children:"Next"})]})},lN=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)({governmentId:"",photoIdType:"",photoIdNumber:"",idExpiryDate:"",issuingGovernment:""}),[s,o]=(0,i.useState)(null);(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{if(e.exists){const t=e.data();r(t),t.governmentId&&o(t.governmentId)}})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]),(0,i.useEffect)((()=>{if(e){const t={};n.photoIdType&&(t.photoIdType=n.photoIdType),n.photoIdNumber&&(t.photoIdNumber=n.photoIdNumber),n.idExpiryDate&&(t.idExpiryDate=n.idExpiryDate),n.issuingGovernment&&(t.issuingGovernment=n.issuingGovernment),Object.keys(t).length>0&&zC.collection("SurveyResponses").doc(e.id).update(t).then((()=>{console.log("Photo ID Type, Number, ID Expiry Date, and Issuing Government saved to the database")})).catch((e=>{console.error("Error saving Photo ID Type, Number, ID Expiry Date, and Issuing Government:",e)}))}}),[e,n.photoIdType,n.photoIdNumber,n.issuingGovernment,n.idExpiryDate]);const a=async(e,t)=>{const n=BC.ref("userGovernmentIds/".concat(e,"/").concat(t.name));try{const e=await n.put(t);console.log("File uploaded successfully!",e);return await n.getDownloadURL()}catch(r){return console.error("Error uploading file: ",r),""}};return(0,yr.jsxs)("div",{className:"form-container",style:{width:"50%",margin:"60px auto",maxHeight:"80vh",overflowY:"auto",padding:"20px"},children:[(0,yr.jsx)("h2",{className:"step-title",children:"Photo ID"}),(0,yr.jsx)("p",{className:"step-description",children:"Please Upload a Government-Issued Photo ID*"}),s&&(0,yr.jsx)("img",{src:s,alt:"Preview",className:"image-preview"}),(0,yr.jsx)("div",{className:"file-input-container",children:(0,yr.jsx)("input",{type:"file",accept:"*",onChange:e=>{const t=e.target.files[0],i=new FileReader;i.onloadend=()=>{o(i.result)},t&&i.readAsDataURL(t),r({...n,governmentId:t.name,file:t})},className:"input-field file-input"})}),(0,yr.jsxs)("div",{className:"select-container",children:[(0,yr.jsx)("label",{htmlFor:"photoIdType",children:"Select Photo ID Type:"}),(0,yr.jsxs)("select",{id:"photoIdType",name:"photoIdType",value:n.photoIdType,onChange:e=>{const t=e.target.value;r({...n,photoIdType:t})},className:"input-field",children:[(0,yr.jsx)("option",{value:"",children:"Select Type"}),(0,yr.jsx)("option",{value:"driverLicense",children:"Driver's License"}),(0,yr.jsx)("option",{value:"passport",children:"Passport"})]})]}),(0,yr.jsxs)("div",{className:"input-container",children:[(0,yr.jsx)("label",{htmlFor:"photoIdNumber",children:"Photo ID Number:"}),(0,yr.jsx)("input",{type:"text",id:"photoIdNumber",name:"photoIdNumber",value:n.photoIdNumber,onChange:e=>{const t=e.target.value;r({...n,photoIdNumber:t})},className:"input-field"})]}),(0,yr.jsx)("label",{htmlFor:"idExpiryDate",children:"Enter Photo ID Expiration Date:"}),(0,yr.jsx)("input",{type:"date",id:"idExpiryDate",placeholder:"Expiry Date",className:"input-field",value:n.idExpiryDate,onChange:e=>r({...n,idExpiryDate:e.target.value})}),(0,yr.jsxs)("div",{className:"select-container",children:[(0,yr.jsx)("label",{htmlFor:"issuingGovernment",children:"Issuing Government:"}),(0,yr.jsxs)("select",{id:"issuingGovernment",name:"issuingGovernment",value:n.issuingGovernment,onChange:e=>{const t=e.target.value;r({...n,issuingGovernment:t})},className:"input-field",children:[(0,yr.jsx)("option",{value:"",children:"Select Government"}),["United States","China","India","Indonesia","Pakistan","Brazil","Nigeria","Bangladesh","Russia","Mexico","Japan","Ethiopia","Philippines","Egypt","Vietnam","DR Congo","Turkey","Iran","Germany","Thailand","United Kingdom","France","Italy","Tanzania","South Africa","Myanmar","Kenya","South Korea","Colombia","Spain","Uganda","Argentina","Algeria","Sudan","Ukraine","Iraq","Afghanistan","Poland","Canada","Morocco","Saudi Arabia","Uzbekistan","Malaysia","Peru","Angola","Ghana","Mozambique","Yemen","Nepal","Venezuela"].map(((e,t)=>(0,yr.jsx)("option",{value:e,children:e},t)))]})]}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step17",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),(0,yr.jsx)("button",{className:"next-button",onClick:async()=>{if(n.photoIdType&&n.photoIdNumber&&n.issuingGovernment&&n.idExpiryDate){if(e&&n.file){const t={governmentId:await a(e.id,n.file),photoIdType:n.photoIdType,photoIdNumber:n.photoIdNumber,issuingGovernment:n.issuingGovernment,idExpiryDate:n.idExpiryDate};await zC.collection("SurveyResponses").doc(e.id).update(t)}t("/rent/off-campus/step19")}else alert("Please fill in all required fields.")},disabled:!n.governmentId,children:"Next"})]})},cN=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)([]);(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{if(e.exists){const t=e.data();t.lettersOfReference&&Array.isArray(t.lettersOfReference)&&r([...t.lettersOfReference])}})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);return(0,yr.jsxs)("div",{className:"form-container",style:{marginTop:"35px"},children:[(0,yr.jsx)("h2",{className:"step-title",children:"Letters of Reference"}),(0,yr.jsx)("p",{className:"step-description",children:"Please Upload Any Letters of Reference (Optional)"}),n.map(((e,t)=>(0,yr.jsxs)("div",{className:"image-preview-container",children:[(0,yr.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"image-preview"}),(0,yr.jsx)("button",{onClick:()=>(e=>{r((t=>{const n=[...t];return n.splice(e,1),n}))})(t),className:"remove-button",children:"Remove"})]},t))),(0,yr.jsx)("div",{className:"file-input-container",children:(0,yr.jsx)("input",{type:"file",accept:"*",onChange:async t=>{try{const n=t.target.files;if(!n)return void console.error("No files selected");const i=[];for(const t of n){const n=BC.ref("userLettersOfReference/".concat(e.id,"/").concat(t.name));await n.put(t);const r=await n.getDownloadURL();i.push(r)}r((e=>[...e,...i]))}catch(n){console.error("Error in handleFileChange:",n)}},className:"input-field file-input",multiple:!0})}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step18",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),(0,yr.jsx)("button",{className:"next-button",onClick:async()=>{if(e){const t={lettersOfReference:n};await zC.collection("SurveyResponses").doc(e.id).update(t)}t("/rent/off-campus/step20")},children:"Next"})]})},uN=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)(null),[s,o]=(0,i.useState)(null),[a,l]=(0,i.useState)(!1);(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{if(e.exists){const t=e.data();o(t.rentalWorkshopCertificate)}})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);const c=async(e,t)=>{const n=BC.ref("userCertificates/".concat(e,"/").concat(t.name));try{const e=await n.put(t);console.log("File uploaded successfully!",e);return await n.getDownloadURL()}catch(r){return console.error("Error uploading file: ",r),""}},[u,h]=(0,i.useState)("");return(0,yr.jsxs)("div",{className:"form-container",style:{marginTop:"35px"},children:[(0,yr.jsx)("h2",{className:"step-title",children:"Rental Workshop Certificate"}),(0,yr.jsx)("p",{className:"step-description",children:"Please Complete the Following Workshop and Upload Your Certificate"}),(0,yr.jsx)("button",{onClick:()=>{return e="https://canvas.ucsc.edu/enroll/7DWCHX",void window.open(e,"_blank");var e},children:"Open Workshop"}),a&&(0,yr.jsx)("div",{className:"modal-background",children:(0,yr.jsxs)("div",{className:"modal-content",children:[(0,yr.jsx)("iframe",{title:"Workshop Content",src:u,width:"100%",height:"100%",frameBorder:"0",allowFullScreen:!0}),(0,yr.jsx)("button",{onClick:()=>{h(""),l(!1)},className:"close-button",children:"Close"})]})}),s&&(0,yr.jsx)("div",{className:"image-preview-container",children:(0,yr.jsx)("img",{src:s,alt:"Certificate Preview",className:"image-preview"})}),n&&(0,yr.jsx)("div",{className:"image-preview-container",children:(0,yr.jsx)("img",{src:URL.createObjectURL(n),alt:"Certificate Preview",className:"certificate-preview"})}),(0,yr.jsx)("div",{className:"file-input-container",children:(0,yr.jsx)("input",{type:"file",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:async t=>{const n=t.target.files[0];if(n){const t=await c(e.id,n);await zC.collection("SurveyResponses").doc(e.id).update({rentalWorkshopCertificate:t}),o(t)}},className:"input-field file-input"})}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step19",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{console.log("Navigating to the next step"),t("/rent/off-campus/step21")},children:"Next"})]})},hN=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)(""),[a,l]=(0,i.useState)(""),[c,u]=(0,i.useState)("");(0,i.useEffect)((()=>{(async()=>{if(e)try{const t=await zC.collection("SurveyResponses").doc(e.id).get();if(t.exists){const e=t.data().guarantor;e&&(r(e.guarantorName||""),o(e.guarantorRelation||""),l(e.guarantorPhone||""),u(e.guarantorEmail||""))}}catch(t){console.error("Error fetching guarantor data:",t)}})()}),[e]),(0,i.useEffect)((()=>{d()}),[n,s,a,c]);const h=e=>e.replace(/[^0-9]/g,"").replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"),d=async()=>{if(e){const t=h(a);if(""!==n.trim()&&"Select Relation"!==s&&/^\d{3}-\d{3}-\d{4}$/.test(t)&&(e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))(c)){const r={guarantorName:n,guarantorRelation:s,guarantorPhone:t,guarantorEmail:c};await zC.collection("SurveyResponses").doc(e.id).update({guarantor:r})}}};return(0,yr.jsxs)("div",{className:"form-container",style:{width:"50%",margin:"60px auto",maxHeight:"80vh",overflowY:"auto",padding:"20px"},children:[(0,yr.jsx)("h2",{className:"step-title",children:"Letter of Guarantor"}),(0,yr.jsx)("p",{className:"step-description",children:"Please Add A Guarantor Who Will Fill Out the Guarantor Form"}),(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsxs)("div",{className:"name-relation-group",children:[(0,yr.jsx)("label",{children:"Name:"}),(0,yr.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value)}),(0,yr.jsx)("label",{children:"Relation:"}),(0,yr.jsxs)("select",{value:s,onChange:e=>o(e.target.value),children:[(0,yr.jsx)("option",{value:"Select Relation",disabled:!0,hidden:!0,children:"Select Relation"}),(0,yr.jsx)("option",{value:"Friend",children:"Friend"}),(0,yr.jsx)("option",{value:"Mother",children:"Mother"}),(0,yr.jsx)("option",{value:"Father",children:"Father"}),(0,yr.jsx)("option",{value:"Brother",children:"Brother"}),(0,yr.jsx)("option",{value:"Sister",children:"Sister"}),(0,yr.jsx)("option",{value:"Uncle",children:"Uncle"}),(0,yr.jsx)("option",{value:"Aunt",children:"Aunt"}),(0,yr.jsx)("option",{value:"Colleague",children:"Colleague"}),(0,yr.jsx)("option",{value:"Neighbor",children:"Neighbor"}),(0,yr.jsx)("option",{value:"Spouse",children:"Spouse"}),(0,yr.jsx)("option",{value:"Child",children:"Child"}),(0,yr.jsx)("option",{value:"Relative",children:"Relative"}),(0,yr.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,yr.jsxs)("div",{className:"input-group-phone-email",children:[(0,yr.jsx)("label",{children:"Phone Number:"}),(0,yr.jsx)("input",{type:"tel",value:h(a),onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,"");l(t)},maxLength:"12"}),(0,yr.jsx)("label",{children:"Email:"}),(0,yr.jsx)("input",{type:"email",value:c,onChange:e=>u(e.target.value)})]})]}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step20",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{d(),t("/rent/off-campus/step22")},children:"Next"})]})},dN=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)({vehicleInfo:[]});(0,i.useEffect)((()=>{e&&zC.collection("SurveyResponses").doc(e.id).get().then((e=>{if(e.exists){const t=e.data().vehicleInfo||[];r({vehicleInfo:t.map((e=>({...e})))})}})).catch((e=>{console.error("Error fetching data:",e)}))}),[e]);const s=(e,t,n)=>{r((r=>{const i=[...r.vehicleInfo];let s=n;return s=s.replace(/\D/g,"").slice(0,4),i[e][t]=s,{...r,vehicleInfo:i}}))};return(0,yr.jsxs)("div",{className:"form-container",style:{marginTop:"55px",width:"400px"},children:[(0,yr.jsx)("h2",{className:"step-title",children:"Vehicle Information"}),(0,yr.jsx)("p",{className:"step-description",children:"Please Provide Information About Your Vehicles"}),n.vehicleInfo.map(((e,t)=>(0,yr.jsxs)("div",{className:"car-entry",style:{marginBottom:"15px"},children:[(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"Make:"}),(0,yr.jsx)("input",{type:"text",value:e.make,onChange:e=>s(t,"make",e.target.value)})]}),(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"Year:"}),(0,yr.jsx)("input",{type:"text",value:e.year,onChange:e=>s(t,"year",e.target.value)})]}),(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"License Number:"}),(0,yr.jsx)("input",{type:"text",value:e.licenseNumber,onChange:e=>s(t,"licenseNumber",e.target.value.toUpperCase()),autoCapitalize:"characters"}),(0,yr.jsx)("button",{onClick:()=>(e=>{r((t=>{const n=[...t.vehicleInfo];return n.splice(e,1),{...t,vehicleInfo:n}}))})(t),children:" - "})]})]},t))),(0,yr.jsx)("div",{className:"add-another-container",children:(0,yr.jsx)("button",{onClick:()=>{r((e=>({...e,vehicleInfo:[...e.vehicleInfo,{make:"",year:"",licenseNumber:""}]})))},children:"+ Add Another Car"})}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step21",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{const r=n.vehicleInfo.every((e=>""!==e.make.trim()&&/^\d+$/.test(e.year.trim())&&""!==e.licenseNumber.trim()));if(!n.vehicleInfo.every(((e,t)=>{return n=e.year,/^\d{4}$/.test(n);var n})))return void alert("Please provide a valid 4-digit year for each vehicle.");if(!r)return void alert("Please fill out all fields for each vehicle with valid information before proceeding.");const i={vehicleInfo:n.vehicleInfo.map((e=>({make:e.make.trim(),year:e.year.trim(),licenseNumber:e.licenseNumber.trim().toUpperCase()})))};zC.collection("SurveyResponses").doc(e.id).update({vehicleInfo:i.vehicleInfo}).then((()=>{console.log("Document successfully updated!"),t("/rent/off-campus/step23")})).catch((e=>{console.error("Error updating document: ",e)}))},children:"Next"})]})},fN=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)(!1);(0,i.useEffect)((()=>{(async()=>{if(e)try{const t=await zC.collection("SurveyResponses").doc(e.id).get();if(t.exists){const e=t.data();r(!!e.guarantorFormFilled)}}catch(t){console.error("Error fetching guarantor form data:",t)}})()}),[e]);return(0,yr.jsxs)("div",{className:"form-container",style:{width:"50%",margin:"60px auto",maxHeight:"80vh",overflowY:"auto",padding:"20px"},children:[(0,yr.jsx)("h2",{className:"step-title",children:"Guarantor Confirmation"}),(0,yr.jsx)("p",{className:"step-description",children:"Status of the Guarantor Form:"}),(0,yr.jsx)("div",{className:"status-indicator",children:n?(0,yr.jsx)("span",{className:"check-mark",children:"\u2714"}):(0,yr.jsx)("span",{className:"red-x",children:"\u2716"})}),n&&(0,yr.jsx)("button",{className:"submit-button",onClick:async()=>{try{await zC.collection("SurveyResponses").doc(e.id).update({offcampusformdone:!0}),t("/onboarding")}catch(n){console.error("Error saving form data:",n),alert("Error submitting form. Please try again.")}},children:"Submit"}),(0,yr.jsx)(xe,{to:"/rent/off-campus/step22",children:(0,yr.jsx)("span",{className:"back-button",children:"<-"})})]})},pN=()=>{const{user:e}=gr(),t=ee(),[n,r]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{(async()=>{if(e)try{const n=await zC.collection("SurveyResponses").doc(e.id).get();if(n.exists){const e=n.data(),i=(null===e||void 0===e?void 0:e.offcampusformdone)||!1;r(i),console.log("Off-Campus Form Data:",i),i||(console.log("Redirecting to Step 1: Off-Campus Form not done"),t("/rent/off-campus/step1"))}else console.log("Redirecting to Step 1: Document not found"),t("/rent/off-campus/step1")}catch(n){console.error("Error fetching form data:",n)}else console.log("Redirecting to Step 1: No user"),t("/rent/off-campus/step1")})()}),[e,t]),(0,yr.jsxs)("div",{className:"form-container",style:{marginTop:"35px",width:"1000px"},children:[(0,yr.jsx)("h2",{className:"step-title",children:"Off-Campus Housing Dashboard"}),(0,yr.jsx)("p",{className:"step-description",children:"Your Off-Campus Housing Listings"})]})},mN=()=>{const[e,t]=(0,i.useState)(!1);(0,i.useEffect)((()=>{}),[]);const n=()=>{t(!0)};return e?(0,yr.jsx)("div",{children:(0,yr.jsx)("h2",{children:"Off-Campus Housing Listings"})}):(0,yr.jsx)("div",{children:(0,yr.jsxs)(ve,{children:[(0,yr.jsx)(me,{path:"/",element:(0,yr.jsx)(pN,{onComplete:n})}),(0,yr.jsx)(me,{path:"step1",element:(0,yr.jsx)(qC,{onComplete:n})}),(0,yr.jsx)(me,{path:"step2",element:(0,yr.jsx)(HC,{onComplete:n})}),(0,yr.jsx)(me,{path:"step3",element:(0,yr.jsx)(WC,{onComplete:n})}),(0,yr.jsx)(me,{path:"step4",element:(0,yr.jsx)(KC,{onComplete:n})}),(0,yr.jsx)(me,{path:"step5",element:(0,yr.jsx)(QC,{onComplete:n})}),(0,yr.jsx)(me,{path:"step6",element:(0,yr.jsx)(YC,{onComplete:n})}),(0,yr.jsx)(me,{path:"step7",element:(0,yr.jsx)(JC,{onComplete:n})}),(0,yr.jsx)(me,{path:"step8",element:(0,yr.jsx)($C,{onComplete:n})}),(0,yr.jsx)(me,{path:"step9",element:(0,yr.jsx)(XC,{onComplete:n})}),(0,yr.jsx)(me,{path:"step10",element:(0,yr.jsx)(ZC,{onComplete:n})}),(0,yr.jsx)(me,{path:"step11",element:(0,yr.jsx)(eN,{onComplete:n})}),(0,yr.jsx)(me,{path:"step12",element:(0,yr.jsx)(tN,{onComplete:n})}),(0,yr.jsx)(me,{path:"step13",element:(0,yr.jsx)(rN,{onComplete:n})}),(0,yr.jsx)(me,{path:"step14",element:(0,yr.jsx)(iN,{onComplete:n})}),(0,yr.jsx)(me,{path:"step15",element:(0,yr.jsx)(sN,{onComplete:n})}),(0,yr.jsx)(me,{path:"step16",element:(0,yr.jsx)(oN,{onComplete:n})}),(0,yr.jsx)(me,{path:"step17",element:(0,yr.jsx)(aN,{onComplete:n})}),(0,yr.jsx)(me,{path:"step18",element:(0,yr.jsx)(lN,{onComplete:n})}),(0,yr.jsx)(me,{path:"step19",element:(0,yr.jsx)(cN,{onComplete:n})}),(0,yr.jsx)(me,{path:"step20",element:(0,yr.jsx)(uN,{onComplete:n})}),(0,yr.jsx)(me,{path:"step21",element:(0,yr.jsx)(hN,{onComplete:n})}),(0,yr.jsx)(me,{path:"step22",element:(0,yr.jsx)(dN,{onComplete:n})}),(0,yr.jsx)(me,{path:"step23",element:(0,yr.jsx)(fN,{onComplete:n})})]})})},gN=()=>{const e={display:"flex",flexDirection:"column",marginBottom:"10px"},t={fontStyle:"italic"};return(0,yr.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"rgba(255, 255, 255, 0)",overflow:"hidden"},children:(0,yr.jsxs)("div",{style:{maxWidth:"600px",padding:"20px",backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"8px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.9)",fontFamily:"monospace",fontSize:"16px",fontWeight:"normal",lineHeight:"1.5",overflow:"hidden"},children:[(0,yr.jsx)("h1",{children:"Rentals For All - Coming Soon!"}),(0,yr.jsx)("p",{children:"We're excited to announce that the ability to rent homes anywhere is in development. Here are some of the features we have planned:"}),(0,yr.jsx)("div",{style:e,children:(0,yr.jsx)("span",{style:t,children:"Rent your dream home with ease"})}),(0,yr.jsx)("div",{style:e,children:(0,yr.jsx)("span",{style:t,children:"Pay your rent through this website or our app"})}),(0,yr.jsx)("div",{style:e,children:(0,yr.jsx)("span",{style:t,children:"Request maintainance needs through this website or our app"})}),(0,yr.jsx)("p",{children:"Stay tuned for updates on our progress and the launch of this exciting new feature!"})]})})},vN=e=>{let{subTab:t}=e;return(0,yr.jsxs)("div",{children:["off-campus"===t&&(0,yr.jsx)("h2",{children:"Off-Campus Housing"}),"for-all"===t&&(0,yr.jsx)("h2",{children:"For-All"})]})},yN=e=>{switch(e){case"off-campus":return(0,yr.jsx)(mN,{});case"for-all":return(0,yr.jsx)(gN,{});default:return}},wN=()=>{const{subTab:e}=te();return(0,yr.jsxs)("div",{children:[(0,yr.jsx)(vN,{subTab:e}),yN(e)]})},bN=()=>{const e={display:"flex",flexDirection:"column",marginBottom:"10px"},t={fontStyle:"italic"};return(0,yr.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"rgba(255, 255, 255, 0)"},children:(0,yr.jsxs)("div",{style:{maxWidth:"600px",padding:"20px",backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"8px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.9)",fontFamily:"monospace",fontSize:"16px",fontWeight:"normal",lineHeight:"1.5"},children:[(0,yr.jsx)("h1",{children:"Venture Options - Coming Soon!"}),(0,yr.jsx)("p",{children:"We're excited to announce that the ability to venture short-term rentals is in development. Here are some of the features we have planned:"}),(0,yr.jsx)("div",{style:e,children:(0,yr.jsx)("span",{style:t,children:"Buy and sell your dates for a higher or lower price"})}),(0,yr.jsx)("div",{style:e,children:(0,yr.jsx)("span",{style:t,children:"Similar to stocks, trade your short-term rental options"})}),(0,yr.jsx)("div",{style:e,children:(0,yr.jsx)("span",{style:t,children:"Experience the flexibility of a stock market for your rental dates"})}),(0,yr.jsx)("p",{children:"Stay tuned for updates on our progress and the launch of this exciting new feature!"})]})})},_N=()=>{var e,t,n,r,s,o,a,l;const{user:c}=vr(),u=(0,i.useRef)(null),h={firstName:null!==(e=null===c||void 0===c?void 0:c.firstName)&&void 0!==e?e:"John",lastName:null!==(t=null===c||void 0===c?void 0:c.lastName)&&void 0!==t?t:"Doe",email:null!==(n=null===c||void 0===c||null===(r=c.primaryEmailAddress)||void 0===r?void 0:r.email)&&void 0!==n?n:"john.doe@example.com",phoneNumber:null!==(s=null===c||void 0===c||null===(o=c.primaryPhoneNumber)||void 0===o?void 0:o.phoneNumber)&&void 0!==s?s:"123-456-7890",profileImage:null!==(a=null===c||void 0===c?void 0:c.imageUrl)&&void 0!==a?a:"url_to_default_image.jpg",housingPreferences:null!==(l=null===c||void 0===c?void 0:c.housingPreferences)&&void 0!==l?l:"Your housing preferences here"};return(0,yr.jsxs)("div",{style:SN.container,className:"form-container",children:[(0,yr.jsxs)("div",{style:SN.imageContainer,children:[(0,yr.jsx)("img",{src:h.profileImage,alt:"Profile",style:SN.profileImage}),(0,yr.jsx)("div",{style:SN.editImageButtonContainer,children:(0,yr.jsx)("button",{onClick:()=>{u.current.click()},style:SN.editImageButton,children:"Edit"})}),(0,yr.jsx)("input",{type:"file",accept:"image/*",ref:u,style:{display:"none"},onChange:async e=>{const t=e.target.files[0];if(t)try{const e=await c.setProfileImage({file:t});window.location.reload(),console.log("Image uploaded successfully:",e)}catch(n){console.error("Error uploading image:",n)}}})]}),(0,yr.jsxs)("div",{style:SN.nameContainer,children:[(0,yr.jsx)("h2",{style:SN.userName,children:(0,yr.jsxs)("strong",{children:[h.firstName," ",h.lastName]})}),(0,yr.jsx)("p",{style:SN.username,children:(null===c||void 0===c?void 0:c.username)&&(0,yr.jsx)("em",{children:c.username})})]}),(0,yr.jsxs)("div",{style:SN.contactContainer,children:[(0,yr.jsxs)("p",{style:SN.contactInfo,children:["Email: ",h.email]}),(0,yr.jsxs)("p",{style:SN.contactInfo,children:["Phone: ",h.phoneNumber]})]}),(0,yr.jsxs)("div",{style:SN.preferencesContainer,children:[(0,yr.jsx)("h3",{style:SN.preferencesHeading,children:"Housing Preferences"}),(0,yr.jsx)("p",{style:SN.preferencesText,children:h.housingPreferences})]})]})},SN={container:{textAlign:"center",padding:"50px",borderRadius:"8px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"700px"},imageContainer:{position:"relative",marginBottom:"20px"},profileImage:{width:"100px",height:"100px",borderRadius:"50%"},editImageButton:{position:"absolute",bottom:"0",right:"0",transform:"translate(-520%, 50%)",backgroundColor:"#3498db",color:"#fff",border:"none",padding:"8px",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",fontFamily:"monospace",fontSize:"12px"},nameContainer:{marginBottom:"10px"},userName:{fontSize:"24px",fontWeight:"bold",fontFamily:"monospace"},username:{fontSize:"14px",fontStyle:"italic"},contactContainer:{marginBottom:"20px"},contactInfo:{fontSize:"16px",marginBottom:"10px",fontFamily:"monospace"},portfolioContainer:{marginBottom:"20px"},portfolioHeading:{fontSize:"18px",fontWeight:"bold",fontFamily:"monospace"},socialLink:{fontSize:"16px",margin:"5px 0",fontFamily:"monospace"},preferencesContainer:{marginTop:"20px"},preferencesHeading:{fontSize:"18px",fontWeight:"bold",fontFamily:"monospace"},preferencesText:{fontSize:"16px",fontFamily:"monospace"}},IN=()=>{var e,t,n,r,s,o,a,l,c,u,h,d,f,p;const{userid:m}=te(),g=ee(),[v,y]=(0,i.useState)({guarantor:{guarantorName:"",guarantorRelation:"",guarantorPhone:"",guarantorEmail:"",driversLicense:"",dateOfBirth:"",homeAddress:"",employerName:"",jobTitle:"",employmentLength:"",businessAddress:"",monthlyIncome:"",supervisorName:"",supervisorPhone:""},guarantorFormFilled:!1}),[w,b]=(0,i.useState)(!1);(0,i.useEffect)((()=>{(async()=>{try{const e=await zC.collection("SurveyResponses").doc(m).get();if(e.exists){const t=e.data();y(t),b(!!t.guarantor)}}catch(e){console.error("Error fetching form data:",e)}})()}),[m]);const _=(e,t)=>{"guarantorPhone"!==e&&"supervisorPhone"!==e||(t=(e=>e.replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"))(t)),"monthlyIncome"===e&&(t=(e=>{const t=e.replace(/[^\d.]/g,""),[n,r]=t.split("."),i=n.replace(/\B(?=(\d{3})+(?!\d))/g,","),s=r?"".concat(i,".").concat(r):i;return"$".concat(s)})(t)),"guarantorEmail"!==e||(e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))(t)?y((n=>({...n,guarantor:{...n.guarantor,[e]:t},[e]:t}))):alert("Please enter a valid email address.")};return(0,yr.jsxs)("div",{className:"form-container",children:[(0,yr.jsxs)("h2",{className:"step-title",children:[v.guarantor.guarantorName," Guarantor Form"]}),(0,yr.jsx)("p",{className:"step-description",children:"You have been selected to sign as a guarantor for ".concat(v.firstName," ").concat(v.lastName,". Please confirm and fill in the following information.")}),(0,yr.jsx)("div",{className:"guarantor-section",children:(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsxs)("div",{className:"form-row",children:[(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"Guarantor Name:"}),(0,yr.jsx)("input",{type:"text",value:(null===(e=v.guarantor)||void 0===e?void 0:e.guarantorName)||"",onChange:e=>_("guarantorName",e.target.value)})]}),(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"Guarantor Relation:"}),(0,yr.jsxs)("select",{value:(null===(t=v.guarantor)||void 0===t?void 0:t.guarantorRelation)||"Select Relation",onChange:e=>_("guarantorRelation",e.target.value),children:[(0,yr.jsx)("option",{value:"Select Relation",disabled:!0,hidden:!0,children:"Select Relation"}),(0,yr.jsx)("option",{value:"Friend",children:"Friend"}),(0,yr.jsx)("option",{value:"Mother",children:"Mother"}),(0,yr.jsx)("option",{value:"Father",children:"Father"}),(0,yr.jsx)("option",{value:"Brother",children:"Brother"}),(0,yr.jsx)("option",{value:"Sister",children:"Sister"}),(0,yr.jsx)("option",{value:"Uncle",children:"Uncle"}),(0,yr.jsx)("option",{value:"Aunt",children:"Aunt"}),(0,yr.jsx)("option",{value:"Colleague",children:"Colleague"}),(0,yr.jsx)("option",{value:"Neighbor",children:"Neighbor"}),(0,yr.jsx)("option",{value:"Spouse",children:"Spouse"}),(0,yr.jsx)("option",{value:"Child",children:"Child"}),(0,yr.jsx)("option",{value:"Relative",children:"Relative"}),(0,yr.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"Guarantor Phone:"}),(0,yr.jsx)("input",{type:"text",value:(null===(n=v.guarantor)||void 0===n?void 0:n.guarantorPhone)||"",onChange:e=>_("guarantorPhone",e.target.value),maxLength:"12"})]})]}),(0,yr.jsx)("div",{className:"form-row",children:(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"Email:"}),(0,yr.jsx)("input",{type:"email",value:(null===(r=v.guarantor)||void 0===r?void 0:r.guarantorEmail)||"",onChange:e=>_("guarantorEmail",e.target.value)})]})})]})}),(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsxs)("div",{className:"form-row",children:[(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"Driver's License:"}),(0,yr.jsx)("input",{type:"text",value:(null===(s=v.guarantor)||void 0===s?void 0:s.driversLicense)||"",onChange:e=>_("driversLicense",e.target.value)})]}),(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"Date of Birth:"}),(0,yr.jsx)("input",{type:"date",value:(null===(o=v.guarantor)||void 0===o?void 0:o.dateOfBirth)||"",onChange:e=>_("dateOfBirth",e.target.value)})]}),(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"Home Address:"}),(0,yr.jsx)(nN.ZP,{value:(null===(a=v.guarantor)||void 0===a?void 0:a.homeAddress)||"",onChange:e=>_("homeAddress",e),onSelect:e=>_("homeAddress",e),searchOptions:{types:["geocode"]},googleMapsApiKey:"AIzaSyAW1V1DfQ36scJduIpmX-cH8EQ9diHF5PQ",children:e=>{let{getInputProps:t,suggestions:n,getSuggestionItemProps:r,loading:i}=e;return(0,yr.jsxs)("div",{children:[(0,yr.jsx)("input",{...t({placeholder:"Type your home address...",className:"location-search-input"})}),(0,yr.jsxs)("div",{className:"autocomplete-dropdown-container",children:[i&&(0,yr.jsx)("div",{}),n.map((e=>(0,yr.jsx)("div",{...r(e,{style:{backgroundColor:e.active?"#a7a9ff":"#fff"}}),children:e.description})))]})]})}})]})]}),(0,yr.jsxs)("div",{className:"form-row",children:[(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"Employer Name:"}),(0,yr.jsx)("input",{type:"text",value:(null===(l=v.guarantor)||void 0===l?void 0:l.employerName)||"",onChange:e=>_("employerName",e.target.value)})]}),(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"Job Title:"}),(0,yr.jsx)("input",{type:"text",value:(null===(c=v.guarantor)||void 0===c?void 0:c.jobTitle)||"",onChange:e=>_("jobTitle",e.target.value)})]}),(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"Length of Employment:"}),(0,yr.jsx)("input",{type:"text",value:(null===(u=v.guarantor)||void 0===u?void 0:u.employmentLength)||"",onChange:e=>_("employmentLength",e.target.value)})]})]}),(0,yr.jsxs)("div",{className:"form-row",children:[(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"Business Address:"}),(0,yr.jsx)(nN.ZP,{value:(null===(h=v.guarantor)||void 0===h?void 0:h.businessAddress)||"",onChange:e=>_("businessAddress",e),onSelect:e=>_("businessAddress",e),searchOptions:{types:["geocode"]},googleMapsApiKey:"AIzaSyAW1V1DfQ36scJduIpmX-cH8EQ9diHF5PQ",children:e=>{let{getInputProps:t,suggestions:n,getSuggestionItemProps:r,loading:i}=e;return(0,yr.jsxs)("div",{children:[(0,yr.jsx)("input",{...t({placeholder:"Type your business address...",className:"location-search-input"})}),(0,yr.jsxs)("div",{className:"autocomplete-dropdown-container",children:[i&&(0,yr.jsx)("div",{}),n.map((e=>(0,yr.jsx)("div",{...r(e,{style:{backgroundColor:e.active?"#a7a9ff":"#fff"}}),children:e.description})))]})]})}})]}),(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"Monthly Income:"}),(0,yr.jsx)("input",{type:"text",value:(null===(d=v.guarantor)||void 0===d?void 0:d.monthlyIncome)||"",onChange:e=>_("monthlyIncome",e.target.value)})]}),(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"Supervisor's Name:"}),(0,yr.jsx)("input",{type:"text",value:(null===(f=v.guarantor)||void 0===f?void 0:f.supervisorName)||"",onChange:e=>_("supervisorName",e.target.value)})]})]}),(0,yr.jsx)("div",{className:"form-row",children:(0,yr.jsxs)("div",{className:"input-group",children:[(0,yr.jsx)("label",{children:"Supervisor's Phone:"}),(0,yr.jsx)("input",{type:"tel",value:(null===(p=v.guarantor)||void 0===p?void 0:p.supervisorPhone)||"",onChange:e=>_("supervisorPhone",e.target.value),maxLength:"12"})]})})]}),(0,yr.jsx)("button",{className:"next-button",onClick:()=>{["guarantorName","guarantorRelation","guarantorPhone","guarantorEmail","driversLicense","dateOfBirth","homeAddress","employerName","jobTitle","employmentLength","businessAddress","monthlyIncome","supervisorName","supervisorPhone"].some((e=>!v.guarantor[e]))?alert("Please fill in all required fields before submitting the form."):zC.collection("SurveyResponses").doc(m).update({...v,guarantorFormFilled:!0}).then((()=>{alert("Form submitted successfully!"),g("/onboarding")})).catch((e=>{console.error("Error saving form data:",e),alert("Error submitting form. Please try again.")}))},children:"Submit"})]})};const EN=()=>{const{user:e,signOut:t}=vr();return(0,yr.jsx)("nav",{children:(0,yr.jsxs)("ul",{children:[(0,yr.jsx)("li",{children:(0,yr.jsx)(xe,{to:"/buy",children:"Buy"})}),(0,yr.jsx)("li",{children:(0,yr.jsx)(xe,{to:"/rent",children:"Rent"})}),(0,yr.jsx)("li",{children:(0,yr.jsx)(xe,{to:"/venture",children:"Venture"})}),(0,yr.jsx)(pr,{children:(0,yr.jsxs)("li",{style:CN.profileContainer,onMouseEnter:()=>{const e=document.getElementById("profileDropdown");e&&(e.style.display="block")},onMouseLeave:()=>{const e=document.getElementById("profileDropdown");e&&(e.style.display="none")},children:[(0,yr.jsxs)(xe,{to:"/profile",children:[(0,yr.jsx)("img",{src:null===e||void 0===e?void 0:e.imageUrl,alt:"Profile",style:CN.profileImage}),(0,yr.jsx)("span",{style:CN.profileText})]}),(0,yr.jsxs)("div",{id:"profileDropdown",style:CN.dropdownContent,children:[(0,yr.jsx)("div",{style:CN.dropdownItem,onClick:()=>{window.location.href="/profile"},children:(0,yr.jsx)("span",{style:CN.cursorPointer,children:"Profile"})}),(0,yr.jsx)("div",{style:CN.dropdownItem,onClick:()=>{(async()=>{try{await t()}catch(e){console.error("Error signing out:",e)}})(),window.location.href="/onboarding"},children:(0,yr.jsx)("span",{style:CN.cursorPointer,children:"Sign Out"})})]})]})})]})})},kN=()=>(0,yr.jsx)("nav",{children:(0,yr.jsxs)("ul",{children:[(0,yr.jsx)("li",{children:(0,yr.jsx)(xe,{to:"/rent/off-campus",children:"Off-Campus"})}),(0,yr.jsx)("li",{children:(0,yr.jsx)(xe,{to:"/rent/for-all",children:"For-All"})})]})}),xN=()=>{const{session:e}=vr();return e&&e.user?(0,yr.jsx)(pe,{to:"/dashboard"}):(0,yr.jsx)(Sr,{})},TN=()=>(0,yr.jsx)("div",{className:"app-container",children:(0,yr.jsxs)(Kn,{publishableKey:"pk_test_aG9seS1taW5ub3ctOTkuY2xlcmsuYWNjb3VudHMuZGV2JA",googleMapsApiKey:"AIzaSyAW1V1DfQ36scJduIpmX-cH8EQ9diHF5PQ",children:[(0,yr.jsx)(pr,{children:(0,yr.jsx)(EN,{})}),(0,yr.jsxs)(ve,{children:[(0,yr.jsx)(me,{path:"/",element:(0,yr.jsx)(xN,{})}),(0,yr.jsx)(me,{path:"/dashboard",element:(0,yr.jsx)(wr,{})}),(0,yr.jsx)(me,{path:"/onboarding",element:(0,yr.jsx)(Sr,{})}),(0,yr.jsx)(me,{path:"/buy",element:(0,yr.jsx)(Ir,{})}),(0,yr.jsx)(me,{path:"/guarantor/:userid",element:(0,yr.jsx)(IN,{})}),(0,yr.jsx)(me,{path:"/rent/*",element:(0,yr.jsxs)("div",{children:[(0,yr.jsx)(kN,{}),(0,yr.jsxs)(ve,{children:[(0,yr.jsx)(me,{index:!0,element:(0,yr.jsx)(wN,{})}),(0,yr.jsx)(me,{path:"/off-campus/*",element:(0,yr.jsx)(mN,{})}),(0,yr.jsx)(me,{path:"/for-all",element:(0,yr.jsx)(gN,{})})]})]})}),(0,yr.jsx)(me,{path:"/venture",element:(0,yr.jsx)(bN,{})}),(0,yr.jsx)(me,{path:"/profile",element:(0,yr.jsx)(_N,{})}),(0,yr.jsx)(me,{path:"*",element:(0,yr.jsx)(pr,{children:(0,yr.jsx)(pe,{to:"/dashboard",replace:!0})})})]}),(0,yr.jsx)(ve,{children:(0,yr.jsx)(me,{path:"*",element:(0,yr.jsx)(mr,{children:e=>{let{location:t}=e;return t.pathname.startsWith("/guarantor/")||t.pathname.startsWith("/onboarding")?null:(0,yr.jsx)(pe,{to:"/onboarding",replace:!0})}})})}),(0,yr.jsx)(ve,{children:(0,yr.jsx)(me,{path:"/onboarding",element:(0,yr.jsx)(pr,{children:(0,yr.jsx)(pe,{to:"/dashboard",replace:!0})})})})]})}),CN={cursorPointer:{cursor:"pointer"},profileContainer:{position:"relative",display:"inline-block"},profileImage:{width:"30px",height:"30px",borderRadius:"50%"},dropdownContent:{display:"none",position:"absolute",backgroundColor:"rgba(249, 249, 249, 0.9)",minWidth:"130px",boxShadow:"0px 8px 16px 0px rgba(0,0,0,0.2)",zIndex:1,right:0,top:"30px",borderRadius:"8px",opacity:.9},dropdownItem:{padding:"12px 16px",display:"block",textAlign:"center",fontSize:"20px",fontFamily:"monospace"}},NN="AIzaSyAW1V1DfQ36scJduIpmX-cH8EQ9diHF5PQ",AN={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLERK_PUBLISHABLE_KEY:"pk_test_aG9seS1taW5ub3ctOTkuY2xlcmsuYWNjb3VudHMuZGV2JA",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAW1V1DfQ36scJduIpmX-cH8EQ9diHF5PQ"}.REACT_APP_EMAIL,PN={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLERK_PUBLISHABLE_KEY:"pk_test_aG9seS1taW5ub3ctOTkuY2xlcmsuYWNjb3VudHMuZGV2JA",REACT_APP_GOOGLE_MAPS_API_KEY:"AIzaSyAW1V1DfQ36scJduIpmX-cH8EQ9diHF5PQ"}.REACT_APP_PASSWORD,RN=document.createElement("script");RN.src="https://maps.googleapis.com/maps/api/js?key=".concat(NN,"&libraries=places"),RN.async=!0,RN.defer=!0,document.head.appendChild(RN);const DN=document.getElementById("root");o.createRoot(DN).render((0,yr.jsx)(i.StrictMode,{children:(0,yr.jsx)(Ie,{children:(0,yr.jsx)(TN,{clerkPubKey:"pk_test_aG9seS1taW5ub3ctOTkuY2xlcmsuYWNjb3VudHMuZGV2JA",googleMapsApiKey:NN,email:AN,password:PN})})}))})()})();
//# sourceMappingURL=main.d0467820.js.map